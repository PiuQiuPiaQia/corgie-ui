/*! For license information please see umap.worker.worker.js.LICENSE.txt */
!function(t){var r={};function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var i in t)n.d(e,i,function(r){return t[r]}.bind(null,i));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="./",n(n.s=121)}([,function(t,r){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,r,n){"use strict";function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n.d(r,"a",(function(){return e}))},function(t,r,n){"use strict";function e(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}n.d(r,"a",(function(){return i}))},,,function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,r){(function(r){t.exports=r}).call(this,{})},function(t,r,n){var e,i=n(111);!function(n){"use strict";var o=32;function a(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24}function s(t,r){for(var n=0,e=0;e<t.length;e++){n*=2;var i=(t[e]+n)/r|0;n=(t[e]+n)%r,t[e]=i}return n}function u(t,r){if(null==r)return t.data=[0,0,0,0,0,0,0,0,0,0],void(t._=0);if(r instanceof h)return t.data=r.data,void(t._=r._);switch(typeof r){case"number":t.data=[0|r],t._=0;break;case"string":var n=2,e=o;0===r.indexOf("0b")?r=r.substr(2):0===r.indexOf("0x")&&(r=r.substr(2),n=16,e=8),t.data=[],t._=0;for(var i=r.length-e,a=r.length;;){var s=parseInt(r.slice(i>0?i:0,a),n);if(isNaN(s))throw SyntaxError("Invalid param");if(t.data.push(0|s),i<=0)break;i-=e,a-=e}break;default:t.data=[0];var u=t.data;if(r instanceof Array){for(var f=r.length-1;f>=0;f--){var l=r[f];l===1/0?t._=-1:(c(t,l),u[l>>>5]|=1<<l)}break}if(Uint8Array&&r instanceof Uint8Array){c(t,8*r.length);for(f=0;f<r.length;f++)for(var v=r[f],p=0;p<8;p++){var g=8*f+p;u[g>>>5]|=(v>>p&1)<<g}break}throw SyntaxError("Invalid param")}}function h(t){if(!(this instanceof h))return new h(t);u(this,t),this.data=this.data.slice()}function c(t,r){for(var n=r>>>5,e=t.data,i=t._,o=e.length;n>=o;n--)e.push(i)}var f={data:[],_:0};h.prototype=i({data:[],_:0,set:function(t,r){return c(this,t|=0),void 0===r||r?this.data[t>>>5]|=1<<t:this.data[t>>>5]&=~(1<<t),this},get:function(t){t|=0;var r=this.data,n=t>>>5;return n>=r.length?1&this._:r[n]>>>t&1},not:function(){for(var t=this.clone(),r=t.data,n=0;n<r.length;n++)r[n]=~r[n];return t._=~t._,t},and:function(t){u(f,t);var r=this.clone(),n=r.data,e=f.data,i=e.length,a=f._;0!==r._&&c(r,i*o-1);for(var s=n.length,h=Math.min(i,s),l=0;l<h;l++)n[l]&=e[l];for(;l<s;l++)n[l]&=a;return r._&=a,r},or:function(t){u(f,t);for(var r=this.clone(),n=r.data,e=f.data,i=e.length-1,o=n.length-1,a=Math.min(o,i),s=i;s>a;s--)n[s]=e[s];for(;s>=0;s--)n[s]|=e[s];return r._|=f._,r},xor:function(t){u(f,t);var r=this.clone(),n=r.data,e=f.data,i=r._,o=f._,a=0,s=n.length-1,h=e.length-1;for(a=s;a>h;a--)n[a]^=o;for(a=h;a>s;a--)n[a]=i^e[a];for(;a>=0;a--)n[a]^=e[a];return r._^=o,r},andNot:function(t){return this.and(new h(t).flip())},flip:function(t,r){if(void 0===t){for(var n=this.data,e=0;e<n.length;e++)n[e]=~n[e];this._=~this._}else if(void 0===r)c(this,t),this.data[t>>>5]^=1<<t;else if(0<=t&&t<=r){c(this,r);for(e=t;e<=r;e++)this.data[e>>>5]^=1<<e}return this},clear:function(t,r){var n=this.data;if(void 0===t){for(var e=n.length-1;e>=0;e--)n[e]=0;this._=0}else if(void 0===r)c(this,t|=0),n[t>>>5]&=~(1<<t);else if(t<=r){c(this,r);for(e=t;e<=r;e++)n[e>>>5]&=~(1<<e)}return this},slice:function(t,r){if(void 0===t)return this.clone();if(void 0===r){r=this.data.length*o,(e=Object.create(h.prototype))._=this._,e.data=[0];for(var n=t;n<=r;n++)e.set(n-t,this.get(n));return e}if(t<=r&&0<=t){var e;(e=Object.create(h.prototype)).data=[0];for(n=t;n<=r;n++)e.set(n-t,this.get(n));return e}return null},setRange:function(t,r,n){for(var e=t;e<=r;e++)this.set(e,n);return this},clone:function(){var t=Object.create(h.prototype);return t.data=this.data.slice(),t._=this._,t},toArray:Math.clz32?function(){for(var t=[],r=this.data,n=r.length-1;n>=0;n--)for(var e=r[n];0!==e;){var i=31-Math.clz32(e);e^=1<<i,t.unshift(n*o+i)}return 0!==this._&&t.push(1/0),t}:function(){for(var t=[],r=this.data,n=0;n<r.length;n++)for(var e=r[n];0!==e;){var i=e&-e;e^=i,t.push(n*o+a(i-1))}return 0!==this._&&t.push(1/0),t},toString:function(t){var r=this.data;if(t||(t=2),0===(t&t-1)&&t<36){for(var n="",e=2+Math.log(4294967295)/Math.log(t)|0,i=r.length-1;i>=0;i--){var a=r[i];a<0&&(a+=4294967296);var u=a.toString(t);""!==n&&(n+="0".repeat(e-u.length-1)),n+=u}return 0===this._?(""===(n=n.replace(/^0+/,""))&&(n="0"),n):(n="1111"+n).replace(/^1+/,"...1111")}if(2>t||t>36)throw SyntaxError("Invalid base");n=[];var h=[];for(i=r.length;i--;)for(var c=o;c--;)h.push(r[i]>>>c&1);do{n.unshift(s(h,t).toString(t))}while(!h.every((function(t){return 0===t})));return n.join("")},isEmpty:function(){if(0!==this._)return!1;for(var t=this.data,r=t.length-1;r>=0;r--)if(0!==t[r])return!1;return!0},cardinality:function(){if(0!==this._)return 1/0;for(var t=0,r=this.data,n=0;n<r.length;n++){var e=r[n];0!==e&&(t+=a(e))}return t},msb:Math.clz32?function(){if(0!==this._)return 1/0;for(var t=this.data,r=t.length;r-- >0;){var n=Math.clz32(t[r]);if(n!==o)return r*o+o-1-n}return 1/0}:function(){if(0!==this._)return 1/0;for(var t=this.data,r=t.length;r-- >0;){var n=t[r],e=0;if(n){for(;(n>>>=1)>0;e++);return r*o+e}}return 1/0},ntz:function(){for(var t=this.data,r=0;r<t.length;r++){var n=t[r];if(0!==n)return r*o+a(n=(n^n-1)>>>1)}return 1/0},lsb:function(){for(var t=this.data,r=0;r<t.length;r++){var n=t[r],e=0;if(n){for(var i=n&-n;i>>>=1;e++);return o*r+e}}return 1&this._},equals:function(t){u(f,t);var r=this.data,n=f.data,e=this._,i=f._,o=r.length-1,a=n.length-1;if(i!==e)return!1;for(var s=o<a?o:a,h=0;h<=s;h++)if(r[h]!==n[h])return!1;for(h=o;h>a;h--)if(r[h]!==i)return!1;for(h=a;h>o;h--)if(n[h]!==e)return!1;return!0}},Symbol.iterator,(function(){var t=this.data,r=0;if(0===this._){for(var n=0,e=t.length-1;e>=0;e--)if(0!==t[e]){n=e;break}return{next:function(){var e=r>>>5;return{done:e>n||e===n&&t[e]>>>r===0,value:e>n?0:t[e]>>>r++&1}}}}return{next:function(){var n=r>>>5;return{done:!1,value:n<t.length?t[n]>>>r++&1:1}}}})),h.fromBinaryString=function(t){return new h("0b"+t)},h.fromHexString=function(t){return new h("0x"+t)},h.Random=function(t){(void 0===t||t<0)&&(t=o);for(var r=t%o,n=[],e=Math.ceil(t/o),i=Object.create(h.prototype),a=0;a<e;a++)n.push(4294967296*Math.random()|0);return r>0&&(n[e-1]&=(1<<r)-1),i.data=n,i._=0,i},void 0===(e=function(){return h}.apply(r,[]))||(t.exports=e)}()},function(t,r,n){t.exports=n(112)},,,,function(t,r,n){"use strict";var e=this&&this.__values||function(t){var r="function"===typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};function i(t,r){return Math.floor(r()*t)}function o(t){for(var r=[],n=0;n<t;n++)r.push(void 0);return r}function a(t,r){return o(t).map((function(){return r}))}function s(t){return a(t,0)}function u(t){return t.reduce((function(t,r){return t+r}))}Object.defineProperty(r,"__esModule",{value:!0}),r.tauRandInt=i,r.tauRand=function(t){return t()},r.norm=function(t){var r,n,i=0;try{for(var o=e(t),a=o.next();!a.done;a=o.next()){var s=a.value;i+=Math.pow(s,2)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return Math.sqrt(i)},r.empty=o,r.range=function(t){return o(t).map((function(t,r){return r}))},r.filled=a,r.zeros=s,r.ones=function(t){return a(t,1)},r.linear=function(t,r,n){return o(n).map((function(e,i){return t+i*((r-t)/(n-1))}))},r.sum=u,r.mean=function(t){return u(t)/t.length},r.max=function(t){for(var r=0,n=0;n<t.length;n++)r=t[n]>r?t[n]:r;return r},r.max2d=function(t){for(var r=0,n=0;n<t.length;n++)for(var e=0;e<t[n].length;e++)r=t[n][e]>r?t[n][e]:r;return r},r.rejectionSample=function(t,r,n){for(var e=s(t),o=0;o<t;o++)for(var a=!0;a;){for(var u=i(r,n),h=!1,c=0;c<o;c++)if(u===e[c]){h=!0;break}h||(a=!1),e[o]=u}return e},r.reshape2d=function(t,r,n){var e=[],i=0;if(t.length!==r*n)throw new Error("Array dimensions must match input length.");for(var o=0;o<r;o++){for(var a=[],s=0;s<n;s++)a.push(t[i]),i+=1;e.push(a),1}return e}},,function(t,r,n){"use strict";function e(t,r){return(e=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}n.d(r,"a",(function(){return e}))},function(t,r,n){"use strict";function e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(r,"a",(function(){return e}))},,,function(t,r,n){"use strict";function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(r,"a",(function(){return e}))},,,,,,,,,,,function(t,r,n){"use strict";var e=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var i=e(n(13));function o(t,r){var n=function(n){return i.empty(t).map((function(){return i.filled(r,n)}))},e=[];return e.push(n(-1)),e.push(n(1/0)),e.push(n(0)),e}function a(t,r,n,e,i){r=Math.floor(r);var o=t[0][r],a=t[1][r];t[2][r];if(n>=a[0])return 0;for(var u=0;u<o.length;u++)if(e===o[u])return 0;return s(t,r,n,e,i)}function s(t,r,n,e,i){var o=t[0][r],a=t[1][r],s=t[2][r];if(n>=a[0])return 0;a[0]=n,o[0]=e,s[0]=i;for(var u=0,h=0;;){var c=2*u+1,f=c+1,l=t[0][0].length;if(c>=l)break;if(f>=l){if(!(a[c]>n))break;h=c}else if(a[c]>=a[f]){if(!(n<a[c]))break;h=c}else{if(!(n<a[f]))break;h=f}a[u]=a[h],o[u]=o[h],s[u]=s[h],u=h}return a[u]=n,o[u]=e,s[u]=i,1}function u(t,r,n,e){for(;2*e+1<n;){var i=2*e+1,o=i+1,a=e;if(t[a]<t[i]&&(a=i),o<n&&t[a]<t[o]&&(a=o),a===e)break;var s=t[e];t[e]=t[a],t[a]=s;var u=r[e];r[e]=r[a],r[a]=u,e=a}}r.makeHeap=o,r.rejectionSample=function(t,r,n){for(var e=i.zeros(t),o=0;o<t;o++){for(var a=!0,s=0;a;){s=i.tauRandInt(r,n);for(var u=!1,h=0;h<o;h++)if(s===e[h]){u=!0;break}u||(a=!1)}e[o]=s}return e},r.heapPush=a,r.uncheckedHeapPush=s,r.buildCandidates=function(t,r,n,e,s){for(var u=o(r,e),h=0;h<r;h++)for(var c=0;c<n;c++)if(!(t[0][h][c]<0)){var f=t[0][h][c],l=t[2][h][c],v=i.tauRand(s);a(u,h,v,f,l),a(u,f,v,h,l),t[2][h][c]=0}return u},r.deheapSort=function(t){for(var r=t[0],n=t[1],e=0;e<r.length;e++)for(var i=r[e],o=n[e],a=0;a<i.length-1;a++){var s=i.length-a-1,h=o.length-a-1,c=i[0];i[0]=i[s],i[s]=c;var f=o[0];o[0]=o[h],o[h]=f,u(o,i,h,0)}return{indices:r,weights:n}},r.smallestFlagged=function(t,r){for(var n=t[0][r],e=t[1][r],i=t[2][r],o=1/0,a=-1,s=0;s>n.length;s++)1===i[s]&&e[s]<o&&(o=e[s],a=s);return a>=0?(i[a]=0,Math.floor(n[a])):-1}},function(t,r,n){"use strict";var e,i=this&&this.__read||function(t,r){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(s){i={error:s}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var s=a(n(13)),u=function(){function t(t,r,n,e){if(this.entries=new Map,this.nRows=0,this.nCols=0,t.length!==r.length||t.length!==n.length)throw new Error("rows, cols and values arrays must all have the same length");this.nRows=e[0],this.nCols=e[1];for(var i=0;i<n.length;i++){var o=t[i],a=r[i];this.checkDims(o,a);var s=this.makeKey(o,a);this.entries.set(s,{value:n[i],row:o,col:a})}}return t.prototype.makeKey=function(t,r){return t+":"+r},t.prototype.checkDims=function(t,r){if(!(t<this.nRows&&r<this.nCols))throw new Error("row and/or col specified outside of matrix dimensions")},t.prototype.set=function(t,r,n){this.checkDims(t,r);var e=this.makeKey(t,r);this.entries.has(e)?this.entries.get(e).value=n:this.entries.set(e,{value:n,row:t,col:r})},t.prototype.get=function(t,r,n){void 0===n&&(n=0),this.checkDims(t,r);var e=this.makeKey(t,r);return this.entries.has(e)?this.entries.get(e).value:n},t.prototype.getAll=function(t){void 0===t&&(t=!0);var r=[];return this.entries.forEach((function(t){r.push(t)})),t&&r.sort((function(t,r){return t.row===r.row?t.col-r.col:t.row-r.row})),r},t.prototype.getDims=function(){return[this.nRows,this.nCols]},t.prototype.getRows=function(){return Array.from(this.entries,(function(t){var r=i(t,2);r[0];return r[1].row}))},t.prototype.getCols=function(){return Array.from(this.entries,(function(t){var r=i(t,2);r[0];return r[1].col}))},t.prototype.getValues=function(){return Array.from(this.entries,(function(t){var r=i(t,2);r[0];return r[1].value}))},t.prototype.forEach=function(t){this.entries.forEach((function(r){return t(r.value,r.row,r.col)}))},t.prototype.map=function(r){var n=[];this.entries.forEach((function(t){n.push(r(t.value,t.row,t.col))}));var e=[this.nRows,this.nCols];return new t(this.getRows(),this.getCols(),n,e)},t.prototype.toArray=function(){var t=this,r=s.empty(this.nRows).map((function(){return s.zeros(t.nCols)}));return this.entries.forEach((function(t){r[t.row][t.col]=t.value})),r},t}();r.SparseMatrix=u,r.transpose=function(t){var r=[],n=[],e=[];t.forEach((function(t,i,o){r.push(i),n.push(o),e.push(t)}));var i=[t.nCols,t.nRows];return new u(n,r,e,i)},r.identity=function(t){for(var r=i(t,1)[0],n=new u([],[],[],t),e=0;e<r;e++)n.set(e,e,1);return n},r.pairwiseMultiply=function(t,r){return c(t,r,(function(t,r){return t*r}))},r.add=function(t,r){return c(t,r,(function(t,r){return t+r}))},r.subtract=function(t,r){return c(t,r,(function(t,r){return t-r}))},r.maximum=function(t,r){return c(t,r,(function(t,r){return t>r?t:r}))},r.multiplyScalar=function(t,r){return t.map((function(t){return t*r}))},r.eliminateZeros=function(t){for(var r=new Set,n=t.getValues(),e=t.getRows(),i=t.getCols(),o=0;o<n.length;o++)0===n[o]&&r.add(o);var a=function(t,n){return!r.has(n)},s=n.filter(a),h=e.filter(a),c=i.filter(a);return new u(h,c,s,t.getDims())},r.normalize=function(t,r){var n,e;void 0===r&&(r="l2");var i=h[r],a=new Map;t.forEach((function(t,r,n){var e=a.get(r)||[];e.push(n),a.set(r,e)}));var s=new u([],[],[],t.getDims()),c=function(r){for(var n=a.get(r).sort(),e=n.map((function(n){return t.get(r,n)})),o=i(e),u=0;u<o.length;u++)s.set(r,n[u],o[u])};try{for(var f=o(a.keys()),l=f.next();!l.done;l=f.next()){c(l.value)}}catch(v){n={error:v}}finally{try{l&&!l.done&&(e=f.return)&&e.call(f)}finally{if(n)throw n.error}}return s};var h=((e={}).max=function(t){for(var r=-1/0,n=0;n<t.length;n++)r=t[n]>r?t[n]:r;return t.map((function(t){return t/r}))},e.l1=function(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return t.map((function(t){return t/r}))},e.l2=function(t){for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n],2);return t.map((function(t){return Math.sqrt(Math.pow(t,2)/r)}))},e);function c(t,r,n){for(var e=new Set,i=[],o=[],a=[],s=function(e,s){i.push(e),o.push(s);var u=n(t.get(e,s),r.get(e,s));a.push(u)},h=t.getValues(),c=t.getRows(),f=t.getCols(),l=0;l<h.length;l++){var v=(d=c[l])+":"+(y=f[l]);e.add(v),s(d,y)}var p=r.getValues(),g=r.getRows(),m=r.getCols();for(l=0;l<p.length;l++){var d,y;v=(d=g[l])+":"+(y=m[l]);e.has(v)||s(d,y)}var w=[t.nRows,t.nCols];return new u(i,o,a,w)}r.getCSR=function(t){var r=[];t.forEach((function(t,n,e){r.push({value:t,row:n,col:e})})),r.sort((function(t,r){return t.row===r.row?t.col-r.col:t.row-r.row}));for(var n=[],e=[],i=[],o=-1,a=0;a<r.length;a++){var s=r[a],u=s.row,h=s.col,c=s.value;u!==o&&(o=u,i.push(a)),n.push(h),e.push(c)}return{indices:n,values:e,indptr:i}}},function(t,r,n){"use strict";var e=this&&this.__read||function(t,r){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(s){i={error:s}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},i=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(e(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var s=a(n(13)),u=function(t,r,n,e){this.hyperplanes=t,this.offsets=r,this.children=n,this.indices=e};function h(t,r,n,e,i){if(void 0===n&&(n=30),r.length>n){var o=function(t,r,n){var e=t[0].length,i=s.tauRandInt(r.length,n),o=s.tauRandInt(r.length,n);o=(o+=i===o?1:0)%r.length;for(var a=r[i],u=r[o],h=0,c=s.zeros(e),f=0;f<c.length;f++)c[f]=t[a][f]-t[u][f],h-=c[f]*(t[a][f]+t[u][f])/2;var l=0,v=0,p=s.zeros(r.length);for(f=0;f<r.length;f++){for(var g=h,m=0;m<e;m++)g+=c[m]*t[r[f]][m];0===g?(p[f]=s.tauRandInt(2,n),0===p[f]?l+=1:v+=1):g>0?(p[f]=0,l+=1):(p[f]=1,v+=1)}var d=s.zeros(l),y=s.zeros(v);l=0,v=0;for(f=0;f<p.length;f++)0===p[f]?(d[l]=r[f],l+=1):(y[v]=r[f],v+=1);return{indicesLeft:d,indicesRight:y,hyperplane:c,offset:h}}(t,r,i),a=o.indicesLeft,u=o.indicesRight,c=o.hyperplane,f=o.offset;return{leftChild:h(t,a,n,e+1,i),rightChild:h(t,u,n,e+1,i),isLeaf:!1,hyperplane:c,offset:f}}return{indices:r,isLeaf:!0}}function c(t,r,n,e,o,a,s){var u;if(t.isLeaf)return e[a][0]=-s,(u=o[s]).splice.apply(u,i([0,t.indices.length],t.indices)),{nodeNum:a,leafNum:s+=1};r[a]=t.hyperplane,n[a]=t.offset,e[a][0]=a+1;var h=a,f=c(t.leftChild,r,n,e,o,a+1,s);return a=f.nodeNum,s=f.leafNum,e[h][1]=a+1,{nodeNum:(f=c(t.rightChild,r,n,e,o,a+1,s)).nodeNum,leafNum:f.leafNum}}function f(t){return t.isLeaf?1:1+f(t.leftChild)+f(t.rightChild)}function l(t){return t.isLeaf?1:l(t.leftChild)+l(t.rightChild)}function v(t,r,n,e){for(var i=r,o=0;o<n.length;o++)i+=t[o]*n[o];return 0===i?s.tauRandInt(2,e):i>0?0:1}r.FlatTree=u,r.makeForest=function(t,r,n,e){var i=Math.max(10,r);return s.range(n).map((function(r,n){return function(t,r,n,e){void 0===r&&(r=30);var i=s.range(t.length);return h(t,i,r,n,e)}(t,i,n,e)})).map((function(t){return function(t,r){var n=f(t),e=l(t),i=s.range(n).map((function(){return s.zeros(t.hyperplane?t.hyperplane.length:0)})),o=s.zeros(n),a=s.range(n).map((function(){return[-1,-1]})),h=s.range(e).map((function(){return s.range(r).map((function(){return-1}))}));return c(t,i,o,a,h,0,0),new u(i,o,a,h)}(t,i)}))},r.makeLeafArray=function(t){var r,n;if(t.length>0){var e=[];try{for(var a=o(t),s=a.next();!s.done;s=a.next()){var u=s.value;e.push.apply(e,i(u.indices))}}catch(h){r={error:h}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e}return[[-1]]},r.searchFlatTree=function(t,r,n){for(var e=0;r.children[e][0]>0;){e=0===v(r.hyperplanes[e],r.offsets[e],t,n)?r.children[e][0]:r.children[e][1]}var i=-1*r.children[e][0];return r.indices[i]}},function(t,r,n){"use strict";n.d(r,"a",(function(){return o}));var e=n(15),i=n(16);function o(t,r,n){return(o=Object(i.a)()?Reflect.construct:function(t,r,n){var i=[null];i.push.apply(i,r);var o=new(Function.bind.apply(t,i));return n&&Object(e.a)(o,n.prototype),o}).apply(null,arguments)}},function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=n(109);r.UMAP=e.UMAP},function(t,r,n){var e=n(113),i=n(114),o=n(115),a=n(116),s=n(117),u=n(118),h=n(119);h.alea=e,h.xor128=i,h.xorwow=o,h.xorshift7=a,h.xor4096=s,h.tychei=u,t.exports=h},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,r,n){"use strict";var e=this&&this.__awaiter||function(t,r,n,e){return new(n||(n=Promise))((function(i,o){function a(t){try{u(e.next(t))}catch(r){o(r)}}function s(t){try{u(e.throw(t))}catch(r){o(r)}}function u(t){t.done?i(t.value):new n((function(r){r(t.value)})).then(a,s)}u((e=e.apply(t,r||[])).next())}))},i=this&&this.__generator||function(t,r){var n,e,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,e&&(i=2&o[0]?e.return:o[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,o[1])).done)return i;switch(e=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,e=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=r.call(t,a)}catch(s){o=[6,s],e=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__read||function(t,r){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var e,i,o=n.call(t),a=[];try{for(;(void 0===r||r-- >0)&&!(e=o.next()).done;)a.push(e.value)}catch(s){i={error:s}}finally{try{e&&!e.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(o(arguments[r]));return t},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var h=s(n(30)),c=s(n(31)),f=s(n(110)),l=s(n(32)),v=s(n(13)),p=u(n(122)),g=1e-5,m=.001,d=function(){function t(t){void 0===t&&(t={});var r=this;this.learningRate=1,this.localConnectivity=1,this.minDist=.1,this.nComponents=2,this.nEpochs=0,this.nNeighbors=15,this.negativeSampleRate=5,this.random=Math.random,this.repulsionStrength=1,this.setOpMixRatio=1,this.spread=1,this.transformQueueSize=4,this.targetMetric="categorical",this.targetWeight=.5,this.targetNNeighbors=this.nNeighbors,this.distanceFn=y,this.isInitialized=!1,this.rpForest=[],this.embedding=[],this.optimizationState=new w;var n=function(n){void 0!==t[n]&&(r[n]=t[n])};n("distanceFn"),n("learningRate"),n("localConnectivity"),n("minDist"),n("nComponents"),n("nEpochs"),n("nNeighbors"),n("negativeSampleRate"),n("random"),n("repulsionStrength"),n("setOpMixRatio"),n("spread"),n("transformQueueSize")}return t.prototype.fit=function(t){return this.initializeFit(t),this.optimizeLayout(),this.embedding},t.prototype.fitAsync=function(t,r){return void 0===r&&(r=function(){return!0}),e(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.initializeFit(t),[4,this.optimizeLayoutAsync(r)];case 1:return n.sent(),[2,this.embedding]}}))}))},t.prototype.setSupervisedProjection=function(t,r){void 0===r&&(r={}),this.Y=t,this.targetMetric=r.targetMetric||this.targetMetric,this.targetWeight=r.targetWeight||this.targetWeight,this.targetNNeighbors=r.targetNNeighbors||this.targetNNeighbors},t.prototype.setPrecomputedKNN=function(t,r){this.knnIndices=t,this.knnDistances=r},t.prototype.initializeFit=function(t){if(t.length<=this.nNeighbors)throw new Error("Not enough data points ("+t.length+") to create nNeighbors: "+this.nNeighbors+".  Add more data points or adjust the configuration.");if(this.X===t&&this.isInitialized)return this.getNEpochs();if(this.X=t,!this.knnIndices&&!this.knnDistances){var r=this.nearestNeighbors(t);this.knnIndices=r.knnIndices,this.knnDistances=r.knnDistances}this.graph=this.fuzzySimplicialSet(t,this.nNeighbors,this.setOpMixRatio),this.makeSearchFns(),this.searchGraph=this.makeSearchGraph(t),this.processGraphForSupervisedProjection();var n=this.initializeSimplicialSetEmbedding(),e=n.head,i=n.tail,o=n.epochsPerSample;return this.optimizationState.head=e,this.optimizationState.tail=i,this.optimizationState.epochsPerSample=o,this.initializeOptimization(),this.prepareForOptimizationLoop(),this.isInitialized=!0,this.getNEpochs()},t.prototype.makeSearchFns=function(){var t=f.makeInitializations(this.distanceFn),r=t.initFromTree,n=t.initFromRandom;this.initFromTree=r,this.initFromRandom=n,this.search=f.makeInitializedNNSearch(this.distanceFn)},t.prototype.makeSearchGraph=function(t){for(var r=this.knnIndices,n=this.knnDistances,e=[t.length,t.length],i=new c.SparseMatrix([],[],[],e),o=0;o<r.length;o++)for(var a=r[o],s=n[o],u=0;u<a.length;u++){var h=a[u],f=s[u];f>0&&i.set(o,h,f)}var l=c.transpose(i);return c.maximum(i,l)},t.prototype.transform=function(t){var r=this,n=this.X;if(void 0===n||0===n.length)throw new Error("No data has been fit.");var e=Math.floor(this.nNeighbors*this.transformQueueSize);e=Math.min(n.length,e);var i=f.initializeSearch(this.rpForest,n,t,e,this.initFromRandom,this.initFromTree,this.random),o=this.search(n,this.searchGraph,i,t),a=h.deheapSort(o),s=a.indices,u=a.weights;s=s.map((function(t){return t.slice(0,r.nNeighbors)})),u=u.map((function(t){return t.slice(0,r.nNeighbors)}));var l=Math.max(0,this.localConnectivity-1),p=this.smoothKNNDistance(u,this.nNeighbors,l),g=p.sigmas,m=p.rhos,d=this.computeMembershipStrengths(s,u,g,m),y=d.rows,w=d.cols,b=d.vals,x=[t.length,n.length],M=new c.SparseMatrix(y,w,b,x),_=c.normalize(M,"l1"),k=c.getCSR(_),E=t.length,N=S(v.reshape2d(k.indices,E,this.nNeighbors),v.reshape2d(k.values,E,this.nNeighbors),this.embedding),A=this.nEpochs?this.nEpochs/3:M.nRows<=1e4?100:30,R=M.getValues().reduce((function(t,r){return r>t?r:t}),0);M=M.map((function(t){return t<R/A?0:t})),M=c.eliminateZeros(M);var j=this.makeEpochsPerSample(M.getValues(),A),z=M.getRows(),O=M.getCols();return this.assignOptimizationStateParameters({headEmbedding:N,tailEmbedding:this.embedding,head:z,tail:O,currentEpoch:0,nEpochs:A,nVertices:M.getDims()[1],epochsPerSample:j}),this.prepareForOptimizationLoop(),this.optimizeLayout()},t.prototype.processGraphForSupervisedProjection=function(){var t=this.Y,r=this.X;if(t){if(t.length!==r.length)throw new Error("Length of X and y must be equal");if("categorical"===this.targetMetric){var n=this.targetWeight<1?1/(1-this.targetWeight)*2.5:1e12;this.graph=this.categoricalSimplicialSetIntersection(this.graph,t,n)}}},t.prototype.step=function(){var t=this.optimizationState.currentEpoch;return t<this.getNEpochs()&&this.optimizeLayoutStep(t),this.optimizationState.currentEpoch},t.prototype.getEmbedding=function(){return this.embedding},t.prototype.nearestNeighbors=function(t){var r,n=this.distanceFn,e=this.nNeighbors,i=f.makeNNDescent(n,this.random),o=5+Math.floor(.5===(r=Math.pow(t.length,.5)/20)?0:Math.round(r)),a=Math.max(5,Math.floor(Math.round(function(t){return Math.log(t)/Math.log(2)}(t.length))));this.rpForest=l.makeForest(t,e,o,this.random);var s=i(t,l.makeLeafArray(this.rpForest),e,a);return{knnIndices:s.indices,knnDistances:s.weights}},t.prototype.fuzzySimplicialSet=function(t,r,n){void 0===n&&(n=1);var e=this,i=e.knnIndices,o=void 0===i?[]:i,a=e.knnDistances,s=void 0===a?[]:a,u=e.localConnectivity,h=this.smoothKNNDistance(s,r,u),f=h.sigmas,l=h.rhos,v=this.computeMembershipStrengths(o,s,f,l),p=v.rows,g=v.cols,m=v.vals,d=[t.length,t.length],y=new c.SparseMatrix(p,g,m,d),w=c.transpose(y),b=c.pairwiseMultiply(y,w),x=c.subtract(c.add(y,w),b),M=c.multiplyScalar(x,n),_=c.multiplyScalar(b,1-n);return c.add(M,_)},t.prototype.categoricalSimplicialSetIntersection=function(t,r,n,e){void 0===e&&(e=1);var i=_(t,r,e,n);return k(i=c.eliminateZeros(i))},t.prototype.smoothKNNDistance=function(t,r,n,e,i){void 0===n&&(n=1),void 0===e&&(e=64),void 0===i&&(i=1);for(var o=Math.log(r)/Math.log(2)*i,a=v.zeros(t.length),s=v.zeros(t.length),u=0;u<t.length;u++){var h=0,c=1/0,f=1,l=t[u],p=l.filter((function(t){return t>0}));if(p.length>=n){var d=Math.floor(n),y=n-d;d>0?(a[u]=p[d-1],y>g&&(a[u]+=y*(p[d]-p[d-1]))):a[u]=y*p[0]}else p.length>0&&(a[u]=v.max(p));for(var w=0;w<e;w++){for(var b=0,x=1;x<t[u].length;x++){var M=t[u][x]-a[u];b+=M>0?Math.exp(-M/f):1}if(Math.abs(b-o)<g)break;b>o?f=(h+(c=f))/2:(h=f,c===1/0?f*=2:f=(h+c)/2)}if(s[u]=f,a[u]>0){var _=v.mean(l);s[u]<m*_&&(s[u]=m*_)}else{var k=v.mean(t.map(v.mean));s[u]<m*k&&(s[u]=m*k)}}return{sigmas:s,rhos:a}},t.prototype.computeMembershipStrengths=function(t,r,n,e){for(var i=t.length,o=t[0].length,a=v.zeros(i*o),s=v.zeros(i*o),u=v.zeros(i*o),h=0;h<i;h++)for(var c=0;c<o;c++){var f=0;-1!==t[h][c]&&(f=t[h][c]===h?0:r[h][c]-e[h]<=0?1:Math.exp(-(r[h][c]-e[h])/n[h]),a[h*o+c]=h,s[h*o+c]=t[h][c],u[h*o+c]=f)}return{rows:a,cols:s,vals:u}},t.prototype.initializeSimplicialSetEmbedding=function(){for(var t=this,r=this.getNEpochs(),n=this.nComponents,e=this.graph.getValues(),i=0,o=0;o<e.length;o++){var a=e[o];i<e[o]&&(i=a)}var s=this.graph.map((function(t){return t<i/r?0:t}));this.embedding=v.zeros(s.nRows).map((function(){return v.zeros(n).map((function(){return 20*v.tauRand(t.random)-10}))}));var u=[],h=[],c=[],f=s.getAll();for(o=0;o<f.length;o++){var l=f[o];l.value&&(u.push(l.value),c.push(l.row),h.push(l.col))}return{head:h,tail:c,epochsPerSample:this.makeEpochsPerSample(u,r)}},t.prototype.makeEpochsPerSample=function(t,r){var n=v.filled(t.length,-1),e=v.max(t),i=t.map((function(t){return t/e*r}));return i.forEach((function(t,e){t>0&&(n[e]=r/i[e])})),n},t.prototype.assignOptimizationStateParameters=function(t){Object.assign(this.optimizationState,t)},t.prototype.prepareForOptimizationLoop=function(){var t=this,r=t.repulsionStrength,n=t.learningRate,e=t.negativeSampleRate,i=this.optimizationState,o=i.epochsPerSample,s=i.headEmbedding,u=i.tailEmbedding,h=s[0].length,c=s.length===u.length,f=o.map((function(t){return t/e})),l=a(f),v=a(o);this.assignOptimizationStateParameters({epochOfNextSample:v,epochOfNextNegativeSample:l,epochsPerNegativeSample:f,moveOther:c,initialAlpha:n,alpha:n,gamma:r,dim:h})},t.prototype.initializeOptimization=function(){var t=this.embedding,r=this.embedding,n=this.optimizationState,e=n.head,i=n.tail,o=n.epochsPerSample,a=this.getNEpochs(),s=this.graph.nCols,u=M(this.spread,this.minDist),h=u.a,c=u.b;this.assignOptimizationStateParameters({headEmbedding:t,tailEmbedding:r,head:e,tail:i,epochsPerSample:o,a:h,b:c,nEpochs:a,nVertices:s})},t.prototype.optimizeLayoutStep=function(t){for(var r=this.optimizationState,n=r.head,e=r.tail,i=r.headEmbedding,o=r.tailEmbedding,a=r.epochsPerSample,s=r.epochOfNextSample,u=r.epochOfNextNegativeSample,h=r.epochsPerNegativeSample,c=r.moveOther,f=r.initialAlpha,l=r.alpha,p=r.gamma,g=r.a,m=r.b,d=r.dim,y=r.nEpochs,w=r.nVertices,M=0;M<a.length;M++)if(!(s[M]>t)){var _=n[M],k=e[M],S=i[_],E=o[k],N=x(S,E),A=0;N>0&&(A=-2*g*m*Math.pow(N,m-1),A/=g*Math.pow(N,m)+1);for(var R=0;R<d;R++){var j=b(A*(S[R]-E[R]),4);S[R]+=j*l,c&&(E[R]+=-j*l)}s[M]+=a[M];for(var z=Math.floor((t-u[M])/h[M]),O=0;O<z;O++){var P=v.tauRandInt(w,this.random),C=o[P],I=x(S,C),T=0;if(I>0)T=2*p*m,T/=(.001+I)*(g*Math.pow(I,m)+1);else if(_===P)continue;for(R=0;R<d;R++){j=4;T>0&&(j=b(T*(S[R]-C[R]),4)),S[R]+=j*l}}u[M]+=z*h[M]}return r.alpha=f*(1-t/y),r.currentEpoch+=1,i},t.prototype.optimizeLayoutAsync=function(t){var r=this;return void 0===t&&(t=function(){return!0}),new Promise((function(n,o){var a=function a(){return e(r,void 0,void 0,(function(){var r,e,s,u,h,c;return i(this,(function(i){try{if(r=this.optimizationState,e=r.nEpochs,s=r.currentEpoch,this.embedding=this.optimizeLayoutStep(s),u=this.optimizationState.currentEpoch,h=!1===t(u),c=u===e,h||c)return[2,n(c)];setTimeout((function(){return a()}),0)}catch(f){o(f)}return[2]}))}))};setTimeout((function(){return a()}),0)}))},t.prototype.optimizeLayout=function(t){void 0===t&&(t=function(){return!0});for(var r=!1,n=[];!r;){var e=this.optimizationState,i=e.nEpochs,o=e.currentEpoch;n=this.optimizeLayoutStep(o);var a=this.optimizationState.currentEpoch,s=!1===t(a);r=a===i||s}return n},t.prototype.getNEpochs=function(){var t=this.graph;if(this.nEpochs>0)return this.nEpochs;var r=t.nRows;return r<=2500?500:r<=5e3?400:r<=7500?300:200},t}();function y(t,r){for(var n=0,e=0;e<t.length;e++)n+=Math.pow(t[e]-r[e],2);return Math.sqrt(n)}r.UMAP=d,r.euclidean=y,r.cosine=function(t,r){for(var n=0,e=0,i=0,o=0;o<t.length;o++)n+=t[o]*r[o],e+=Math.pow(t[o],2),i+=Math.pow(r[o],2);return 0===e&&0===i?0:0===e||0===i?1:1-n/Math.sqrt(e*i)};var w=function(){this.currentEpoch=0,this.headEmbedding=[],this.tailEmbedding=[],this.head=[],this.tail=[],this.epochsPerSample=[],this.epochOfNextSample=[],this.epochOfNextNegativeSample=[],this.epochsPerNegativeSample=[],this.moveOther=!0,this.initialAlpha=1,this.alpha=1,this.gamma=1,this.a=1.5769434603113077,this.b=.8950608779109733,this.dim=2,this.nEpochs=500,this.nVertices=0};function b(t,r){return t>r?r:t<-r?-r:t}function x(t,r){for(var n=0,e=0;e<t.length;e++)n+=Math.pow(t[e]-r[e],2);return n}function M(t,r){var n=v.linear(0,3*t,300).map((function(t){return t<r?1:t})),e=v.zeros(n.length).map((function(e,i){return n[i]>=r?Math.exp(-(n[i]-r)/t):e})),i={x:n,y:e},a={damping:1.5,initialValues:[.5,.5],gradientDifference:.1,maxIterations:100,errorTolerance:.01},s=p.default(i,(function(t){var r=o(t,2),n=r[0],e=r[1];return function(t){return 1/(1+n*Math.pow(t,2*e))}}),a).parameterValues,u=o(s,2);return{a:u[0],b:u[1]}}function _(t,r,n,e){return void 0===n&&(n=1),void 0===e&&(e=5),t.map((function(t,i,o){return-1===r[i]||-1===r[o]?t*Math.exp(-n):r[i]!==r[o]?t*Math.exp(-e):t}))}function k(t){t=c.normalize(t,"max");var r=c.transpose(t),n=c.pairwiseMultiply(r,t);return t=c.add(t,c.subtract(r,n)),c.eliminateZeros(t)}function S(t,r,n){for(var e=v.zeros(t.length).map((function(t){return v.zeros(n[0].length)})),i=0;i<t.length;i++)for(var o=0;o<t[0].length;o++)for(var a=0;a<n[0].length;a++){var s=t[i][o];e[i][a]+=r[i][o]*n[s][a]}return e}r.findABParams=M,r.fastIntersection=_,r.resetLocalConnectivity=k,r.initTransform=S},function(t,r,n){"use strict";var e=this&&this.__values||function(t){var r="function"===typeof Symbol&&t[Symbol.iterator],n=0;return r?r.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(r,"__esModule",{value:!0});var o=i(n(30)),a=i(n(31)),s=i(n(32)),u=i(n(13));r.makeNNDescent=function(t,r){return function(n,e,i,a,s,h,c,f){void 0===a&&(a=10),void 0===s&&(s=50),void 0===h&&(h=.001),void 0===c&&(c=.5),void 0===f&&(f=!0);for(var l=n.length,v=o.makeHeap(n.length,i),p=0;p<n.length;p++)for(var g=o.rejectionSample(i,n.length,r),m=0;m<g.length;m++){var d=t(n[p],n[g[m]]);o.heapPush(v,p,d,g[m],1),o.heapPush(v,g[m],d,p,1)}if(f)for(var y=0;y<e.length;y++)for(p=0;p<e[y].length&&!(e[y][p]<0);p++)for(m=p+1;m<e[y].length&&!(e[y][m]<0);m++){d=t(n[e[y][p]],n[e[y][m]]);o.heapPush(v,e[y][p],d,e[y][m],1),o.heapPush(v,e[y][m],d,e[y][p],1)}for(y=0;y<a;y++){var w=o.buildCandidates(v,l,i,s,r),b=0;for(p=0;p<l;p++)for(m=0;m<s;m++){var x=Math.floor(w[0][p][m]);if(!(x<0||u.tauRand(r)<c))for(var M=0;M<s;M++){var _=Math.floor(w[0][p][M]),k=w[2][p][m],S=w[2][p][M];if(!(_<0||!k&&!S)){d=t(n[x],n[_]);b+=o.heapPush(v,x,d,_,1),b+=o.heapPush(v,_,d,x,1)}}}if(b<=h*i*n.length)break}return o.deheapSort(v)}},r.makeInitializations=function(t){return{initFromRandom:function(r,n,e,i,a){for(var s=0;s<e.length;s++)for(var h=u.rejectionSample(r,n.length,a),c=0;c<h.length;c++)if(!(h[c]<0)){var f=t(n[h[c]],e[s]);o.heapPush(i,s,f,h[c],1)}},initFromTree:function(r,n,e,i,a){for(var u=0;u<e.length;u++)for(var h=s.searchFlatTree(e[u],r,a),c=0;c<h.length;c++){if(h[c]<0)return;var f=t(n[h[c]],e[u]);o.heapPush(i,u,f,h[c],1)}}}},r.makeInitializedNNSearch=function(t){return function(r,n,i,s){for(var u,h,c=a.getCSR(n),f=c.indices,l=c.indptr,v=0;v<s.length;v++)for(var p=new Set(i[0][v]);;){var g=o.smallestFlagged(i,v);if(-1===g)break;var m=f.slice(l[g],l[g+1]);try{for(var d=e(m),y=d.next();!y.done;y=d.next()){var w=y.value;if(w!==g&&-1!==w&&!p.has(w)){var b=t(r[w],s[v]);o.uncheckedHeapPush(i,v,b,w,1),p.add(w)}}}catch(x){u={error:x}}finally{try{y&&!y.done&&(h=d.return)&&h.call(d)}finally{if(u)throw u.error}}}return i}},r.initializeSearch=function(t,r,n,i,a,s,u){var h,c,f=o.makeHeap(n.length,i);if(a(i,r,n,f,u),t)try{for(var l=e(t),v=l.next();!v.done;v=l.next()){s(v.value,r,n,f,u)}}catch(p){h={error:p}}finally{try{v&&!v.done&&(c=l.return)&&c.call(l)}finally{if(h)throw h.error}}return f}},function(t,r){t.exports=function(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}},function(t,r,n){var e=function(t){"use strict";var r,n=Object.prototype,e=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,r,n){return Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{u({},"")}catch(z){u=function(t,r,n){return t[r]=n}}function h(t,r,n,e){var i=r&&r.prototype instanceof m?r:m,o=Object.create(i.prototype),a=new A(e||[]);return o._invoke=function(t,r,n){var e=f;return function(i,o){if(e===v)throw new Error("Generator is already running");if(e===p){if("throw"===i)throw o;return j()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(e===f)throw e=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);e=v;var u=c(t,r,n);if("normal"===u.type){if(e=n.done?p:l,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(e=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,r,n){try{return{type:"normal",arg:t.call(r,n)}}catch(z){return{type:"throw",arg:z}}}t.wrap=h;var f="suspendedStart",l="suspendedYield",v="executing",p="completed",g={};function m(){}function d(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(R([])));x&&x!==n&&e.call(x,o)&&(w=x);var M=y.prototype=m.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(r){u(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var h=u.arg,f=h.value;return f&&"object"===typeof f&&e.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):r.resolve(f).then((function(t){h.value=t,a(h)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,e){function o(){return new r((function(r,i){n(t,e,r,i)}))}return i=i?i.then(o,o):o()}}function S(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,S(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(e,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function N(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function R(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(e.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=r,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:r,done:!0}}return d.prototype=M.constructor=y,y.constructor=d,d.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(M),t},t.awrap=function(t){return{__await:t}},_(k.prototype),k.prototype[a]=function(){return this},t.AsyncIterator=k,t.async=function(r,n,e,i,o){void 0===o&&(o=Promise);var a=new k(h(r,n,e,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(M),u(M,s,"Generator"),M[o]=function(){return this},M.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var n in t)r.push(n);return r.reverse(),function n(){for(;r.length;){var e=r.pop();if(e in t)return n.value=e,n.done=!1,n}return n.done=!0,n}},t.values=R,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&e.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(e,i){return s.type="throw",s.arg=t,n.next=e,i&&(n.method="next",n.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=e.call(a,"catchLoc"),h=e.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&e.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=r,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var e=n.completion;if("throw"===e.type){var i=e.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:R(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),g}},t}(t.exports);try{regeneratorRuntime=e}catch(i){Function("r","regeneratorRuntime = r")(e)}},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this,n=function(){var t=4022871197;return function(r){r=String(r);for(var n=0;n<r.length;n++){var e=.02519603282416938*(t+=r.charCodeAt(n));e-=t=e>>>0,t=(e*=t)>>>0,t+=4294967296*(e-=t)}return 2.3283064365386963e-10*(t>>>0)}}();r.next=function(){var t=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=t-(r.c=0|t)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(t),r.s0<0&&(r.s0+=1),r.s1-=n(t),r.s1<0&&(r.s1+=1),r.s2-=n(t),r.s2<0&&(r.s2+=1),n=null}function s(t,r){return r.c=t.c,r.s0=t.s0,r.s1=t.s1,r.s2=t.s2,r}function u(t,r){var n=new a(t),e=r&&r.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,e&&("object"==typeof e&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.alea=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this,n="";r.x=0,r.y=0,r.z=0,r.w=0,r.next=function(){var t=r.x^r.x<<11;return r.x=r.y,r.y=r.z,r.z=r.w,r.w^=r.w>>>19^t^t>>>8},t===(0|t)?r.x=t:n+=t;for(var e=0;e<n.length+64;e++)r.x^=0|n.charCodeAt(e),r.next()}function s(t,r){return r.x=t.x,r.y=t.y,r.z=t.z,r.w=t.w,r}function u(t,r){var n=new a(t),e=r&&r.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,e&&("object"==typeof e&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.xor128=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this,n="";r.next=function(){var t=r.x^r.x>>>2;return r.x=r.y,r.y=r.z,r.z=r.w,r.w=r.v,(r.d=r.d+362437|0)+(r.v=r.v^r.v<<4^t^t<<1)|0},r.x=0,r.y=0,r.z=0,r.w=0,r.v=0,t===(0|t)?r.x=t:n+=t;for(var e=0;e<n.length+64;e++)r.x^=0|n.charCodeAt(e),e==n.length&&(r.d=r.x<<10^r.x>>>4),r.next()}function s(t,r){return r.x=t.x,r.y=t.y,r.z=t.z,r.w=t.w,r.v=t.v,r.d=t.d,r}function u(t,r){var n=new a(t),e=r&&r.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,e&&("object"==typeof e&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.xorwow=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this;r.next=function(){var t,n,e=r.x,i=r.i;return t=e[i],n=(t^=t>>>7)^t<<24,n^=(t=e[i+1&7])^t>>>10,n^=(t=e[i+3&7])^t>>>3,n^=(t=e[i+4&7])^t<<7,t=e[i+7&7],n^=(t^=t<<13)^t<<9,e[i]=n,r.i=i+1&7,n},function(t,r){var n,e=[];if(r===(0|r))e[0]=r;else for(r=""+r,n=0;n<r.length;++n)e[7&n]=e[7&n]<<15^r.charCodeAt(n)+e[n+1&7]<<13;for(;e.length<8;)e.push(0);for(n=0;n<8&&0===e[n];++n);for(8==n?e[7]=-1:e[n],t.x=e,t.i=0,n=256;n>0;--n)t.next()}(r,t)}function s(t,r){return r.x=t.x.slice(),r.i=t.i,r}function u(t,r){null==t&&(t=+new Date);var n=new a(t),e=r&&r.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,e&&(e.x&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.xorshift7=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this;r.next=function(){var t,n,e=r.w,i=r.X,o=r.i;return r.w=e=e+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,r.i=o,n+(e^e>>>16)|0},function(t,r){var n,e,i,o,a,s=[],u=128;for(r===(0|r)?(e=r,r=null):(r+="\0",e=0,u=Math.max(u,r.length)),i=0,o=-32;o<u;++o)r&&(e^=r.charCodeAt((o+32)%r.length)),0===o&&(a=e),e^=e<<10,e^=e>>>15,e^=e<<4,e^=e>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=e+a)?i+1:0);for(i>=128&&(s[127&(r&&r.length||0)]=-1),i=127,o=512;o>0;--o)e=s[i+34&127],n=s[i=i+1&127],e^=e<<13,n^=n<<17,e^=e>>>15,n^=n>>>12,s[i]=e^n;t.w=a,t.X=s,t.i=i}(r,t)}function s(t,r){return r.i=t.i,r.w=t.w,r.X=t.X.slice(),r}function u(t,r){null==t&&(t=+new Date);var n=new a(t),e=r&&r.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,e&&(e.X&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.xor4096=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){(function(t){var e;!function(t,i,o){function a(t){var r=this,n="";r.next=function(){var t=r.b,n=r.c,e=r.d,i=r.a;return t=t<<25^t>>>7^n,n=n-e|0,e=e<<24^e>>>8^i,i=i-t|0,r.b=t=t<<20^t>>>12^n,r.c=n=n-e|0,r.d=e<<16^n>>>16^i,r.a=i-t|0},r.a=0,r.b=0,r.c=-1640531527,r.d=1367130551,t===Math.floor(t)?(r.a=t/4294967296|0,r.b=0|t):n+=t;for(var e=0;e<n.length+20;e++)r.b^=0|n.charCodeAt(e),r.next()}function s(t,r){return r.a=t.a,r.b=t.b,r.c=t.c,r.d=t.d,r}function u(t,r){var n=new a(t),e=r&&r.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,e&&("object"==typeof e&&s(e,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n(1)&&n(7)?void 0===(e=function(){return u}.call(r,n,r,i))||(i.exports=e):this.tychei=u}(0,t,n(1))}).call(this,n(6)(t))},function(t,r,n){var e;!function(i,o,a){var s,u=256,h=a.pow(u,6),c=a.pow(2,52),f=2*c,l=255;function v(t,r,n){var e=[],l=d(m((r=1==r?{entropy:!0}:r||{}).entropy?[t,y(o)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(i.crypto||i.msCrypto).getRandomValues(t)),y(t)}catch(e){var r=i.navigator,n=r&&r.plugins;return[+new Date,i,n,i.screen,y(o)]}}():t,3),e),v=new p(e),w=function(){for(var t=v.g(6),r=h,n=0;t<c;)t=(t+n)*u,r*=u,n=v.g(1);for(;t>=f;)t/=2,r/=2,n>>>=1;return(t+n)/r};return w.int32=function(){return 0|v.g(4)},w.quick=function(){return v.g(4)/4294967296},w.double=w,d(y(v.S),o),(r.pass||n||function(t,r,n,e){return e&&(e.S&&g(e,v),t.state=function(){return g(v,{})}),n?(a.random=t,r):t})(w,l,"global"in r?r.global:this==a,r.state)}function p(t){var r,n=t.length,e=this,i=0,o=e.i=e.j=0,a=e.S=[];for(n||(t=[n++]);i<u;)a[i]=i++;for(i=0;i<u;i++)a[i]=a[o=l&o+t[i%n]+(r=a[i])],a[o]=r;(e.g=function(t){for(var r,n=0,i=e.i,o=e.j,a=e.S;t--;)r=a[i=l&i+1],n=n*u+a[l&(a[i]=a[o=l&o+r])+(a[o]=r)];return e.i=i,e.j=o,n})(u)}function g(t,r){return r.i=t.i,r.j=t.j,r.S=t.S.slice(),r}function m(t,r){var n,e=[],i=typeof t;if(r&&"object"==i)for(n in t)try{e.push(m(t[n],r-1))}catch(o){}return e.length?e:"string"==i?t:t+"\0"}function d(t,r){for(var n,e=t+"",i=0;i<e.length;)r[l&i]=l&(n^=19*r[l&i])+e.charCodeAt(i++);return y(r)}function y(t){return String.fromCharCode.apply(0,t)}if(d(a.random(),o),t.exports){t.exports=v;try{s=n(120)}catch(w){}}else void 0===(e=function(){return v}.call(r,n,r,t))||(t.exports=e)}("undefined"!==typeof self?self:this,[],Math)},function(t,r){},function(t,r,n){"use strict";function e(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function i(t,r){if(t){if("string"===typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function o(t,r){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=i(t))||r&&t&&"number"===typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function a(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],e=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done)&&(n.push(a.value),!r||n.length!==r);e=!0);}catch(u){i=!0,o=u}finally{try{e||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,r)||i(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}n.r(r);var u=n(33);function h(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=Symbol("Comlink.proxy"),f=Symbol("Comlink.endpoint"),l=Symbol("Comlink.releaseProxy"),v=Symbol("Comlink.thrown"),p=function(t){return"object"===typeof t&&null!==t||"function"===typeof t},g=new Map([["proxy",{canHandle:function(t){return p(t)&&t[c]},serialize:function(t){var r=new MessageChannel,n=r.port1,e=r.port2;return m(t,n),[e,[e]]},deserialize:function(t){return t.start(),w(t,[],r);var r}}],["throw",{canHandle:function(t){return p(t)&&v in t},serialize:function(t){var r=t.value;return[r instanceof Error?{isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:{isError:!1,value:r},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function m(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;r.addEventListener("message",(function n(e){if(e&&e.data){var i,o=Object.assign({path:[]},e.data),c=o.id,f=o.type,l=o.path,p=(e.data.argumentList||[]).map(S);try{var g=l.slice(0,-1).reduce((function(t,r){return t[r]}),t),y=l.reduce((function(t,r){return t[r]}),t);switch(f){case 0:i=y;break;case 1:g[l.slice(-1)[0]]=S(e.data.value),i=!0;break;case 2:i=y.apply(g,p);break;case 3:var w;i=_(Object(u.a)(y,h(p)));break;case 4:var b=new MessageChannel,x=b.port1,E=b.port2;m(t,E),i=M(x,[x]);break;case 5:i=void 0}}catch(w){i=s({value:w},v,0)}Promise.resolve(i).catch((function(t){return s({value:t},v,0)})).then((function(t){var e=a(k(t),2),i=e[0],o=e[1];r.postMessage(Object.assign(Object.assign({},i),{id:c}),o),5===f&&(r.removeEventListener("message",n),d(r))}))}})),r.start&&r.start()}function d(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function y(t){if(t)throw new Error("Proxy has been released and is not useable")}function w(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=!1,i=new Proxy(n,{get:function(n,o){if(y(e),o===l)return function(){return E(t,{type:5,path:r.map((function(t){return t.toString()}))}).then((function(){d(t),e=!0}))};if("then"===o){if(0===r.length)return{then:function(){return i}};var a=E(t,{type:0,path:r.map((function(t){return t.toString()}))}).then(S);return a.then.bind(a)}return w(t,[].concat(h(r),[o]))},set:function(n,i,o){y(e);var s=a(k(o),2),u=s[0],c=s[1];return E(t,{type:1,path:[].concat(h(r),[i]).map((function(t){return t.toString()})),value:u},c).then(S)},apply:function(n,i,o){y(e);var s=r[r.length-1];if(s===f)return E(t,{type:4}).then(S);if("bind"===s)return w(t,r.slice(0,-1));var u=a(b(o),2),h=u[0],c=u[1];return E(t,{type:2,path:r.map((function(t){return t.toString()})),argumentList:h},c).then(S)},construct:function(n,i){y(e);var o=a(b(i),2),s=o[0],u=o[1];return E(t,{type:3,path:r.map((function(t){return t.toString()})),argumentList:s},u).then(S)}});return i}function b(t){var r,n=t.map(k);return[n.map((function(t){return t[0]})),(r=n.map((function(t){return t[1]})),Array.prototype.concat.apply([],r))]}var x=new WeakMap;function M(t,r){return x.set(t,r),t}function _(t){return Object.assign(t,s({},c,!0))}function k(t){var r,n=o(g);try{for(n.s();!(r=n.n()).done;){var e=a(r.value,2),i=e[0],s=e[1];if(s.canHandle(t)){var u=a(s.serialize(t),2);return[{type:3,name:i,value:u[0]},u[1]]}}}catch(h){n.e(h)}finally{n.f()}return[{type:0,value:t},x.get(t)||[]]}function S(t){switch(t.type){case 3:return g.get(t.name).deserialize(t.value);case 0:return t.value}}function E(t,r,n){return new Promise((function(e){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.addEventListener("message",(function r(n){n.data&&n.data.id&&n.data.id===i&&(t.removeEventListener("message",r),e(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:i},r),n)}))}var N=n(34),A=n(8),R=n.n(A),j={value:function(){}};function z(){for(var t,r=0,n=arguments.length,e={};r<n;++r){if(!(t=arguments[r]+"")||t in e||/[\s.]/.test(t))throw new Error("illegal type: "+t);e[t]=[]}return new O(e)}function O(t){this._=t}function P(t,r){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function C(t,r){for(var n,e=0,i=t.length;e<i;++e)if((n=t[e]).name===r)return n.value}function I(t,r,n){for(var e=0,i=t.length;e<i;++e)if(t[e].name===r){t[e]=j,t=t.slice(0,e).concat(t.slice(e+1));break}return null!=n&&t.push({name:r,value:n}),t}O.prototype=z.prototype={constructor:O,on:function(t,r){var n,e=this._,i=P(t+"",e),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=r&&"function"!==typeof r)throw new Error("invalid callback: "+r);for(;++o<a;)if(n=(t=i[o]).type)e[n]=I(e[n],t.name,r);else if(null==r)for(n in e)e[n]=I(e[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=C(e[n],t.name)))return n},copy:function(){var t={},r=this._;for(var n in r)t[n]=r[n].slice();return new O(t)},call:function(t,r){if((n=arguments.length-2)>0)for(var n,e,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(e=this._[t]).length;o<n;++o)e[o].value.apply(r,i)},apply:function(t,r,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var e=this._[t],i=0,o=e.length;i<o;++i)e[i].value.apply(r,n)}};var T=z;function L(){}var q=function(t){return null==t?L:function(){return this.querySelector(t)}},F=function(t){return"object"===typeof t&&"length"in t?t:Array.from(t)};function D(){return[]}var V=function(t){return null==t?D:function(){return this.querySelectorAll(t)}};var X=function(t){return function(){return this.matches(t)}};function U(t){return function(r){return r.matches(t)}}var G=Array.prototype.find;function H(){return this.firstElementChild}var Y=Array.prototype.filter;function B(){return this.children}var $=function(t){return new Array(t.length)};function Q(t,r){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=r}Q.prototype={constructor:Q,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,r){return this._parent.insertBefore(t,r)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var K=function(t){return function(){return t}};function W(t,r,n,e,i,o){for(var a,s=0,u=r.length,h=o.length;s<h;++s)(a=r[s])?(a.__data__=o[s],e[s]=a):n[s]=new Q(t,o[s]);for(;s<u;++s)(a=r[s])&&(i[s]=a)}function Z(t,r,n,e,i,o,a){var s,u,h,c=new Map,f=r.length,l=o.length,v=new Array(f);for(s=0;s<f;++s)(u=r[s])&&(v[s]=h=a.call(u,u.__data__,s,r)+"",c.has(h)?i[s]=u:c.set(h,u));for(s=0;s<l;++s)h=a.call(t,o[s],s,o)+"",(u=c.get(h))?(e[s]=u,u.__data__=o[s],c.delete(h)):n[s]=new Q(t,o[s]);for(s=0;s<f;++s)(u=r[s])&&c.get(v[s])===u&&(i[s]=u)}function J(t){return t.__data__}function tt(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}var rt="http://www.w3.org/1999/xhtml",nt={svg:"http://www.w3.org/2000/svg",xhtml:rt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},et=function(t){var r=t+="",n=r.indexOf(":");return n>=0&&"xmlns"!==(r=t.slice(0,n))&&(t=t.slice(n+1)),nt.hasOwnProperty(r)?{space:nt[r],local:t}:t};function it(t){return function(){this.removeAttribute(t)}}function ot(t){return function(){this.removeAttributeNS(t.space,t.local)}}function at(t,r){return function(){this.setAttribute(t,r)}}function st(t,r){return function(){this.setAttributeNS(t.space,t.local,r)}}function ut(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ht(t,r){return function(){var n=r.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var ct=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function ft(t){return function(){this.style.removeProperty(t)}}function lt(t,r,n){return function(){this.style.setProperty(t,r,n)}}function vt(t,r,n){return function(){var e=r.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,n)}}function pt(t,r){return t.style.getPropertyValue(r)||ct(t).getComputedStyle(t,null).getPropertyValue(r)}function gt(t){return function(){delete this[t]}}function mt(t,r){return function(){this[t]=r}}function dt(t,r){return function(){var n=r.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function yt(t){return t.trim().split(/^|\s+/)}function wt(t){return t.classList||new bt(t)}function bt(t){this._node=t,this._names=yt(t.getAttribute("class")||"")}function xt(t,r){for(var n=wt(t),e=-1,i=r.length;++e<i;)n.add(r[e])}function Mt(t,r){for(var n=wt(t),e=-1,i=r.length;++e<i;)n.remove(r[e])}function _t(t){return function(){xt(this,t)}}function kt(t){return function(){Mt(this,t)}}function St(t,r){return function(){(r.apply(this,arguments)?xt:Mt)(this,t)}}bt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var r=this._names.indexOf(t);r>=0&&(this._names.splice(r,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Et(){this.textContent=""}function Nt(t){return function(){this.textContent=t}}function At(t){return function(){var r=t.apply(this,arguments);this.textContent=null==r?"":r}}function Rt(){this.innerHTML=""}function jt(t){return function(){this.innerHTML=t}}function zt(t){return function(){var r=t.apply(this,arguments);this.innerHTML=null==r?"":r}}function Ot(){this.nextSibling&&this.parentNode.appendChild(this)}function Pt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ct(t){return function(){var r=this.ownerDocument,n=this.namespaceURI;return n===rt&&r.documentElement.namespaceURI===rt?r.createElement(t):r.createElementNS(n,t)}}function It(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Tt=function(t){var r=et(t);return(r.local?It:Ct)(r)};function Lt(){return null}function qt(){var t=this.parentNode;t&&t.removeChild(this)}function Ft(){var t=this.cloneNode(!1),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Dt(){var t=this.cloneNode(!0),r=this.parentNode;return r?r.insertBefore(t,this.nextSibling):t}function Vt(t){return t.trim().split(/^|\s+/).map((function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}}))}function Xt(t){return function(){var r=this.__on;if(r){for(var n,e=0,i=-1,o=r.length;e<o;++e)n=r[e],t.type&&n.type!==t.type||n.name!==t.name?r[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?r.length=i:delete this.__on}}}function Ut(t,r,n){return function(){var e,i=this.__on,o=function(t){return function(r){t.call(this,r,this.__data__)}}(r);if(i)for(var a=0,s=i.length;a<s;++a)if((e=i[a]).type===t.type&&e.name===t.name)return this.removeEventListener(e.type,e.listener,e.options),this.addEventListener(e.type,e.listener=o,e.options=n),void(e.value=r);this.addEventListener(t.type,o,n),e={type:t.type,name:t.name,value:r,listener:o,options:n},i?i.push(e):this.__on=[e]}}function Gt(t,r,n){var e=ct(t),i=e.CustomEvent;"function"===typeof i?i=new i(r,n):(i=e.document.createEvent("Event"),n?(i.initEvent(r,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(r,!1,!1)),t.dispatchEvent(i)}function Ht(t,r){return function(){return Gt(this,t,r)}}function Yt(t,r){return function(){return Gt(this,t,r.apply(this,arguments))}}var Bt=n(9),$t=n.n(Bt),Qt=$t.a.mark(Kt);function Kt(){var t,r,n,e,i,o,a;return $t.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t=this._groups,r=0,n=t.length;case 1:if(!(r<n)){s.next=13;break}e=t[r],i=0,o=e.length;case 3:if(!(i<o)){s.next=10;break}if(!(a=e[i])){s.next=7;break}return s.next=7,a;case 7:++i,s.next=3;break;case 10:++r,s.next=1;break;case 13:case"end":return s.stop()}}),Qt,this)}var Wt=[null];function Zt(t,r){this._groups=t,this._parents=r}function Jt(){return new Zt([[document.documentElement]],Wt)}Zt.prototype=Jt.prototype=s({constructor:Zt,select:function(t){"function"!==typeof t&&(t=q(t));for(var r=this._groups,n=r.length,e=new Array(n),i=0;i<n;++i)for(var o,a,s=r[i],u=s.length,h=e[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=t.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),h[c]=a);return new Zt(e,this._parents)},selectAll:function(t){t="function"===typeof t?function(t){return function(){var r=t.apply(this,arguments);return null==r?[]:F(r)}}(t):V(t);for(var r=this._groups,n=r.length,e=[],i=[],o=0;o<n;++o)for(var a,s=r[o],u=s.length,h=0;h<u;++h)(a=s[h])&&(e.push(t.call(a,a.__data__,h,s)),i.push(a));return new Zt(e,i)},selectChild:function(t){return this.select(null==t?H:function(t){return function(){return G.call(this.children,t)}}("function"===typeof t?t:U(t)))},selectChildren:function(t){return this.selectAll(null==t?B:function(t){return function(){return Y.call(this.children,t)}}("function"===typeof t?t:U(t)))},filter:function(t){"function"!==typeof t&&(t=X(t));for(var r=this._groups,n=r.length,e=new Array(n),i=0;i<n;++i)for(var o,a=r[i],s=a.length,u=e[i]=[],h=0;h<s;++h)(o=a[h])&&t.call(o,o.__data__,h,a)&&u.push(o);return new Zt(e,this._parents)},data:function(t,r){if(!arguments.length)return Array.from(this,J);var n=r?Z:W,e=this._parents,i=this._groups;"function"!==typeof t&&(t=K(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),h=0;h<o;++h){var c=e[h],f=i[h],l=f.length,v=F(t.call(c,c&&c.__data__,h,e)),p=v.length,g=s[h]=new Array(p),m=a[h]=new Array(p),d=u[h]=new Array(l);n(c,f,g,m,d,v,r);for(var y,w,b=0,x=0;b<p;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(w=m[x])&&++x<p;);y._next=w||null}}return(a=new Zt(a,e))._enter=s,a._exit=u,a},enter:function(){return new Zt(this._enter||this._groups.map($),this._parents)},exit:function(){return new Zt(this._exit||this._groups.map($),this._parents)},join:function(t,r,n){var e=this.enter(),i=this,o=this.exit();return e="function"===typeof t?t(e):e.append(t+""),null!=r&&(i=r(i)),null==n?o.remove():n(o),e&&i?e.merge(i).order():i},merge:function(t){if(!(t instanceof Zt))throw new Error("invalid merge");for(var r=this._groups,n=t._groups,e=r.length,i=n.length,o=Math.min(e,i),a=new Array(e),s=0;s<o;++s)for(var u,h=r[s],c=n[s],f=h.length,l=a[s]=new Array(f),v=0;v<f;++v)(u=h[v]||c[v])&&(l[v]=u);for(;s<e;++s)a[s]=r[s];return new Zt(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,r=-1,n=t.length;++r<n;)for(var e,i=t[r],o=i.length-1,a=i[o];--o>=0;)(e=i[o])&&(a&&4^e.compareDocumentPosition(a)&&a.parentNode.insertBefore(e,a),a=e);return this},sort:function(t){function r(r,n){return r&&n?t(r.__data__,n.__data__):!r-!n}t||(t=tt);for(var n=this._groups,e=n.length,i=new Array(e),o=0;o<e;++o){for(var a,s=n[o],u=s.length,h=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(h[c]=a);h.sort(r)}return new Zt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var e=t[r],i=0,o=e.length;i<o;++i){var a=e[i];if(a)return a}return null},size:function(){var t,r=0,n=o(this);try{for(n.s();!(t=n.n()).done;){t.value;++r}}catch(e){n.e(e)}finally{n.f()}return r},empty:function(){return!this.node()},each:function(t){for(var r=this._groups,n=0,e=r.length;n<e;++n)for(var i,o=r[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,r){var n=et(t);if(arguments.length<2){var e=this.node();return n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}return this.each((null==r?n.local?ot:it:"function"===typeof r?n.local?ht:ut:n.local?st:at)(n,r))},style:function(t,r,n){return arguments.length>1?this.each((null==r?ft:"function"===typeof r?vt:lt)(t,r,null==n?"":n)):pt(this.node(),t)},property:function(t,r){return arguments.length>1?this.each((null==r?gt:"function"===typeof r?dt:mt)(t,r)):this.node()[t]},classed:function(t,r){var n=yt(t+"");if(arguments.length<2){for(var e=wt(this.node()),i=-1,o=n.length;++i<o;)if(!e.contains(n[i]))return!1;return!0}return this.each(("function"===typeof r?St:r?_t:kt)(n,r))},text:function(t){return arguments.length?this.each(null==t?Et:("function"===typeof t?At:Nt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Rt:("function"===typeof t?zt:jt)(t)):this.node().innerHTML},raise:function(){return this.each(Ot)},lower:function(){return this.each(Pt)},append:function(t){var r="function"===typeof t?t:Tt(t);return this.select((function(){return this.appendChild(r.apply(this,arguments))}))},insert:function(t,r){var n="function"===typeof t?t:Tt(t),e=null==r?Lt:"function"===typeof r?r:q(r);return this.select((function(){return this.insertBefore(n.apply(this,arguments),e.apply(this,arguments)||null)}))},remove:function(){return this.each(qt)},clone:function(t){return this.select(t?Dt:Ft)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,r,n){var e,i,o=Vt(t+""),a=o.length;if(!(arguments.length<2)){for(s=r?Ut:Xt,e=0;e<a;++e)this.each(s(o[e],r,n));return this}var s=this.node().__on;if(s)for(var u,h=0,c=s.length;h<c;++h)for(e=0,u=s[h];e<a;++e)if((i=o[e]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,r){return this.each(("function"===typeof r?Yt:Ht)(t,r))}},Symbol.iterator,Kt);var tr=Jt;var rr=function(t,r,n){t.prototype=r.prototype=n,n.constructor=t};function nr(t,r){var n=Object.create(t.prototype);for(var e in r)n[e]=r[e];return n}function er(){}var ir=.7,or=1/ir,ar="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ur="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hr=/^#([0-9a-f]{3,8})$/,cr=new RegExp("^rgb\\("+[ar,ar,ar]+"\\)$"),fr=new RegExp("^rgb\\("+[ur,ur,ur]+"\\)$"),lr=new RegExp("^rgba\\("+[ar,ar,ar,sr]+"\\)$"),vr=new RegExp("^rgba\\("+[ur,ur,ur,sr]+"\\)$"),pr=new RegExp("^hsl\\("+[sr,ur,ur]+"\\)$"),gr=new RegExp("^hsla\\("+[sr,ur,ur,sr]+"\\)$"),mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function dr(){return this.rgb().formatHex()}function yr(){return this.rgb().formatRgb()}function wr(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=hr.exec(t))?(n=r[1].length,r=parseInt(r[1],16),6===n?br(r):3===n?new kr(r>>8&15|r>>4&240,r>>4&15|240&r,(15&r)<<4|15&r,1):8===n?xr(r>>24&255,r>>16&255,r>>8&255,(255&r)/255):4===n?xr(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|240&r,((15&r)<<4|15&r)/255):null):(r=cr.exec(t))?new kr(r[1],r[2],r[3],1):(r=fr.exec(t))?new kr(255*r[1]/100,255*r[2]/100,255*r[3]/100,1):(r=lr.exec(t))?xr(r[1],r[2],r[3],r[4]):(r=vr.exec(t))?xr(255*r[1]/100,255*r[2]/100,255*r[3]/100,r[4]):(r=pr.exec(t))?Ar(r[1],r[2]/100,r[3]/100,1):(r=gr.exec(t))?Ar(r[1],r[2]/100,r[3]/100,r[4]):mr.hasOwnProperty(t)?br(mr[t]):"transparent"===t?new kr(NaN,NaN,NaN,0):null}function br(t){return new kr(t>>16&255,t>>8&255,255&t,1)}function xr(t,r,n,e){return e<=0&&(t=r=n=NaN),new kr(t,r,n,e)}function Mr(t){return t instanceof er||(t=wr(t)),t?new kr((t=t.rgb()).r,t.g,t.b,t.opacity):new kr}function _r(t,r,n,e){return 1===arguments.length?Mr(t):new kr(t,r,n,null==e?1:e)}function kr(t,r,n,e){this.r=+t,this.g=+r,this.b=+n,this.opacity=+e}function Sr(){return"#"+Nr(this.r)+Nr(this.g)+Nr(this.b)}function Er(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Nr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ar(t,r,n,e){return e<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new jr(t,r,n,e)}function Rr(t){if(t instanceof jr)return new jr(t.h,t.s,t.l,t.opacity);if(t instanceof er||(t=wr(t)),!t)return new jr;if(t instanceof jr)return t;var r=(t=t.rgb()).r/255,n=t.g/255,e=t.b/255,i=Math.min(r,n,e),o=Math.max(r,n,e),a=NaN,s=o-i,u=(o+i)/2;return s?(a=r===o?(n-e)/s+6*(n<e):n===o?(e-r)/s+2:(r-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new jr(a,s,u,t.opacity)}function jr(t,r,n,e){this.h=+t,this.s=+r,this.l=+n,this.opacity=+e}function zr(t,r,n){return 255*(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)}function Or(t,r,n,e,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*r+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*e+a*i)/6}rr(er,wr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:dr,formatHex:dr,formatHsl:function(){return Rr(this).formatHsl()},formatRgb:yr,toString:yr}),rr(kr,_r,nr(er,{brighter:function(t){return t=null==t?or:Math.pow(or,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ir:Math.pow(ir,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sr,formatHex:Sr,formatRgb:Er,toString:Er})),rr(jr,(function(t,r,n,e){return 1===arguments.length?Rr(t):new jr(t,r,n,null==e?1:e)}),nr(er,{brighter:function(t){return t=null==t?or:Math.pow(or,t),new jr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ir:Math.pow(ir,t),new jr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,e=n+(n<.5?n:1-n)*r,i=2*n-e;return new kr(zr(t>=240?t-240:t+120,i,e),zr(t,i,e),zr(t<120?t+240:t-120,i,e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Pr=function(t){return function(){return t}};function Cr(t,r){return function(n){return t+n*r}}function Ir(t){return 1===(t=+t)?Tr:function(r,n){return n-r?function(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(e){return Math.pow(t+e*r,n)}}(r,n,t):Pr(isNaN(r)?n:r)}}function Tr(t,r){var n=r-t;return n?Cr(t,n):Pr(isNaN(t)?r:t)}var Lr=function t(r){var n=Ir(r);function e(t,r){var e=n((t=_r(t)).r,(r=_r(r)).r),i=n(t.g,r.g),o=n(t.b,r.b),a=Tr(t.opacity,r.opacity);return function(r){return t.r=e(r),t.g=i(r),t.b=o(r),t.opacity=a(r),t+""}}return e.gamma=t,e}(1);function qr(t){return function(r){var n,e,i=r.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)e=_r(r[n]),o[n]=e.r||0,a[n]=e.g||0,s[n]=e.b||0;return o=t(o),a=t(a),s=t(s),e.opacity=1,function(t){return e.r=o(t),e.g=a(t),e.b=s(t),e+""}}}qr((function(t){var r=t.length-1;return function(n){var e=n<=0?n=0:n>=1?(n=1,r-1):Math.floor(n*r),i=t[e],o=t[e+1],a=e>0?t[e-1]:2*i-o,s=e<r-1?t[e+2]:2*o-i;return Or((n-e/r)*r,a,i,o,s)}})),qr((function(t){var r=t.length;return function(n){var e=Math.floor(((n%=1)<0?++n:n)*r),i=t[(e+r-1)%r],o=t[e%r],a=t[(e+1)%r],s=t[(e+2)%r];return Or((n-e/r)*r,i,o,a,s)}}));var Fr=function(t,r){r||(r=[]);var n,e=t?Math.min(r.length,t.length):0,i=r.slice();return function(o){for(n=0;n<e;++n)i[n]=t[n]*(1-o)+r[n]*o;return i}};function Dr(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vr(t,r){var n,e=r?r.length:0,i=t?Math.min(e,t.length):0,o=new Array(i),a=new Array(e);for(n=0;n<i;++n)o[n]=Kr(t[n],r[n]);for(;n<e;++n)a[n]=r[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}var Xr=function(t,r){var n=new Date;return t=+t,r=+r,function(e){return n.setTime(t*(1-e)+r*e),n}},Ur=function(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}},Gr=function(t,r){var n,e={},i={};for(n in null!==t&&"object"===typeof t||(t={}),null!==r&&"object"===typeof r||(r={}),r)n in t?e[n]=Kr(t[n],r[n]):i[n]=r[n];return function(t){for(n in e)i[n]=e[n](t);return i}},Hr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yr=new RegExp(Hr.source,"g");var Br,$r,Qr=function(t,r){var n,e,i,o=Hr.lastIndex=Yr.lastIndex=0,a=-1,s=[],u=[];for(t+="",r+="";(n=Hr.exec(t))&&(e=Yr.exec(r));)(i=e.index)>o&&(i=r.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(e=e[0])?s[a]?s[a]+=e:s[++a]=e:(s[++a]=null,u.push({i:a,x:Ur(n,e)})),o=Yr.lastIndex;return o<r.length&&(i=r.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(r){return t(r)+""}}(u[0].x):function(t){return function(){return t}}(r):(r=u.length,function(t){for(var n,e=0;e<r;++e)s[(n=u[e]).i]=n.x(t);return s.join("")})},Kr=function(t,r){var n,e=typeof r;return null==r||"boolean"===e?Pr(r):("number"===e?Ur:"string"===e?(n=wr(r))?(r=n,Lr):Qr:r instanceof wr?Lr:r instanceof Date?Xr:Dr(r)?Fr:Array.isArray(r)?Vr:"function"!==typeof r.valueOf&&"function"!==typeof r.toString||isNaN(r)?Gr:Ur)(t,r)},Wr=0,Zr=0,Jr=0,tn=0,rn=0,nn=0,en="object"===typeof performance&&performance.now?performance:Date,on="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function an(){return rn||(on(sn),rn=en.now()+nn)}function sn(){rn=0}function un(){this._call=this._time=this._next=null}function hn(t,r,n){var e=new un;return e.restart(t,r,n),e}function cn(){rn=(tn=en.now())+nn,Wr=Zr=0;try{!function(){an(),++Wr;for(var t,r=Br;r;)(t=rn-r._time)>=0&&r._call.call(null,t),r=r._next;--Wr}()}finally{Wr=0,function(){var t,r,n=Br,e=1/0;for(;n;)n._call?(e>n._time&&(e=n._time),t=n,n=n._next):(r=n._next,n._next=null,n=t?t._next=r:Br=r);$r=t,ln(e)}(),rn=0}}function fn(){var t=en.now(),r=t-tn;r>1e3&&(nn-=r,tn=t)}function ln(t){Wr||(Zr&&(Zr=clearTimeout(Zr)),t-rn>24?(t<1/0&&(Zr=setTimeout(cn,t-en.now()-nn)),Jr&&(Jr=clearInterval(Jr))):(Jr||(tn=en.now(),Jr=setInterval(fn,1e3)),Wr=1,on(cn)))}un.prototype=hn.prototype={constructor:un,restart:function(t,r,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?an():+n)+(null==r?0:+r),this._next||$r===this||($r?$r._next=this:Br=this,$r=this),this._call=t,this._time=n,ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,ln())}};var vn=function(t,r,n){var e=new un;return r=null==r?0:+r,e.restart((function(n){e.stop(),t(n+r)}),r,n),e},pn=T("start","end","cancel","interrupt"),gn=[],mn=function(t,r,n,e,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,r,n){var e,i=t.__transition;function o(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var h,c,f,l;if(1!==n.state)return u();for(h in i)if((l=i[h]).name===n.name){if(3===l.state)return vn(a);4===l.state?(l.state=6,l.timer.stop(),l.on.call("interrupt",t,t.__data__,l.index,l.group),delete i[h]):+h<r&&(l.state=6,l.timer.stop(),l.on.call("cancel",t,t.__data__,l.index,l.group),delete i[h])}if(vn((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,e=new Array(f=n.tween.length),h=0,c=-1;h<f;++h)(l=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(e[++c]=l);e.length=c+1}}function s(r){for(var i=r<n.duration?n.ease.call(null,r/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=e.length;++o<a;)e[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var e in n.state=6,n.timer.stop(),delete i[r],i)return;delete t.__transition}i[r]=n,n.timer=hn(o,0,n.time)}(t,n,{name:r,index:e,group:i,on:pn,tween:gn,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function dn(t,r){var n=wn(t,r);if(n.state>0)throw new Error("too late; already scheduled");return n}function yn(t,r){var n=wn(t,r);if(n.state>3)throw new Error("too late; already running");return n}function wn(t,r){var n=t.__transition;if(!n||!(n=n[r]))throw new Error("transition not found");return n}var bn,xn=function(t,r){var n,e,i,o=t.__transition,a=!0;if(o){for(i in r=null==r?null:r+"",o)(n=o[i]).name===r?(e=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(e?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},Mn=180/Math.PI,_n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},kn=function(t,r,n,e,i,o){var a,s,u;return(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a),(u=t*n+r*e)&&(n-=t*u,e-=r*u),(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s,u/=s),t*e<r*n&&(t=-t,r=-r,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(r,t)*Mn,skewX:Math.atan(u)*Mn,scaleX:a,scaleY:s}};function Sn(t,r,n,e){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,e,i,o,a,s){if(t!==i||e!==o){var u=a.push("translate(",null,r,null,n);s.push({i:u-4,x:Ur(t,i)},{i:u-2,x:Ur(e,o)})}else(i||o)&&a.push("translate("+i+r+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,r,n,o){t!==r?(t-r>180?r+=360:r-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,e)-2,x:Ur(t,r)})):r&&n.push(i(n)+"rotate("+r+e)}(o.rotate,a.rotate,s,u),function(t,r,n,o){t!==r?o.push({i:n.push(i(n)+"skewX(",null,e)-2,x:Ur(t,r)}):r&&n.push(i(n)+"skewX("+r+e)}(o.skewX,a.skewX,s,u),function(t,r,n,e,o,a){if(t!==n||r!==e){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Ur(t,n)},{i:s-2,x:Ur(r,e)})}else 1===n&&1===e||o.push(i(o)+"scale("+n+","+e+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var r,n=-1,e=u.length;++n<e;)s[(r=u[n]).i]=r.x(t);return s.join("")}}}var En=Sn((function(t){var r=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return r.isIdentity?_n:kn(r.a,r.b,r.c,r.d,r.e,r.f)}),"px, ","px)","deg)"),Nn=Sn((function(t){return null==t?_n:(bn||(bn=document.createElementNS("http://www.w3.org/2000/svg","g")),bn.setAttribute("transform",t),(t=bn.transform.baseVal.consolidate())?(t=t.matrix,kn(t.a,t.b,t.c,t.d,t.e,t.f)):_n)}),", ",")",")");function An(t,r){var n,e;return function(){var i=yn(this,t),o=i.tween;if(o!==n)for(var a=0,s=(e=n=o).length;a<s;++a)if(e[a].name===r){(e=e.slice()).splice(a,1);break}i.tween=e}}function Rn(t,r,n){var e,i;if("function"!==typeof n)throw new Error;return function(){var o=yn(this,t),a=o.tween;if(a!==e){i=(e=a).slice();for(var s={name:r,value:n},u=0,h=i.length;u<h;++u)if(i[u].name===r){i[u]=s;break}u===h&&i.push(s)}o.tween=i}}function jn(t,r,n){var e=t._id;return t.each((function(){var t=yn(this,e);(t.value||(t.value={}))[r]=n.apply(this,arguments)})),function(t){return wn(t,e).value[r]}}var zn=function(t,r){var n;return("number"===typeof r?Ur:r instanceof wr?Lr:(n=wr(r))?(r=n,Lr):Qr)(t,r)};function On(t){return function(){this.removeAttribute(t)}}function Pn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cn(t,r,n){var e,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===e?i:i=r(e=a,n)}}function In(t,r,n){var e,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===e?i:i=r(e=a,n)}}function Tn(t,r,n){var e,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===e&&s===i?o:(i=s,o=r(e=a,u));this.removeAttribute(t)}}function Ln(t,r,n){var e,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===e&&s===i?o:(i=s,o=r(e=a,u));this.removeAttributeNS(t.space,t.local)}}function qn(t,r){return function(n){this.setAttribute(t,r.call(this,n))}}function Fn(t,r){return function(n){this.setAttributeNS(t.space,t.local,r.call(this,n))}}function Dn(t,r){var n,e;function i(){var i=r.apply(this,arguments);return i!==e&&(n=(e=i)&&Fn(t,i)),n}return i._value=r,i}function Vn(t,r){var n,e;function i(){var i=r.apply(this,arguments);return i!==e&&(n=(e=i)&&qn(t,i)),n}return i._value=r,i}function Xn(t,r){return function(){dn(this,t).delay=+r.apply(this,arguments)}}function Un(t,r){return r=+r,function(){dn(this,t).delay=r}}function Gn(t,r){return function(){yn(this,t).duration=+r.apply(this,arguments)}}function Hn(t,r){return r=+r,function(){yn(this,t).duration=r}}function Yn(t,r){if("function"!==typeof r)throw new Error;return function(){yn(this,t).ease=r}}function Bn(t,r,n){var e,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||"start"===t}))}(r)?dn:yn;return function(){var a=o(this,t),s=a.on;s!==e&&(i=(e=s).copy()).on(r,n),a.on=i}}var $n=tr.prototype.constructor;function Qn(t){return function(){this.style.removeProperty(t)}}function Kn(t,r,n){return function(e){this.style.setProperty(t,r.call(this,e),n)}}function Wn(t,r,n){var e,i;function o(){var o=r.apply(this,arguments);return o!==i&&(e=(i=o)&&Kn(t,o,n)),e}return o._value=r,o}function Zn(t){return function(r){this.textContent=t.call(this,r)}}function Jn(t){var r,n;function e(){var e=t.apply(this,arguments);return e!==n&&(r=(n=e)&&Zn(e)),r}return e._value=t,e}var te=0;function re(t,r,n,e){this._groups=t,this._parents=r,this._name=n,this._id=e}function ne(){return++te}var ee=tr.prototype;re.prototype=function(t){return tr().transition(t)}.prototype=s({constructor:re,select:function(t){var r=this._name,n=this._id;"function"!==typeof t&&(t=q(t));for(var e=this._groups,i=e.length,o=new Array(i),a=0;a<i;++a)for(var s,u,h=e[a],c=h.length,f=o[a]=new Array(c),l=0;l<c;++l)(s=h[l])&&(u=t.call(s,s.__data__,l,h))&&("__data__"in s&&(u.__data__=s.__data__),f[l]=u,mn(f[l],r,n,l,f,wn(s,n)));return new re(o,this._parents,r,n)},selectAll:function(t){var r=this._name,n=this._id;"function"!==typeof t&&(t=V(t));for(var e=this._groups,i=e.length,o=[],a=[],s=0;s<i;++s)for(var u,h=e[s],c=h.length,f=0;f<c;++f)if(u=h[f]){for(var l,v=t.call(u,u.__data__,f,h),p=wn(u,n),g=0,m=v.length;g<m;++g)(l=v[g])&&mn(l,r,n,g,v,p);o.push(v),a.push(u)}return new re(o,a,r,n)},filter:function(t){"function"!==typeof t&&(t=X(t));for(var r=this._groups,n=r.length,e=new Array(n),i=0;i<n;++i)for(var o,a=r[i],s=a.length,u=e[i]=[],h=0;h<s;++h)(o=a[h])&&t.call(o,o.__data__,h,a)&&u.push(o);return new re(e,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var r=this._groups,n=t._groups,e=r.length,i=n.length,o=Math.min(e,i),a=new Array(e),s=0;s<o;++s)for(var u,h=r[s],c=n[s],f=h.length,l=a[s]=new Array(f),v=0;v<f;++v)(u=h[v]||c[v])&&(l[v]=u);for(;s<e;++s)a[s]=r[s];return new re(a,this._parents,this._name,this._id)},selection:function(){return new $n(this._groups,this._parents)},transition:function(){for(var t=this._name,r=this._id,n=ne(),e=this._groups,i=e.length,o=0;o<i;++o)for(var a,s=e[o],u=s.length,h=0;h<u;++h)if(a=s[h]){var c=wn(a,r);mn(a,t,n,h,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new re(e,this._parents,t,n)},call:ee.call,nodes:ee.nodes,node:ee.node,size:ee.size,empty:ee.empty,each:ee.each,on:function(t,r){var n=this._id;return arguments.length<2?wn(this.node(),n).on.on(t):this.each(Bn(n,t,r))},attr:function(t,r){var n=et(t),e="transform"===n?Nn:zn;return this.attrTween(t,"function"===typeof r?(n.local?Ln:Tn)(n,e,jn(this,"attr."+t,r)):null==r?(n.local?Pn:On)(n):(n.local?In:Cn)(n,e,r))},attrTween:function(t,r){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==r)return this.tween(n,null);if("function"!==typeof r)throw new Error;var e=et(t);return this.tween(n,(e.local?Dn:Vn)(e,r))},style:function(t,r,n){var e="transform"===(t+="")?En:zn;return null==r?this.styleTween(t,function(t,r){var n,e,i;return function(){var o=pt(this,t),a=(this.style.removeProperty(t),pt(this,t));return o===a?null:o===n&&a===e?i:i=r(n=o,e=a)}}(t,e)).on("end.style."+t,Qn(t)):"function"===typeof r?this.styleTween(t,function(t,r,n){var e,i,o;return function(){var a=pt(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=pt(this,t)),a===u?null:a===e&&u===i?o:(i=u,o=r(e=a,s))}}(t,e,jn(this,"style."+t,r))).each(function(t,r){var n,e,i,o,a="style."+r,s="end."+a;return function(){var u=yn(this,t),h=u.on,c=null==u.value[a]?o||(o=Qn(r)):void 0;h===n&&i===c||(e=(n=h).copy()).on(s,i=c),u.on=e}}(this._id,t)):this.styleTween(t,function(t,r,n){var e,i,o=n+"";return function(){var a=pt(this,t);return a===o?null:a===e?i:i=r(e=a,n)}}(t,e,r),n).on("end.style."+t,null)},styleTween:function(t,r,n){var e="style."+(t+="");if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==r)return this.tween(e,null);if("function"!==typeof r)throw new Error;return this.tween(e,Wn(t,r,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var r=t(this);this.textContent=null==r?"":r}}(jn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var r="text";if(arguments.length<1)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,Jn(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var r=this.parentNode;for(var n in this.__transition)if(+n!==t)return;r&&r.removeChild(this)}));var t},tween:function(t,r){var n=this._id;if(t+="",arguments.length<2){for(var e,i=wn(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((e=i[o]).name===t)return e.value;return null}return this.each((null==r?An:Rn)(n,t,r))},delay:function(t){var r=this._id;return arguments.length?this.each(("function"===typeof t?Xn:Un)(r,t)):wn(this.node(),r).delay},duration:function(t){var r=this._id;return arguments.length?this.each(("function"===typeof t?Gn:Hn)(r,t)):wn(this.node(),r).duration},ease:function(t){var r=this._id;return arguments.length?this.each(Yn(r,t)):wn(this.node(),r).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,r){return function(){var n=r.apply(this,arguments);if("function"!==typeof n)throw new Error;yn(this,t).ease=n}}(this._id,t))},end:function(){var t,r,n=this,e=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0===--i&&o()}};n.each((function(){var n=yn(this,e),i=n.on;i!==t&&((r=(t=i).copy())._.cancel.push(s),r._.interrupt.push(s),r._.end.push(u)),n.on=r})),0===i&&o()}))}},Symbol.iterator,ee[Symbol.iterator]);var ie={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function oe(t,r){for(var n;!(n=t.__transition)||!(n=n[r]);)if(!(t=t.parentNode))throw new Error("transition ".concat(r," not found"));return n}tr.prototype.interrupt=function(t){return this.each((function(){xn(this,t)}))},tr.prototype.transition=function(t){var r,n;t instanceof re?(r=t._id,t=t._name):(r=ne(),(n=ie).time=an(),t=null==t?null:t+"");for(var e=this._groups,i=e.length,o=0;o<i;++o)for(var a,s=e[o],u=s.length,h=0;h<u;++h)(a=s[h])&&mn(a,t,r,h,s,n||oe(a,r));return new re(e,this._parents,t,r)};Math.abs,Math.max,Math.min;function ae(t){return[+t[0],+t[1]]}function se(t){return[ae(t[0]),ae(t[1])]}["w","e"].map(ue),["n","s"].map(ue),["n","w","e","s","nw","ne","sw","se"].map(ue);function ue(t){return{type:t}}var he=Math.PI/180,ce=180/Math.PI,fe=.96422,le=.82521,ve=4/29,pe=6/29,ge=3*pe*pe;function me(t){if(t instanceof ye)return new ye(t.l,t.a,t.b,t.opacity);if(t instanceof ke)return Se(t);t instanceof kr||(t=Mr(t));var r,n,e=Me(t.r),i=Me(t.g),o=Me(t.b),a=we((.2225045*e+.7168786*i+.0606169*o)/1);return e===i&&i===o?r=n=a:(r=we((.4360747*e+.3850649*i+.1430804*o)/fe),n=we((.0139322*e+.0971045*i+.7141733*o)/le)),new ye(116*a-16,500*(r-a),200*(a-n),t.opacity)}function de(t,r,n,e){return 1===arguments.length?me(t):new ye(t,r,n,null==e?1:e)}function ye(t,r,n,e){this.l=+t,this.a=+r,this.b=+n,this.opacity=+e}function we(t){return t>.008856451679035631?Math.pow(t,1/3):t/ge+ve}function be(t){return t>pe?t*t*t:ge*(t-ve)}function xe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Me(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function _e(t){if(t instanceof ke)return new ke(t.h,t.c,t.l,t.opacity);if(t instanceof ye||(t=me(t)),0===t.a&&0===t.b)return new ke(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var r=Math.atan2(t.b,t.a)*ce;return new ke(r<0?r+360:r,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function ke(t,r,n,e){this.h=+t,this.c=+r,this.l=+n,this.opacity=+e}function Se(t){if(isNaN(t.h))return new ye(t.l,0,0,t.opacity);var r=t.h*he;return new ye(t.l,Math.cos(r)*t.c,Math.sin(r)*t.c,t.opacity)}rr(ye,de,nr(er,{brighter:function(t){return new ye(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new ye(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,r=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new kr(xe(3.1338561*(r=fe*be(r))-1.6168667*(t=1*be(t))-.4906146*(n=le*be(n))),xe(-.9787684*r+1.9161415*t+.033454*n),xe(.0719453*r-.2289914*t+1.4052427*n),this.opacity)}})),rr(ke,(function(t,r,n,e){return 1===arguments.length?_e(t):new ke(t,r,n,null==e?1:e)}),nr(er,{brighter:function(t){return new ke(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new ke(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Se(this).rgb()}}));function Ee(t,r,n,e){if(isNaN(r)||isNaN(n))return t;var i,o,a,s,u,h,c,f,l,v=t._root,p={data:e},g=t._x0,m=t._y0,d=t._x1,y=t._y1;if(!v)return t._root=p,t;for(;v.length;)if((h=r>=(o=(g+d)/2))?g=o:d=o,(c=n>=(a=(m+y)/2))?m=a:y=a,i=v,!(v=v[f=c<<1|h]))return i[f]=p,t;if(s=+t._x.call(null,v.data),u=+t._y.call(null,v.data),r===s&&n===u)return p.next=v,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(h=r>=(o=(g+d)/2))?g=o:d=o,(c=n>=(a=(m+y)/2))?m=a:y=a}while((f=c<<1|h)===(l=(u>=a)<<1|s>=o));return i[l]=v,i[f]=p,t}var Ne=function(t,r,n,e,i){this.node=t,this.x0=r,this.y0=n,this.x1=e,this.y1=i};function Ae(t){return t[0]}function Re(t){return t[1]}function je(t,r,n){var e=new ze(null==r?Ae:r,null==n?Re:n,NaN,NaN,NaN,NaN);return null==t?e:e.addAll(t)}function ze(t,r,n,e,i,o){this._x=t,this._y=r,this._x0=n,this._y0=e,this._x1=i,this._y1=o,this._root=void 0}function Oe(t){for(var r={data:t.data},n=r;t=t.next;)n=n.next={data:t.data};return r}var Pe=je.prototype=ze.prototype;Pe.copy=function(){var t,r,n=new ze(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root;if(!e)return n;if(!e.length)return n._root=Oe(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Oe(r));return n},Pe.add=function(t){var r=+this._x.call(null,t),n=+this._y.call(null,t);return Ee(this.cover(r,n),r,n,t)},Pe.addAll=function(t){var r,n,e,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,h=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(e=+this._x.call(null,r=t[n]))||isNaN(i=+this._y.call(null,r))||(a[n]=e,s[n]=i,e<u&&(u=e),e>c&&(c=e),i<h&&(h=i),i>f&&(f=i));if(u>c||h>f)return this;for(this.cover(u,h).cover(c,f),n=0;n<o;++n)Ee(this,a[n],s[n],t[n]);return this},Pe.cover=function(t,r){if(isNaN(t=+t)||isNaN(r=+r))return this;var n=this._x0,e=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(e=Math.floor(r))+1;else{for(var a,s,u=i-n||1,h=this._root;n>t||t>=i||e>r||r>=o;)switch(s=(r<e)<<1|t<n,(a=new Array(4))[s]=h,h=a,u*=2,s){case 0:i=n+u,o=e+u;break;case 1:n=i-u,o=e+u;break;case 2:i=n+u,e=o-u;break;case 3:n=i-u,e=o-u}this._root&&this._root.length&&(this._root=h)}return this._x0=n,this._y0=e,this._x1=i,this._y1=o,this},Pe.data=function(){var t=[];return this.visit((function(r){if(!r.length)do{t.push(r.data)}while(r=r.next)})),t},Pe.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Pe.find=function(t,r,n){var e,i,o,a,s,u,h,c=this._x0,f=this._y0,l=this._x1,v=this._y1,p=[],g=this._root;for(g&&p.push(new Ne(g,c,f,l,v)),null==n?n=1/0:(c=t-n,f=r-n,l=t+n,v=r+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>l||(o=u.y0)>v||(a=u.x1)<c||(s=u.y1)<f))if(g.length){var m=(i+a)/2,d=(o+s)/2;p.push(new Ne(g[3],m,d,a,s),new Ne(g[2],i,d,m,s),new Ne(g[1],m,o,a,d),new Ne(g[0],i,o,m,d)),(h=(r>=d)<<1|t>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-h],p[p.length-1-h]=u)}else{var y=t-+this._x.call(null,g.data),w=r-+this._y.call(null,g.data),b=y*y+w*w;if(b<n){var x=Math.sqrt(n=b);c=t-x,f=r-x,l=t+x,v=r+x,e=g.data}}return e},Pe.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var r,n,e,i,o,a,s,u,h,c,f,l,v=this._root,p=this._x0,g=this._y0,m=this._x1,d=this._y1;if(!v)return this;if(v.length)for(;;){if((h=o>=(s=(p+m)/2))?p=s:m=s,(c=a>=(u=(g+d)/2))?g=u:d=u,r=v,!(v=v[f=c<<1|h]))return this;if(!v.length)break;(r[f+1&3]||r[f+2&3]||r[f+3&3])&&(n=r,l=f)}for(;v.data!==t;)if(e=v,!(v=v.next))return this;return(i=v.next)&&delete v.next,e?(i?e.next=i:delete e.next,this):r?(i?r[f]=i:delete r[f],(v=r[0]||r[1]||r[2]||r[3])&&v===(r[3]||r[2]||r[1]||r[0])&&!v.length&&(n?n[l]=v:this._root=v),this):(this._root=i,this)},Pe.removeAll=function(t){for(var r=0,n=t.length;r<n;++r)this.remove(t[r]);return this},Pe.root=function(){return this._root},Pe.size=function(){var t=0;return this.visit((function(r){if(!r.length)do{++t}while(r=r.next)})),t},Pe.visit=function(t){var r,n,e,i,o,a,s=[],u=this._root;for(u&&s.push(new Ne(u,this._x0,this._y0,this._x1,this._y1));r=s.pop();)if(!t(u=r.node,e=r.x0,i=r.y0,o=r.x1,a=r.y1)&&u.length){var h=(e+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new Ne(n,h,c,o,a)),(n=u[2])&&s.push(new Ne(n,e,c,h,a)),(n=u[1])&&s.push(new Ne(n,h,i,o,c)),(n=u[0])&&s.push(new Ne(n,e,i,h,c))}return this},Pe.visitAfter=function(t){var r,n=[],e=[];for(this._root&&n.push(new Ne(this._root,this._x0,this._y0,this._x1,this._y1));r=n.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,u=r.x1,h=r.y1,c=(a+u)/2,f=(s+h)/2;(o=i[0])&&n.push(new Ne(o,a,s,c,f)),(o=i[1])&&n.push(new Ne(o,c,s,u,f)),(o=i[2])&&n.push(new Ne(o,a,f,c,h)),(o=i[3])&&n.push(new Ne(o,c,f,u,h))}e.push(r)}for(;r=e.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this},Pe.x=function(t){return arguments.length?(this._x=t,this):this._x},Pe.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ce=function(t){return function(){return t}},Ie=function(t){return 1e-6*(t()-.5)};function Te(t){return t.x+t.vx}function Le(t){return t.y+t.vy}function qe(t){return t.index}function Fe(t,r){var n=t.get(r);if(!n)throw new Error("node not found: "+r);return n}var De=4294967296;function Ve(t){return t.x}function Xe(t){return t.y}var Ue=Math.PI*(3-Math.sqrt(5)),Ge=function(t){var r,n=1,e=.001,i=1-Math.pow(e,1/300),o=0,a=.6,s=new Map,u=hn(f),h=T("tick","end"),c=function(){var t=1;return function(){return(t=(1664525*t+1013904223)%De)/De}}();function f(){l(),h.call("tick",r),n<e&&(u.stop(),h.call("end",r))}function l(e){var u,h,c=t.length;void 0===e&&(e=1);for(var f=0;f<e;++f)for(n+=(o-n)*i,s.forEach((function(t){t(n)})),u=0;u<c;++u)null==(h=t[u]).fx?h.x+=h.vx*=a:(h.x=h.fx,h.vx=0),null==h.fy?h.y+=h.vy*=a:(h.y=h.fy,h.vy=0);return r}function v(){for(var r,n=0,e=t.length;n<e;++n){if((r=t[n]).index=n,null!=r.fx&&(r.x=r.fx),null!=r.fy&&(r.y=r.fy),isNaN(r.x)||isNaN(r.y)){var i=10*Math.sqrt(.5+n),o=n*Ue;r.x=i*Math.cos(o),r.y=i*Math.sin(o)}(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}}function p(r){return r.initialize&&r.initialize(t,c),r}return null==t&&(t=[]),v(),r={tick:l,restart:function(){return u.restart(f),r},stop:function(){return u.stop(),r},nodes:function(n){return arguments.length?(t=n,v(),s.forEach(p),r):t},alpha:function(t){return arguments.length?(n=+t,r):n},alphaMin:function(t){return arguments.length?(e=+t,r):e},alphaDecay:function(t){return arguments.length?(i=+t,r):+i},alphaTarget:function(t){return arguments.length?(o=+t,r):o},velocityDecay:function(t){return arguments.length?(a=1-t,r):1-a},randomSource:function(t){return arguments.length?(c=t,s.forEach(p),r):c},force:function(t,n){return arguments.length>1?(null==n?s.delete(t):s.set(t,p(n)),r):s.get(t)},find:function(r,n,e){var i,o,a,s,u,h=0,c=t.length;for(null==e?e=1/0:e*=e,h=0;h<c;++h)(a=(i=r-(s=t[h]).x)*i+(o=n-s.y)*o)<e&&(u=s,e=a);return u},on:function(t,n){return arguments.length>1?(h.on(t,n),r):h.on(t)}}},He=Math.sqrt(50),Ye=Math.sqrt(10),Be=Math.sqrt(2);function $e(t,r,n){var e=(r-t)/Math.max(0,n),i=Math.floor(Math.log(e)/Math.LN10),o=e/Math.pow(10,i);return i>=0?(o>=He?10:o>=Ye?5:o>=Be?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=He?10:o>=Ye?5:o>=Be?2:1)}var Qe=function(t,r){return t<r?-1:t>r?1:t>=r?0:NaN},Ke=function(t){var r=t,n=t;function e(t,r,e,i){for(null==e&&(e=0),null==i&&(i=t.length);e<i;){var o=e+i>>>1;n(t[o],r)<0?e=o+1:i=o}return e}return 1===t.length&&(r=function(r,n){return t(r)-n},n=function(t){return function(r,n){return Qe(t(r),n)}}(t)),{left:e,center:function(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);var a=e(t,n,i,o-1);return a>i&&r(t[a-1],n)>-r(t[a],n)?a-1:a},right:function(t,r,e,i){for(null==e&&(e=0),null==i&&(i=t.length);e<i;){var o=e+i>>>1;n(t[o],r)>0?i=o:e=o+1}return e}}};var We=Ke(Qe),Ze=We.right,Je=(We.left,Ke((function(t){return null===t?NaN:+t})).center,Ze),ti=function(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}};function ri(t){return+t}var ni=[0,1];function ei(t){return t}function ii(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:(n=isNaN(r)?NaN:.5,function(){return n});var n}function oi(t,r,n){var e=t[0],i=t[1],o=r[0],a=r[1];return i<e?(e=ii(i,e),o=n(a,o)):(e=ii(e,i),o=n(o,a)),function(t){return o(e(t))}}function ai(t,r,n){var e=Math.min(t.length,r.length)-1,i=new Array(e),o=new Array(e),a=-1;for(t[e]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++a<e;)i[a]=ii(t[a],t[a+1]),o[a]=n(r[a],r[a+1]);return function(r){var n=Je(t,r,1,e)-1;return o[n](i[n](r))}}function si(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ui(){var t,r,n,e,i,o,a=ni,s=ni,u=Kr,h=ei;function c(){var t=Math.min(a.length,s.length);return h!==ei&&(h=function(t,r){var n;return t>r&&(n=t,t=r,r=n),function(n){return Math.max(t,Math.min(r,n))}}(a[0],a[t-1])),e=t>2?ai:oi,i=o=null,f}function f(r){return isNaN(r=+r)?n:(i||(i=e(a.map(t),s,u)))(t(h(r)))}return f.invert=function(n){return h(r((o||(o=e(s,a.map(t),Ur)))(n)))},f.domain=function(t){return arguments.length?(a=Array.from(t,ri),c()):a.slice()},f.range=function(t){return arguments.length?(s=Array.from(t),c()):s.slice()},f.rangeRound=function(t){return s=Array.from(t),u=ti,c()},f.clamp=function(t){return arguments.length?(h=!!t||ei,c()):h!==ei},f.interpolate=function(t){return arguments.length?(u=t,c()):u},f.unknown=function(t){return arguments.length?(n=t,f):n},function(n,e){return t=n,r=e,c()}}function hi(){return ui()(ei,ei)}function ci(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t)}return this}var fi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function li(t){if(!(r=fi.exec(t)))throw new Error("invalid format: "+t);var r;return new vi({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}function vi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}li.prototype=vi.prototype,vi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function pi(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,e=t.slice(0,n);return[e.length>1?e[0]+e.slice(2):e,+t.slice(n+1)]}var gi,mi,di,yi,wi=function(t){return(t=pi(Math.abs(t)))?t[1]:NaN},bi=function(t,r){var n=pi(t,r);if(!n)return t+"";var e=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+e:e.length>i+1?e.slice(0,i+1)+"."+e.slice(i+1):e+new Array(i-e.length+2).join("0")},xi={"%":function(t,r){return(100*t).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return bi(100*t,r)},r:bi,s:function(t,r){var n=pi(t,r);if(!n)return t+"";var e=n[0],i=n[1],o=i-(gi=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=e.length;return o===a?e:o>a?e+new Array(o-a+1).join("0"):o>0?e.slice(0,o)+"."+e.slice(o):"0."+new Array(1-o).join("0")+pi(t,Math.max(0,r+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Mi=function(t){return t},_i=Array.prototype.map,ki=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];mi=function(t){var r,n,e=void 0===t.grouping||void 0===t.thousands?Mi:(r=_i.call(t.grouping,Number),n=t.thousands+"",function(t,e){for(var i=t.length,o=[],a=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?Mi:function(t){return function(r){return r.replace(/[0-9]/g,(function(r){return t[+r]}))}}(_i.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function f(t){var r=(t=li(t)).fill,n=t.align,f=t.sign,l=t.symbol,v=t.zero,p=t.width,g=t.comma,m=t.precision,d=t.trim,y=t.type;"n"===y?(g=!0,y="g"):xi[y]||(void 0===m&&(m=12),d=!0,y="g"),(v||"0"===r&&"="===n)&&(v=!0,r="0",n="=");var w="$"===l?i:"#"===l&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===l?o:/[%p]/.test(y)?u:"",x=xi[y],M=/[defgprs%]/.test(y);function _(t){var i,o,u,l=w,_=b;if("c"===y)_=x(t)+_,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),m),d&&(t=function(t){t:for(var r,n=t.length,e=1,i=-1;e<n;++e)switch(t[e]){case".":i=r=e;break;case"0":0===i&&(i=e),r=e;break;default:if(!+t[e])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(r+1):t}(t)),k&&0===+t&&"+"!==f&&(k=!1),l=(k?"("===f?f:h:"-"===f||"("===f?"":f)+l,_=("s"===y?ki[8+gi/3]:"")+_+(k&&"("===f?")":""),M)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){_=(46===u?a+t.slice(i+1):t.slice(i))+_,t=t.slice(0,i);break}}g&&!v&&(t=e(t,1/0));var S=l.length+t.length+_.length,E=S<p?new Array(p-S+1).join(r):"";switch(g&&v&&(t=e(E+t,E.length?p-_.length:1/0),E=""),n){case"<":t=l+t+_+E;break;case"=":t=l+E+t+_;break;case"^":t=E.slice(0,S=E.length>>1)+l+t+_+E.slice(S);break;default:t=E+l+t+_}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),_.toString=function(){return t+""},_}return{format:f,formatPrefix:function(t,r){var n=f(((t=li(t)).type="f",t)),e=3*Math.max(-8,Math.min(8,Math.floor(wi(r)/3))),i=Math.pow(10,-e),o=ki[8+e/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),di=mi.format,yi=mi.formatPrefix;function Si(t,r,n,e){var i,o=function(t,r,n){var e=Math.abs(r-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),o=e/i;return o>=He?i*=10:o>=Ye?i*=5:o>=Be&&(i*=2),r<t?-i:i}(t,r,n);switch((e=li(null==e?",f":e)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(r));return null!=e.precision||isNaN(i=function(t,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wi(r)/3)))-wi(Math.abs(t)))}(o,a))||(e.precision=i),yi(e,a);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(i=function(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,wi(r)-wi(t))+1}(o,Math.max(Math.abs(t),Math.abs(r))))||(e.precision=i-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(i=function(t){return Math.max(0,-wi(Math.abs(t)))}(o))||(e.precision=i-2*("%"===e.type))}return di(e)}function Ei(t){var r=t.domain;return t.ticks=function(t){var n=r();return function(t,r,n){var e,i,o,a,s=-1;if(n=+n,(t=+t)===(r=+r)&&n>0)return[t];if((e=r<t)&&(i=t,t=r,r=i),0===(a=$e(t,r,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),r=Math.floor(r/a),o=new Array(i=Math.ceil(r-t+1));++s<i;)o[s]=(t+s)*a;else for(a=-a,t=Math.ceil(t*a),r=Math.floor(r*a),o=new Array(i=Math.ceil(r-t+1));++s<i;)o[s]=(t+s)/a;return e&&o.reverse(),o}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var e=r();return Si(e[0],e[e.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var e,i,o=r(),a=0,s=o.length-1,u=o[a],h=o[s],c=10;for(h<u&&(i=u,u=h,h=i,i=a,a=s,s=i);c-- >0;){if((i=$e(u,h,n))===e)return o[a]=u,o[s]=h,r(o);if(i>0)u=Math.floor(u/i)*i,h=Math.ceil(h/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,h=Math.floor(h*i)/i}e=i}return t},t}function Ni(){var t=hi();return t.copy=function(){return si(t,Ni())},ci.apply(t,arguments),Ei(t)}function Ai(t){return((t=Math.exp(t))+1/t)/2}(function t(r,n,e){function i(t,i){var o,a,s=t[0],u=t[1],h=t[2],c=i[0],f=i[1],l=i[2],v=c-s,p=f-u,g=v*v+p*p;if(g<1e-12)a=Math.log(l/h)/r,o=function(t){return[s+t*v,u+t*p,h*Math.exp(r*t*a)]};else{var m=Math.sqrt(g),d=(l*l-h*h+e*g)/(2*h*n*m),y=(l*l-h*h-e*g)/(2*l*n*m),w=Math.log(Math.sqrt(d*d+1)-d),b=Math.log(Math.sqrt(y*y+1)-y);a=(b-w)/r,o=function(t){var e,i=t*a,o=Ai(w),c=h/(n*m)*(o*(e=r*i+w,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(w));return[s+c*v,u+c*p,h*o/Ai(r*i+w)]}}return o.duration=1e3*a*r/Math.SQRT2,o}return i.rho=function(r){var n=Math.max(.001,+r),e=n*n;return t(n,e,e*e)},i})(Math.SQRT2,2,4);function Ri(t,r,n){this.k=t,this.x=r,this.y=n}Ri.prototype={constructor:Ri,scale:function(t){return 1===t?this:new Ri(this.k*t,this.x,this.y)},translate:function(t,r){return 0===t&0===r?this:new Ri(this.k,this.x+this.k*t,this.y+this.k*r)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Ri(1,0,0);Ri.prototype;function ji(t,r,n){if("hamming"===n)return t.xor(r).cardinality();if("jaccard"===n){var e=t.and(r).cardinality(),i=t.or(r).cardinality();return 0===i?0:1-e/i}return 0}Ni().domain([-1,1]).range([1,0]);Ni().domain([0,1]).range([-160,160]);var zi=n(35),Oi=n.n(zi);const Pi={distMetric:null,neighborMasks:null,neighborMasks1hop:null};const Ci=Ni().domain([15,1e3]).range([15,25]).clamp(!0);m({initializeState:function(t,r,n){Pi.neighborMasks=t.map((t=>R()(t))),Pi.neighborMasks1hop=r.map((t=>R()(t))),Pi.distMetric=n},runUMAP:(t,r,n)=>{const e=r?Pi.neighborMasks:Pi.neighborMasks1hop,i=t.length;if(i<=15){console.log("Calling D3... #nodes =",i);const r=t.map(((t,r)=>({index:r}))),o={};for(let n=0;n<i;n++)o[t[n]]=n;const a=[];for(let t in o)if(o.hasOwnProperty(t))for(let r in o)t<r&&o.hasOwnProperty(r)&&a.push({source:o[t],target:o[r],dist:ji(e[t],e[r],Pi.distMetric)});return Ge(r).force("topolink",function(t){var r,n,e,i,o,a,s=qe,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},h=Ce(30),c=1;function f(e){for(var i=0,s=t.length;i<c;++i)for(var u,h,f,l,v,p,g,m=0;m<s;++m)h=(u=t[m]).source,l=(f=u.target).x+f.vx-h.x-h.vx||Ie(a),v=f.y+f.vy-h.y-h.vy||Ie(a),l*=p=((p=Math.sqrt(l*l+v*v))-n[m])/p*e*r[m],v*=p,f.vx-=l*(g=o[m]),f.vy-=v*g,h.vx+=l*(g=1-g),h.vy+=v*g}function l(){if(e){var a,u,h=e.length,c=t.length,f=new Map(e.map((function(t,r){return[s(t,r,e),t]})));for(a=0,i=new Array(h);a<c;++a)(u=t[a]).index=a,"object"!==typeof u.source&&(u.source=Fe(f,u.source)),"object"!==typeof u.target&&(u.target=Fe(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);r=new Array(c),v(),n=new Array(c),p()}}function v(){if(e)for(var n=0,i=t.length;n<i;++n)r[n]=+u(t[n],n,t)}function p(){if(e)for(var r=0,i=t.length;r<i;++r)n[r]=+h(t[r],r,t)}return null==t&&(t=[]),f.initialize=function(t,r){e=t,a=r,l()},f.links=function(r){return arguments.length?(t=r,l(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(c=+t,f):c},f.strength=function(t){return arguments.length?(u="function"===typeof t?t:Ce(+t),v(),f):u},f.distance=function(t){return arguments.length?(h="function"===typeof t?t:Ce(+t),p(),f):h},f}(a).distance((t=>20*(1+t.dist)))).force("charge",function(){var t,r,n,e,i,o=Ce(-30),a=1,s=1/0,u=.81;function h(n){var i,o=t.length,a=je(t,Ve,Xe).visitAfter(f);for(e=n,i=0;i<o;++i)r=t[i],a.visit(l)}function c(){if(t){var r,n,e=t.length;for(i=new Array(e),r=0;r<e;++r)n=t[r],i[n.index]=+o(n,r,t)}}function f(t){var r,n,e,o,a,s=0,u=0;if(t.length){for(e=o=a=0;a<4;++a)(r=t[a])&&(n=Math.abs(r.value))&&(s+=r.value,u+=n,e+=n*r.x,o+=n*r.y);t.x=e/u,t.y=o/u}else{(r=t).x=r.data.x,r.y=r.data.y;do{s+=i[r.data.index]}while(r=r.next)}t.value=s}function l(t,o,h,c){if(!t.value)return!0;var f=t.x-r.x,l=t.y-r.y,v=c-o,p=f*f+l*l;if(v*v/u<p)return p<s&&(0===f&&(p+=(f=Ie(n))*f),0===l&&(p+=(l=Ie(n))*l),p<a&&(p=Math.sqrt(a*p)),r.vx+=f*t.value*e/p,r.vy+=l*t.value*e/p),!0;if(!(t.length||p>=s)){(t.data!==r||t.next)&&(0===f&&(p+=(f=Ie(n))*f),0===l&&(p+=(l=Ie(n))*l),p<a&&(p=Math.sqrt(a*p)));do{t.data!==r&&(v=i[t.data.index]*e/p,r.vx+=f*v,r.vy+=l*v)}while(t=t.next)}}return h.initialize=function(r,e){t=r,n=e,c()},h.strength=function(t){return arguments.length?(o="function"===typeof t?t:Ce(+t),c(),h):o},h.distanceMin=function(t){return arguments.length?(a=t*t,h):Math.sqrt(a)},h.distanceMax=function(t){return arguments.length?(s=t*t,h):Math.sqrt(s)},h.theta=function(t){return arguments.length?(u=t*t,h):Math.sqrt(u)},h}().strength(-30)).force("collide",function(t){var r,n,e,i=1,o=1;function a(){for(var t,a,u,h,c,f,l,v=r.length,p=0;p<o;++p)for(a=je(r,Te,Le).visitAfter(s),t=0;t<v;++t)u=r[t],f=n[u.index],l=f*f,h=u.x+u.vx,c=u.y+u.vy,a.visit(g);function g(t,r,n,o,a){var s=t.data,v=t.r,p=f+v;if(!s)return r>h+p||o<h-p||n>c+p||a<c-p;if(s.index>u.index){var g=h-s.x-s.vx,m=c-s.y-s.vy,d=g*g+m*m;d<p*p&&(0===g&&(d+=(g=Ie(e))*g),0===m&&(d+=(m=Ie(e))*m),d=(p-(d=Math.sqrt(d)))/d*i,u.vx+=(g*=d)*(p=(v*=v)/(l+v)),u.vy+=(m*=d)*p,s.vx-=g*(p=1-p),s.vy-=m*p)}}}function s(t){if(t.data)return t.r=n[t.data.index];for(var r=t.r=0;r<4;++r)t[r]&&t[r].r>t.r&&(t.r=t[r].r)}function u(){if(r){var e,i,o=r.length;for(n=new Array(o),e=0;e<o;++e)i=r[e],n[i.index]=+t(i,e,r)}}return"function"!==typeof t&&(t=Ce(null==t?1:+t)),a.initialize=function(t,n){r=t,e=n,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(r){return arguments.length?(t="function"===typeof r?r:Ce(+r),u(),a):t},a}().radius(n+1)).stop().tick(300),r.map((t=>[t.x,t.y]))}{const r=(t,r)=>ji(e[t],e[r],Pi.distMetric),n=Oi()("hello."),o={distanceFn:r,nNeighbors:Math.round(Ci(i)),minDist:.1,random:n},a=new N.UMAP(o);return console.log("Calling UMAP... #nodes =",i," params = ",o),a.fit(t)}}})},function(t,r,n){"use strict";n.r(r),n.d(r,"default",(function(){return et}));var e=Object.prototype.toString;function i(t){return e.call(t).endsWith("Array]")}function o(t,r,n){for(var e=0,i=n(r),o=0;o<t.x.length;o++)e+=Math.abs(t.y[o]-i(t.x[o]));return e}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,r){return!r||"object"!==a(r)&&"function"!==typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}var u=n(15);function h(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Object(u.a)(t,r)}var c=n(19),f=n(16);function l(t){var r=Object(f.a)();return function(){var n,e=Object(c.a)(t);if(r){var i=Object(c.a)(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return s(this,n)}}var v=n(2),p=n(3);var g=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=r.fromIndex,e=void 0===n?0:n,o=r.toIndex,a=void 0===o?t.length:o;if(e<0||e>=t.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[e],u=e+1;u<a;u++)t[u]>s&&(s=t[u]);return s};var m=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var n=r.fromIndex,e=void 0===n?0:n,o=r.toIndex,a=void 0===o?t.length:o;if(e<0||e>=t.length||!Number.isInteger(e))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=e||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=t[e],u=e+1;u<a;u++)t[u]<s&&(s=t[u]);return s};var d=function(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!i(n.output))throw new TypeError("output option must be an array if specified");r=n.output}else r=new Array(t.length);var e=m(t),o=g(t);if(e===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=n.min,s=void 0===a?n.autoMinMax?e:0:a,u=n.max,h=void 0===u?n.autoMinMax?o:1:u;if(s>=h)throw new RangeError("min option must be smaller than max option");for(var c=(h-s)/(o-e),f=0;f<t.length;f++)r[f]=(t[f]-e)*c+s;return r},y=" ".repeat(2),w=" ".repeat(4);function b(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.maxRows,e=void 0===n?15:n,i=r.maxColumns,o=void 0===i?10:i,a=r.maxNumSize,s=void 0===a?8:a;return"".concat(t.constructor.name," {\n").concat(y,"[\n").concat(w).concat(x(t,e,o,s),"\n").concat(y,"]\n").concat(y,"rows: ").concat(t.rows,"\n").concat(y,"columns: ").concat(t.columns,"\n}")}function x(t,r,n,e){for(var i=t.rows,o=t.columns,a=Math.min(i,r),s=Math.min(o,n),u=[],h=0;h<a;h++){for(var c=[],f=0;f<s;f++)c.push(M(t.get(h,f),e));u.push("".concat(c.join(" ")))}return s!==o&&(u[u.length-1]+=" ... ".concat(o-n," more columns")),a!==i&&u.push("... ".concat(i-r," more rows")),u.join("\n".concat(w))}function M(t,r){var n=String(t);if(n.length<=r)return n.padEnd(r," ");var e=t.toPrecision(r-2);if(e.length<=r)return e;var i=t.toExponential(r-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,r-a.length)+a}function _(t,r,n){var e=n?t.rows:t.rows-1;if(r<0||r>e)throw new RangeError("Row index out of range")}function k(t,r,n){var e=n?t.columns:t.columns-1;if(r<0||r>e)throw new RangeError("Column index out of range")}function S(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function E(t,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function N(t,r){if("object"!==typeof r)throw new TypeError("unexpected type for row indices");if(r.some((function(r){return r<0||r>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function A(t,r){if("object"!==typeof r)throw new TypeError("unexpected type for column indices");if(r.some((function(r){return r<0||r>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function R(t,r,n,e,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(z("startRow",r),z("endRow",n),z("startColumn",e),z("endColumn",i),r>n||e>i||r<0||r>=t.rows||n<0||n>=t.rows||e<0||e>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function j(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],e=0;e<t;e++)n.push(r);return n}function z(t,r){if("number"!==typeof r)throw new TypeError("".concat(t," must be a number"))}function O(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function P(t,r,n){for(var e=t.rows,i=t.columns,o=[],a=0;a<e;a++){for(var s=0,u=0,h=0,c=0;c<i;c++)s+=h=t.get(a,c)-n[a],u+=h*h;r?o.push((u-s*s/i)/(i-1)):o.push((u-s*s/i)/i)}return o}function C(t,r,n){for(var e=t.rows,i=t.columns,o=[],a=0;a<i;a++){for(var s=0,u=0,h=0,c=0;c<e;c++)s+=h=t.get(c,a)-n[a],u+=h*h;r?o.push((u-s*s/e)/(e-1)):o.push((u-s*s/e)/e)}return o}function I(t,r,n){for(var e=t.rows,i=t.columns,o=e*i,a=0,s=0,u=0,h=0;h<e;h++)for(var c=0;c<i;c++)a+=u=t.get(h,c)-n,s+=u*u;return r?(s-a*a/o)/(o-1):(s-a*a/o)/o}function T(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)-r[n])}function L(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)-r[e])}function q(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)-r)}function F(t){for(var r=[],n=0;n<t.rows;n++){for(var e=0,i=0;i<t.columns;i++)e+=Math.pow(t.get(n,i),2)/(t.columns-1);r.push(Math.sqrt(e))}return r}function D(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)/r[n])}function V(t){for(var r=[],n=0;n<t.columns;n++){for(var e=0,i=0;i<t.rows;i++)e+=Math.pow(t.get(i,n),2)/(t.rows-1);r.push(Math.sqrt(e))}return r}function X(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)/r[e])}function U(t){for(var r=t.size-1,n=0,e=0;e<t.columns;e++)for(var i=0;i<t.rows;i++)n+=Math.pow(t.get(i,e),2)/r;return Math.sqrt(n)}function G(t,r){for(var n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)t.set(n,e,t.get(n,e)/r)}var H=function(){function t(){Object(v.a)(this,t)}return Object(p.a)(t,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(t){if("function"!==typeof t)throw new TypeError("callback must be a function");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.call(this,r,n);return this}},{key:"to1DArray",value:function(){for(var t=[],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.push(this.get(r,n));return t}},{key:"to2DArray",value:function(){for(var t=[],r=0;r<this.rows;r++){t.push([]);for(var n=0;n<this.columns;n++)t[r].push(this.get(r,n))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return 0===this.rows||0===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var r=0;r<=t;r++)if(this.get(t,r)!==this.get(r,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,r=0,n=-1,e=!0,i=!1;t<this.rows&&e;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>n?(i=!0,n=r):(e=!1,i=!0);t++}return e}},{key:"isReducedEchelonForm",value:function(){for(var t=0,r=0,n=-1,e=!0,i=!1;t<this.rows&&e;){for(r=0,i=!1;r<this.columns&&!1===i;)0===this.get(t,r)?r++:1===this.get(t,r)&&r>n?(i=!0,n=r):(e=!1,i=!0);for(var o=r+1;o<this.rows;o++)0!==this.get(t,o)&&(e=!1);t++}return e}},{key:"echelonForm",value:function(){for(var t=this.clone(),r=0,n=0;r<t.rows&&n<t.columns;){for(var e=r,i=r;i<t.rows;i++)t.get(i,n)>t.get(e,n)&&(e=i);if(0===t.get(e,n))n++;else{t.swapRows(r,e);for(var o=t.get(r,n),a=n;a<t.columns;a++)t.set(r,a,t.get(r,a)/o);for(var s=r+1;s<t.rows;s++){var u=t.get(s,n)/t.get(r,n);t.set(s,n,0);for(var h=n+1;h<t.columns;h++)t.set(s,h,t.get(s,h)-t.get(r,h)*u)}r++,n++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),r=t.columns,n=t.rows,e=n-1;e>=0;)if(0===t.maxRow(e))e--;else{for(var i=0,o=!1;i<n&&!1===o;)1===t.get(e,i)?o=!0:i++;for(var a=0;a<e;a++)for(var s=t.get(a,i),u=i;u<r;u++){var h=t.get(a,u)-s*t.get(e,u);t.set(a,u,h)}e--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.rows,n=void 0===r?1:r,e=t.columns,i=void 0===e?1:e;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var o=new Q(this.rows*n,this.columns*i),a=0;a<n;a++)for(var s=0;s<i;s++)o.setSubMatrix(this,this.rows*a,this.columns*s);return o}},{key:"fill",value:function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){_(this,t);for(var r=[],n=0;n<this.columns;n++)r.push(this.get(t,n));return r}},{key:"getRowVector",value:function(t){return Q.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,r){_(this,t),r=S(this,r);for(var n=0;n<this.columns;n++)this.set(t,n,r[n]);return this}},{key:"swapRows",value:function(t,r){_(this,t),_(this,r);for(var n=0;n<this.columns;n++){var e=this.get(t,n);this.set(t,n,this.get(r,n)),this.set(r,n,e)}return this}},{key:"getColumn",value:function(t){k(this,t);for(var r=[],n=0;n<this.rows;n++)r.push(this.get(n,t));return r}},{key:"getColumnVector",value:function(t){return Q.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,r){k(this,t),r=E(this,r);for(var n=0;n<this.rows;n++)this.set(n,t,r[n]);return this}},{key:"swapColumns",value:function(t,r){k(this,t),k(this,r);for(var n=0;n<this.rows;n++){var e=this.get(n,t);this.set(n,t,this.get(n,r)),this.set(n,r,e)}return this}},{key:"addRowVector",value:function(t){t=S(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[n]);return this}},{key:"subRowVector",value:function(t){t=S(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[n]);return this}},{key:"mulRowVector",value:function(t){t=S(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[n]);return this}},{key:"divRowVector",value:function(t){t=S(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[n]);return this}},{key:"addColumnVector",value:function(t){t=E(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t[r]);return this}},{key:"subColumnVector",value:function(t){t=E(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t[r]);return this}},{key:"mulColumnVector",value:function(t){t=E(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t[r]);return this}},{key:"divColumnVector",value:function(t){t=E(this,t);for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t[r]);return this}},{key:"mulRow",value:function(t,r){_(this,t);for(var n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*r);return this}},{key:"mulColumn",value:function(t,r){k(this,t);for(var n=0;n<this.rows;n++)this.set(n,t,this.get(n,t)*r);return this}},{key:"max",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n));return t}},{key:"maxIndex",value:function(){O(this);for(var t=this.get(0,0),r=[0,0],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.get(n,e)>t&&(t=this.get(n,e),r[0]=n,r[1]=e);return r}},{key:"min",value:function(){if(this.isEmpty())return NaN;for(var t=this.get(0,0),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n));return t}},{key:"minIndex",value:function(){O(this);for(var t=this.get(0,0),r=[0,0],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.get(n,e)<t&&(t=this.get(n,e),r[0]=n,r[1]=e);return r}},{key:"maxRow",value:function(t){if(_(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)>r&&(r=this.get(t,n));return r}},{key:"maxRowIndex",value:function(t){_(this,t),O(this);for(var r=this.get(t,0),n=[t,0],e=1;e<this.columns;e++)this.get(t,e)>r&&(r=this.get(t,e),n[1]=e);return n}},{key:"minRow",value:function(t){if(_(this,t),this.isEmpty())return NaN;for(var r=this.get(t,0),n=1;n<this.columns;n++)this.get(t,n)<r&&(r=this.get(t,n));return r}},{key:"minRowIndex",value:function(t){_(this,t),O(this);for(var r=this.get(t,0),n=[t,0],e=1;e<this.columns;e++)this.get(t,e)<r&&(r=this.get(t,e),n[1]=e);return n}},{key:"maxColumn",value:function(t){if(k(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)>r&&(r=this.get(n,t));return r}},{key:"maxColumnIndex",value:function(t){k(this,t),O(this);for(var r=this.get(0,t),n=[0,t],e=1;e<this.rows;e++)this.get(e,t)>r&&(r=this.get(e,t),n[0]=e);return n}},{key:"minColumn",value:function(t){if(k(this,t),this.isEmpty())return NaN;for(var r=this.get(0,t),n=1;n<this.rows;n++)this.get(n,t)<r&&(r=this.get(n,t));return r}},{key:"minColumnIndex",value:function(t){k(this,t),O(this);for(var r=this.get(0,t),n=[0,t],e=1;e<this.rows;e++)this.get(e,t)<r&&(r=this.get(e,t),n[0]=e);return n}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),r=[],n=0;n<t;n++)r.push(this.get(n,n));return r}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",r=0;if("max"===t)return this.max();if("frobenius"===t){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r+=this.get(n,e)*this.get(n,e);return Math.sqrt(r)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t+=this.get(r,n),this.set(r,n,t);return this}},{key:"dot",value:function(r){t.isMatrix(r)&&(r=r.to1DArray());var n=this.to1DArray();if(n.length!==r.length)throw new RangeError("vectors do not have the same size");for(var e=0,i=0;i<n.length;i++)e+=n[i]*r[i];return e}},{key:"mmul",value:function(t){t=Q.checkMatrix(t);for(var r=this.rows,n=this.columns,e=t.columns,i=new Q(r,e),o=new Float64Array(n),a=0;a<e;a++){for(var s=0;s<n;s++)o[s]=t.get(s,a);for(var u=0;u<r;u++){for(var h=0,c=0;c<n;c++)h+=this.get(u,c)*o[c];i.set(u,a,h)}}return i}},{key:"strassen2x2",value:function(t){t=Q.checkMatrix(t);var r=new Q(2,2),n=this.get(0,0),e=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),h=t.get(1,1),c=(n+u)*(e+h),f=(a+u)*e,l=n*(o-h),v=u*(s-e),p=(n+i)*h,g=c+v-p+(i-u)*(s+h),m=l+p,d=f+v,y=c-f+l+(a-n)*(e+o);return r.set(0,0,g),r.set(0,1,m),r.set(1,0,d),r.set(1,1,y),r}},{key:"strassen3x3",value:function(t){t=Q.checkMatrix(t);var r=new Q(3,3),n=this.get(0,0),e=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),f=t.get(0,0),l=t.get(0,1),v=t.get(0,2),p=t.get(1,0),g=t.get(1,1),m=t.get(1,2),d=t.get(2,0),y=t.get(2,1),w=t.get(2,2),b=(n-o)*(-l+g),x=(-n+o+a)*(f-l+g),M=(o+a)*(-f+l),_=n*f,k=(-n+u+h)*(f-v+m),S=(-n+u)*(v-m),E=(u+h)*(-f+v),N=(-i+h+c)*(g+d-y),A=(i-c)*(g-y),R=i*d,j=(h+c)*(-d+y),z=(-i+a+s)*(m+d-w),O=(i-s)*(m-w),P=(a+s)*(-d+w),C=_+R+e*p,I=(n+e+i-o-a-h-c)*g+x+M+_+N+R+j,T=_+k+E+(n+e+i-a-s-u-h)*m+R+z+P,L=b+a*(-f+l+p-g-m-d+w)+x+_+R+z+O,q=b+x+M+_+s*y,F=R+z+O+P+o*v,D=_+k+S+h*(-f+v+p-g-m-d+y)+N+A+R,V=N+A+R+j+u*l,X=_+k+S+E+c*w;return r.set(0,0,C),r.set(0,1,I),r.set(0,2,T),r.set(1,0,L),r.set(1,1,q),r.set(1,2,F),r.set(2,0,D),r.set(2,1,V),r.set(2,2,X),r}},{key:"mmulStrassen",value:function(r){r=Q.checkMatrix(r);var n=this.clone(),e=n.rows,i=n.columns,o=r.rows,a=r.columns;function s(r,n,e){var i=r.rows,o=r.columns;if(i===n&&o===e)return r;var a=t.zeros(n,e);return a=a.setSubMatrix(r,0,0)}i!==o&&console.warn("Multiplying ".concat(e," x ").concat(i," and ").concat(o," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(e,o),h=Math.max(i,a);return function r(n,e,i,o){if(i<=512||o<=512)return n.mmul(e);i%2===1&&o%2===1?(n=s(n,i+1,o+1),e=s(e,i+1,o+1)):i%2===1?(n=s(n,i+1,o),e=s(e,i+1,o)):o%2===1&&(n=s(n,i,o+1),e=s(e,i,o+1));var a=parseInt(n.rows/2,10),u=parseInt(n.columns/2,10),h=n.subMatrix(0,a-1,0,u-1),c=e.subMatrix(0,a-1,0,u-1),f=n.subMatrix(0,a-1,u,n.columns-1),l=e.subMatrix(0,a-1,u,e.columns-1),v=n.subMatrix(a,n.rows-1,0,u-1),p=e.subMatrix(a,e.rows-1,0,u-1),g=n.subMatrix(a,n.rows-1,u,n.columns-1),m=e.subMatrix(a,e.rows-1,u,e.columns-1),d=r(t.add(h,g),t.add(c,m),a,u),y=r(t.add(v,g),c,a,u),w=r(h,t.sub(l,m),a,u),b=r(g,t.sub(p,c),a,u),x=r(t.add(h,f),m,a,u),M=r(t.sub(v,h),t.add(c,l),a,u),_=r(t.sub(f,g),t.add(p,m),a,u),k=t.add(d,b);k.sub(x),k.add(_);var S=t.add(w,x),E=t.add(y,b),N=t.sub(d,y);N.add(w),N.add(M);var A=t.zeros(2*k.rows,2*k.columns);return(A=(A=(A=(A=A.setSubMatrix(k,0,0)).setSubMatrix(S,k.rows,0)).setSubMatrix(E,0,k.columns)).setSubMatrix(N,k.rows,k.columns)).subMatrix(0,i-1,0,o-1)}(n=s(n,u,h),r=s(r,u,h),u,h)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.min,n=void 0===r?0:r,e=t.max,i=void 0===e?1:e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new Q(this.rows,this.columns),a=0;a<this.rows;a++){var s=this.getRow(a);s.length>0&&d(s,{min:n,max:i,output:s}),o.setRow(a,s)}return o}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==typeof t)throw new TypeError("options must be an object");var r=t.min,n=void 0===r?0:r,e=t.max,i=void 0===e?1:e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(n>=i)throw new RangeError("min must be smaller than max");for(var o=new Q(this.rows,this.columns),a=0;a<this.columns;a++){var s=this.getColumn(a);s.length&&d(s,{min:n,max:i,output:s}),o.setColumn(a,s)}return o}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),r=0;r<this.rows;r++)for(var n=0;n<t;n++){var e=this.get(r,n),i=this.get(r,this.columns-1-n);this.set(r,n,i),this.set(r,this.columns-1-n,e)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),r=0;r<this.columns;r++)for(var n=0;n<t;n++){var e=this.get(n,r),i=this.get(this.rows-1-n,r);this.set(n,r,i),this.set(this.rows-1-n,r,e)}return this}},{key:"kroneckerProduct",value:function(t){t=Q.checkMatrix(t);for(var r=this.rows,n=this.columns,e=t.rows,i=t.columns,o=new Q(r*e,n*i),a=0;a<r;a++)for(var s=0;s<n;s++)for(var u=0;u<e;u++)for(var h=0;h<i;h++)o.set(e*a+u,i*s+h,this.get(a,s)*t.get(u,h));return o}},{key:"transpose",value:function(){for(var t=new Q(this.columns,this.rows),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.set(n,r,this.get(r,n));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(t));return this}},{key:"subMatrix",value:function(t,r,n,e){R(this,t,r,n,e);for(var i=new Q(r-t+1,e-n+1),o=t;o<=r;o++)for(var a=n;a<=e;a++)i.set(o-t,a-n,this.get(o,a));return i}},{key:"subMatrixRow",value:function(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=this.columns-1),r>n||r<0||r>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");for(var e=new Q(t.length,n-r+1),i=0;i<t.length;i++)for(var o=r;o<=n;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[i]));e.set(i,o-r,this.get(t[i],o))}return e}},{key:"subMatrixColumn",value:function(t,r,n){if(void 0===r&&(r=0),void 0===n&&(n=this.rows-1),r>n||r<0||r>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");for(var e=new Q(n-r+1,t.length),i=0;i<t.length;i++)for(var o=r;o<=n;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[i]));e.set(o-r,i,this.get(o,t[i]))}return e}},{key:"setSubMatrix",value:function(t,r,n){if((t=Q.checkMatrix(t)).isEmpty())return this;R(this,r,r+t.rows-1,n,n+t.columns-1);for(var e=0;e<t.rows;e++)for(var i=0;i<t.columns;i++)this.set(r+e,n+i,t.get(e,i));return this}},{key:"selection",value:function(t,r){for(var n=function(t,r,n){return{row:N(t,r),column:A(t,n)}}(this,t,r),e=new Q(t.length,r.length),i=0;i<n.row.length;i++)for(var o=n.row[i],a=0;a<n.column.length;a++){var s=n.column[a];e.set(i,a,this.get(o,s))}return e}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),r=0,n=0;n<t;n++)r+=this.get(n,n);return r}},{key:"clone",value:function(){for(var t=new Q(this.rows,this.columns),r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)t.set(r,n,this.get(r,n));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var r=j(t.rows),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r[n]+=t.get(n,e);return r}(this);case"column":return function(t){for(var r=j(t.columns),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r[e]+=t.get(n,e);return r}(this);case void 0:return function(t){for(var r=0,n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)r+=t.get(n,e);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var r=j(t.rows,1),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r[n]*=t.get(n,e);return r}(this);case"column":return function(t){for(var r=j(t.columns,1),n=0;n<t.rows;++n)for(var e=0;e<t.columns;++e)r[e]*=t.get(n,e);return r}(this);case void 0:return function(t){for(var r=1,n=0;n<t.rows;n++)for(var e=0;e<t.columns;e++)r*=t.get(n,e);return r}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var r=this.sum(t);switch(t){case"row":for(var n=0;n<this.rows;n++)r[n]/=this.columns;return r;case"column":for(var e=0;e<this.columns;e++)r[e]/=this.rows;return r;case void 0:return r/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var n=r,e=n.unbiased,i=void 0===e||e,o=n.mean,a=void 0===o?this.mean(t):o;if("boolean"!==typeof i)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return P(this,i,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return C(this,i,a);case void 0:if("number"!==typeof a)throw new TypeError("mean must be a number");return I(this,i,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,r){"object"===typeof t&&(r=t,t=void 0);var n=this.variance(t,r);if(void 0===t)return Math.sqrt(n);for(var e=0;e<n.length;e++)n[e]=Math.sqrt(n[e]);return n}},{key:"center",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var n=r,e=n.center,i=void 0===e?this.mean(t):e;switch(t){case"row":if(!Array.isArray(i))throw new TypeError("center must be an array");return T(this,i),this;case"column":if(!Array.isArray(i))throw new TypeError("center must be an array");return L(this,i),this;case void 0:if("number"!==typeof i)throw new TypeError("center must be a number");return q(this,i),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===typeof t&&(r=t,t=void 0),"object"!==typeof r)throw new TypeError("options must be an object");var n=r.scale;switch(t){case"row":if(void 0===n)n=F(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return D(this,n),this;case"column":if(void 0===n)n=V(this);else if(!Array.isArray(n))throw new TypeError("scale must be an array");return X(this,n),this;case void 0:if(void 0===n)n=U(this);else if("number"!==typeof n)throw new TypeError("scale must be a number");return G(this,n),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return b(this,t)}}],[{key:"from1DArray",value:function(t,r,n){if(t*r!==n.length)throw new RangeError("data length does not match given dimensions");for(var e=new Q(t,r),i=0;i<t;i++)for(var o=0;o<r;o++)e.set(i,o,n[i*r+o]);return e}},{key:"rowVector",value:function(t){for(var r=new Q(1,t.length),n=0;n<t.length;n++)r.set(0,n,t[n]);return r}},{key:"columnVector",value:function(t){for(var r=new Q(t.length,1),n=0;n<t.length;n++)r.set(n,0,t[n]);return r}},{key:"zeros",value:function(t,r){return new Q(t,r)}},{key:"ones",value:function(t,r){return new Q(t,r).fill(1)}},{key:"rand",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");for(var e=n.random,i=void 0===e?Math.random:e,o=new Q(t,r),a=0;a<t;a++)for(var s=0;s<r;s++)o.set(a,s,i());return o}},{key:"randInt",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==typeof n)throw new TypeError("options must be an object");var e=n.min,i=void 0===e?0:e,o=n.max,a=void 0===o?1e3:o,s=n.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");for(var h=a-i,c=new Q(t,r),f=0;f<t;f++)for(var l=0;l<r;l++){var v=i+Math.round(u()*h);c.set(f,l,v)}return c}},{key:"eye",value:function(t,r,n){void 0===r&&(r=t),void 0===n&&(n=1);for(var e=Math.min(t,r),i=this.zeros(t,r),o=0;o<e;o++)i.set(o,o,n);return i}},{key:"diag",value:function(t,r,n){var e=t.length;void 0===r&&(r=e),void 0===n&&(n=r);for(var i=Math.min(e,r,n),o=this.zeros(r,n),a=0;a<i;a++)o.set(a,a,t[a]);return o}},{key:"min",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var n=t.rows,e=t.columns,i=new Q(n,e),o=0;o<n;o++)for(var a=0;a<e;a++)i.set(o,a,Math.min(t.get(o,a),r.get(o,a)));return i}},{key:"max",value:function(t,r){t=this.checkMatrix(t),r=this.checkMatrix(r);for(var n=t.rows,e=t.columns,i=new this(n,e),o=0;o<n;o++)for(var a=0;a<e;a++)i.set(o,a,Math.max(t.get(o,a),r.get(o,a)));return i}},{key:"checkMatrix",value:function(r){return t.isMatrix(r)?r:new Q(r)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function Y(t,r){return t-r}H.prototype.klass="Matrix","undefined"!==typeof Symbol&&(H.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return b(this)}),H.random=H.rand,H.randomInt=H.randInt,H.diagonal=H.diag,H.prototype.diagonal=H.prototype.diag,H.identity=H.eye,H.prototype.negate=H.prototype.neg,H.prototype.tensorProduct=H.prototype.kroneckerProduct;var B,$,Q=function(t){h(n,t);var r=l(n);function n(t,e){var i;if(Object(v.a)(this,n),i=r.call(this),n.isMatrix(t))return s(i,t.clone());if(Number.isInteger(t)&&t>=0){if(i.data=[],!(Number.isInteger(e)&&e>=0))throw new TypeError("nColumns must be a positive integer");for(var o=0;o<t;o++)i.data.push(new Float64Array(e))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if("number"!==typeof(e=(t=a.length)?a[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var u=0;u<t;u++){if(a[u].length!==e)throw new RangeError("Inconsistent array dimensions");i.data.push(Float64Array.from(a[u]))}}return i.rows=t,i.columns=e,i}return Object(p.a)(n,[{key:"set",value:function(t,r,n){return this.data[t][r]=n,this}},{key:"get",value:function(t,r){return this.data[t][r]}},{key:"removeRow",value:function(t){return _(this,t),this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,r){return void 0===r&&(r=t,t=this.rows),_(this,t,!0),r=Float64Array.from(S(this,r)),this.data.splice(t,0,r),this.rows+=1,this}},{key:"removeColumn",value:function(t){k(this,t);for(var r=0;r<this.rows;r++){for(var n=new Float64Array(this.columns-1),e=0;e<t;e++)n[e]=this.data[r][e];for(var i=t+1;i<this.columns;i++)n[i-1]=this.data[r][i];this.data[r]=n}return this.columns-=1,this}},{key:"addColumn",value:function(t,r){"undefined"===typeof r&&(r=t,t=this.columns),k(this,t,!0),r=E(this,r);for(var n=0;n<this.rows;n++){for(var e=new Float64Array(this.columns+1),i=0;i<t;i++)e[i]=this.data[n][i];for(e[i++]=r[n];i<this.columns+1;i++)e[i]=this.data[n][i-1];this.data[n]=e}return this.columns+=1,this}}]),n}(H);$=Q,(B=H).prototype.add=function(t){return"number"===typeof t?this.addS(t):this.addM(t)},B.prototype.addS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t);return this},B.prototype.addM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)+t.get(r,n));return this},B.add=function(t,r){return new $(t).add(r)},B.prototype.sub=function(t){return"number"===typeof t?this.subS(t):this.subM(t)},B.prototype.subS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t);return this},B.prototype.subM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)-t.get(r,n));return this},B.sub=function(t,r){return new $(t).sub(r)},B.prototype.subtract=B.prototype.sub,B.prototype.subtractS=B.prototype.subS,B.prototype.subtractM=B.prototype.subM,B.subtract=B.sub,B.prototype.mul=function(t){return"number"===typeof t?this.mulS(t):this.mulM(t)},B.prototype.mulS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t);return this},B.prototype.mulM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)*t.get(r,n));return this},B.mul=function(t,r){return new $(t).mul(r)},B.prototype.multiply=B.prototype.mul,B.prototype.multiplyS=B.prototype.mulS,B.prototype.multiplyM=B.prototype.mulM,B.multiply=B.mul,B.prototype.div=function(t){return"number"===typeof t?this.divS(t):this.divM(t)},B.prototype.divS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t);return this},B.prototype.divM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)/t.get(r,n));return this},B.div=function(t,r){return new $(t).div(r)},B.prototype.divide=B.prototype.div,B.prototype.divideS=B.prototype.divS,B.prototype.divideM=B.prototype.divM,B.divide=B.div,B.prototype.mod=function(t){return"number"===typeof t?this.modS(t):this.modM(t)},B.prototype.modS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%t);return this},B.prototype.modM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)%t.get(r,n));return this},B.mod=function(t,r){return new $(t).mod(r)},B.prototype.modulus=B.prototype.mod,B.prototype.modulusS=B.prototype.modS,B.prototype.modulusM=B.prototype.modM,B.modulus=B.mod,B.prototype.and=function(t){return"number"===typeof t?this.andS(t):this.andM(t)},B.prototype.andS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&t);return this},B.prototype.andM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)&t.get(r,n));return this},B.and=function(t,r){return new $(t).and(r)},B.prototype.or=function(t){return"number"===typeof t?this.orS(t):this.orM(t)},B.prototype.orS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|t);return this},B.prototype.orM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)|t.get(r,n));return this},B.or=function(t,r){return new $(t).or(r)},B.prototype.xor=function(t){return"number"===typeof t?this.xorS(t):this.xorM(t)},B.prototype.xorS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^t);return this},B.prototype.xorM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)^t.get(r,n));return this},B.xor=function(t,r){return new $(t).xor(r)},B.prototype.leftShift=function(t){return"number"===typeof t?this.leftShiftS(t):this.leftShiftM(t)},B.prototype.leftShiftS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<t);return this},B.prototype.leftShiftM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)<<t.get(r,n));return this},B.leftShift=function(t,r){return new $(t).leftShift(r)},B.prototype.signPropagatingRightShift=function(t){return"number"===typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},B.prototype.signPropagatingRightShiftS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>t);return this},B.prototype.signPropagatingRightShiftM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>t.get(r,n));return this},B.signPropagatingRightShift=function(t,r){return new $(t).signPropagatingRightShift(r)},B.prototype.rightShift=function(t){return"number"===typeof t?this.rightShiftS(t):this.rightShiftM(t)},B.prototype.rightShiftS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>t);return this},B.prototype.rightShiftM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,this.get(r,n)>>>t.get(r,n));return this},B.rightShift=function(t,r){return new $(t).rightShift(r)},B.prototype.zeroFillRightShift=B.prototype.rightShift,B.prototype.zeroFillRightShiftS=B.prototype.rightShiftS,B.prototype.zeroFillRightShiftM=B.prototype.rightShiftM,B.zeroFillRightShift=B.rightShift,B.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,~this.get(t,r));return this},B.not=function(t){return new $(t).not()},B.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.abs(this.get(t,r)));return this},B.abs=function(t){return new $(t).abs()},B.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.acos(this.get(t,r)));return this},B.acos=function(t){return new $(t).acos()},B.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.acosh(this.get(t,r)));return this},B.acosh=function(t){return new $(t).acosh()},B.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.asin(this.get(t,r)));return this},B.asin=function(t){return new $(t).asin()},B.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.asinh(this.get(t,r)));return this},B.asinh=function(t){return new $(t).asinh()},B.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.atan(this.get(t,r)));return this},B.atan=function(t){return new $(t).atan()},B.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.atanh(this.get(t,r)));return this},B.atanh=function(t){return new $(t).atanh()},B.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cbrt(this.get(t,r)));return this},B.cbrt=function(t){return new $(t).cbrt()},B.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.ceil(this.get(t,r)));return this},B.ceil=function(t){return new $(t).ceil()},B.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.clz32(this.get(t,r)));return this},B.clz32=function(t){return new $(t).clz32()},B.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cos(this.get(t,r)));return this},B.cos=function(t){return new $(t).cos()},B.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.cosh(this.get(t,r)));return this},B.cosh=function(t){return new $(t).cosh()},B.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.exp(this.get(t,r)));return this},B.exp=function(t){return new $(t).exp()},B.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.expm1(this.get(t,r)));return this},B.expm1=function(t){return new $(t).expm1()},B.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.floor(this.get(t,r)));return this},B.floor=function(t){return new $(t).floor()},B.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.fround(this.get(t,r)));return this},B.fround=function(t){return new $(t).fround()},B.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log(this.get(t,r)));return this},B.log=function(t){return new $(t).log()},B.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log1p(this.get(t,r)));return this},B.log1p=function(t){return new $(t).log1p()},B.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log10(this.get(t,r)));return this},B.log10=function(t){return new $(t).log10()},B.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.log2(this.get(t,r)));return this},B.log2=function(t){return new $(t).log2()},B.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.round(this.get(t,r)));return this},B.round=function(t){return new $(t).round()},B.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sign(this.get(t,r)));return this},B.sign=function(t){return new $(t).sign()},B.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sin(this.get(t,r)));return this},B.sin=function(t){return new $(t).sin()},B.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sinh(this.get(t,r)));return this},B.sinh=function(t){return new $(t).sinh()},B.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.sqrt(this.get(t,r)));return this},B.sqrt=function(t){return new $(t).sqrt()},B.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.tan(this.get(t,r)));return this},B.tan=function(t){return new $(t).tan()},B.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.tanh(this.get(t,r)));return this},B.tanh=function(t){return new $(t).tanh()},B.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var r=0;r<this.columns;r++)this.set(t,r,Math.trunc(this.get(t,r)));return this},B.trunc=function(t){return new $(t).trunc()},B.pow=function(t,r){return new $(t).pow(r)},B.prototype.pow=function(t){return"number"===typeof t?this.powS(t):this.powM(t)},B.prototype.powS=function(t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),t));return this},B.prototype.powM=function(t){if(t=$.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.set(r,n,Math.pow(this.get(r,n),t.get(r,n)));return this};var K=function(t){h(n,t);var r=l(n);function n(t){var e;return Object(v.a)(this,n),(e=r.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return Object(p.a)(n,[{key:"set",value:function(t,r,n){return this.data[t][r]=n,this}},{key:"get",value:function(t,r){return this.data[t][r]}}]),n}(H),W=function(){function t(r){Object(v.a)(this,t);var n,e,i,o,a,s,u,h,c,f=(r=K.checkMatrix(r)).clone(),l=f.rows,p=f.columns,g=new Float64Array(l),m=1;for(n=0;n<l;n++)g[n]=n;for(h=new Float64Array(l),e=0;e<p;e++){for(n=0;n<l;n++)h[n]=f.get(n,e);for(n=0;n<l;n++){for(c=Math.min(n,e),a=0,i=0;i<c;i++)a+=f.get(n,i)*h[i];h[n]-=a,f.set(n,e,h[n])}for(o=e,n=e+1;n<l;n++)Math.abs(h[n])>Math.abs(h[o])&&(o=n);if(o!==e){for(i=0;i<p;i++)s=f.get(o,i),f.set(o,i,f.get(e,i)),f.set(e,i,s);u=g[o],g[o]=g[e],g[e]=u,m=-m}if(e<l&&0!==f.get(e,e))for(n=e+1;n<l;n++)f.set(n,e,f.get(n,e)/f.get(e,e))}this.LU=f,this.pivotVector=g,this.pivotSign=m}return Object(p.a)(t,[{key:"isSingular",value:function(){for(var t=this.LU,r=t.columns,n=0;n<r;n++)if(0===t.get(n,n))return!0;return!1}},{key:"solve",value:function(t){t=Q.checkMatrix(t);var r=this.LU;if(r.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var n,e,i,o=t.columns,a=t.subMatrixRow(this.pivotVector,0,o-1),s=r.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(e=0;e<o;e++)a.set(n,e,a.get(n,e)-a.get(i,e)*r.get(n,i));for(i=s-1;i>=0;i--){for(e=0;e<o;e++)a.set(i,e,a.get(i,e)/r.get(i,i));for(n=0;n<i;n++)for(e=0;e<o;e++)a.set(n,e,a.get(n,e)-a.get(i,e)*r.get(n,i))}return a}},{key:"determinant",get:function(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var r=this.pivotSign,n=t.columns,e=0;e<n;e++)r*=t.get(e,e);return r}},{key:"lowerTriangularMatrix",get:function(){for(var t=this.LU,r=t.rows,n=t.columns,e=new Q(r,n),i=0;i<r;i++)for(var o=0;o<n;o++)i>o?e.set(i,o,t.get(i,o)):i===o?e.set(i,o,1):e.set(i,o,0);return e}},{key:"upperTriangularMatrix",get:function(){for(var t=this.LU,r=t.rows,n=t.columns,e=new Q(r,n),i=0;i<r;i++)for(var o=0;o<n;o++)i<=o?e.set(i,o,t.get(i,o)):e.set(i,o,0);return e}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),t}();function Z(t,r){var n=0;return Math.abs(t)>Math.abs(r)?(n=r/t,Math.abs(t)*Math.sqrt(1+n*n)):0!==r?(n=t/r,Math.abs(r)*Math.sqrt(1+n*n)):0}var J=function(){function t(r){Object(v.a)(this,t);var n,e,i,o,a=(r=K.checkMatrix(r)).clone(),s=r.rows,u=r.columns,h=new Float64Array(u);for(i=0;i<u;i++){var c=0;for(n=i;n<s;n++)c=Z(c,a.get(n,i));if(0!==c){for(a.get(i,i)<0&&(c=-c),n=i;n<s;n++)a.set(n,i,a.get(n,i)/c);for(a.set(i,i,a.get(i,i)+1),e=i+1;e<u;e++){for(o=0,n=i;n<s;n++)o+=a.get(n,i)*a.get(n,e);for(o=-o/a.get(i,i),n=i;n<s;n++)a.set(n,e,a.get(n,e)+o*a.get(n,i))}}h[i]=-c}this.QR=a,this.Rdiag=h}return Object(p.a)(t,[{key:"solve",value:function(t){t=Q.checkMatrix(t);var r=this.QR,n=r.rows;if(t.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var e,i,o,a,s=t.columns,u=t.clone(),h=r.columns;for(o=0;o<h;o++)for(i=0;i<s;i++){for(a=0,e=o;e<n;e++)a+=r.get(e,o)*u.get(e,i);for(a=-a/r.get(o,o),e=o;e<n;e++)u.set(e,i,u.get(e,i)+a*r.get(e,o))}for(o=h-1;o>=0;o--){for(i=0;i<s;i++)u.set(o,i,u.get(o,i)/this.Rdiag[o]);for(e=0;e<o;e++)for(i=0;i<s;i++)u.set(e,i,u.get(e,i)-u.get(o,i)*r.get(e,o))}return u.subMatrix(0,h-1,0,s-1)}},{key:"isFullRank",value:function(){for(var t=this.QR.columns,r=0;r<t;r++)if(0===this.Rdiag[r])return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var t,r,n=this.QR,e=n.columns,i=new Q(e,e);for(t=0;t<e;t++)for(r=0;r<e;r++)t<r?i.set(t,r,n.get(t,r)):t===r?i.set(t,r,this.Rdiag[t]):i.set(t,r,0);return i}},{key:"orthogonalMatrix",get:function(){var t,r,n,e,i=this.QR,o=i.rows,a=i.columns,s=new Q(o,a);for(n=a-1;n>=0;n--){for(t=0;t<o;t++)s.set(t,n,0);for(s.set(n,n,1),r=n;r<a;r++)if(0!==i.get(n,n)){for(e=0,t=n;t<o;t++)e+=i.get(t,n)*s.get(t,r);for(e=-e/i.get(n,n),t=n;t<o;t++)s.set(t,r,s.get(t,r)+e*i.get(t,n))}}return s}}]),t}(),tt=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(v.a)(this,t),(r=K.checkMatrix(r)).isEmpty())throw new Error("Matrix must be non-empty");var e,i=r.rows,o=r.columns,a=n.computeLeftSingularVectors,s=void 0===a||a,u=n.computeRightSingularVectors,h=void 0===u||u,c=n.autoTranspose,f=void 0!==c&&c,l=Boolean(s),p=Boolean(h),g=!1;if(i<o)if(f){i=(e=r.transpose()).rows,o=e.columns,g=!0;var m=l;l=p,p=m}else e=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else e=r.clone();for(var d=Math.min(i,o),y=Math.min(i+1,o),w=new Float64Array(y),b=new Q(i,d),x=new Q(o,o),M=new Float64Array(o),_=new Float64Array(i),k=new Float64Array(y),S=0;S<y;S++)k[S]=S;for(var E=Math.min(i-1,o),N=Math.max(0,Math.min(o-2,i)),A=Math.max(E,N),R=0;R<A;R++){if(R<E){w[R]=0;for(var j=R;j<i;j++)w[R]=Z(w[R],e.get(j,R));if(0!==w[R]){e.get(R,R)<0&&(w[R]=-w[R]);for(var z=R;z<i;z++)e.set(z,R,e.get(z,R)/w[R]);e.set(R,R,e.get(R,R)+1)}w[R]=-w[R]}for(var O=R+1;O<o;O++){if(R<E&&0!==w[R]){for(var P=0,C=R;C<i;C++)P+=e.get(C,R)*e.get(C,O);P=-P/e.get(R,R);for(var I=R;I<i;I++)e.set(I,O,e.get(I,O)+P*e.get(I,R))}M[O]=e.get(R,O)}if(l&&R<E)for(var T=R;T<i;T++)b.set(T,R,e.get(T,R));if(R<N){M[R]=0;for(var L=R+1;L<o;L++)M[R]=Z(M[R],M[L]);if(0!==M[R]){M[R+1]<0&&(M[R]=0-M[R]);for(var q=R+1;q<o;q++)M[q]/=M[R];M[R+1]+=1}if(M[R]=-M[R],R+1<i&&0!==M[R]){for(var F=R+1;F<i;F++)_[F]=0;for(var D=R+1;D<i;D++)for(var V=R+1;V<o;V++)_[D]+=M[V]*e.get(D,V);for(var X=R+1;X<o;X++)for(var U=-M[X]/M[R+1],G=R+1;G<i;G++)e.set(G,X,e.get(G,X)+U*_[G])}if(p)for(var H=R+1;H<o;H++)x.set(H,R,M[H])}}var Y=Math.min(o,i+1);if(E<o&&(w[E]=e.get(E,E)),i<Y&&(w[Y-1]=0),N+1<Y&&(M[N]=e.get(N,Y-1)),M[Y-1]=0,l){for(var B=E;B<d;B++){for(var $=0;$<i;$++)b.set($,B,0);b.set(B,B,1)}for(var W=E-1;W>=0;W--)if(0!==w[W]){for(var J=W+1;J<d;J++){for(var tt=0,rt=W;rt<i;rt++)tt+=b.get(rt,W)*b.get(rt,J);tt=-tt/b.get(W,W);for(var nt=W;nt<i;nt++)b.set(nt,J,b.get(nt,J)+tt*b.get(nt,W))}for(var et=W;et<i;et++)b.set(et,W,-b.get(et,W));b.set(W,W,1+b.get(W,W));for(var it=0;it<W-1;it++)b.set(it,W,0)}else{for(var ot=0;ot<i;ot++)b.set(ot,W,0);b.set(W,W,1)}}if(p)for(var at=o-1;at>=0;at--){if(at<N&&0!==M[at])for(var st=at+1;st<o;st++){for(var ut=0,ht=at+1;ht<o;ht++)ut+=x.get(ht,at)*x.get(ht,st);ut=-ut/x.get(at+1,at);for(var ct=at+1;ct<o;ct++)x.set(ct,st,x.get(ct,st)+ut*x.get(ct,at))}for(var ft=0;ft<o;ft++)x.set(ft,at,0);x.set(at,at,1)}for(var lt=Y-1,vt=Number.EPSILON;Y>0;){var pt=void 0,gt=void 0;for(pt=Y-2;pt>=-1&&-1!==pt;pt--){var mt=Number.MIN_VALUE+vt*Math.abs(w[pt]+Math.abs(w[pt+1]));if(Math.abs(M[pt])<=mt||Number.isNaN(M[pt])){M[pt]=0;break}}if(pt===Y-2)gt=4;else{var dt=void 0;for(dt=Y-1;dt>=pt&&dt!==pt;dt--){var yt=(dt!==Y?Math.abs(M[dt]):0)+(dt!==pt+1?Math.abs(M[dt-1]):0);if(Math.abs(w[dt])<=vt*yt){w[dt]=0;break}}dt===pt?gt=3:dt===Y-1?gt=1:(gt=2,pt=dt)}switch(pt++,gt){case 1:var wt=M[Y-2];M[Y-2]=0;for(var bt=Y-2;bt>=pt;bt--){var xt=Z(w[bt],wt),Mt=w[bt]/xt,_t=wt/xt;if(w[bt]=xt,bt!==pt&&(wt=-_t*M[bt-1],M[bt-1]=Mt*M[bt-1]),p)for(var kt=0;kt<o;kt++)xt=Mt*x.get(kt,bt)+_t*x.get(kt,Y-1),x.set(kt,Y-1,-_t*x.get(kt,bt)+Mt*x.get(kt,Y-1)),x.set(kt,bt,xt)}break;case 2:var St=M[pt-1];M[pt-1]=0;for(var Et=pt;Et<Y;Et++){var Nt=Z(w[Et],St),At=w[Et]/Nt,Rt=St/Nt;if(w[Et]=Nt,St=-Rt*M[Et],M[Et]=At*M[Et],l)for(var jt=0;jt<i;jt++)Nt=At*b.get(jt,Et)+Rt*b.get(jt,pt-1),b.set(jt,pt-1,-Rt*b.get(jt,Et)+At*b.get(jt,pt-1)),b.set(jt,Et,Nt)}break;case 3:var zt=Math.max(Math.abs(w[Y-1]),Math.abs(w[Y-2]),Math.abs(M[Y-2]),Math.abs(w[pt]),Math.abs(M[pt])),Ot=w[Y-1]/zt,Pt=w[Y-2]/zt,Ct=M[Y-2]/zt,It=w[pt]/zt,Tt=M[pt]/zt,Lt=((Pt+Ot)*(Pt-Ot)+Ct*Ct)/2,qt=Ot*Ct*(Ot*Ct),Ft=0;0===Lt&&0===qt||(Ft=qt/(Lt+(Ft=Lt<0?0-Math.sqrt(Lt*Lt+qt):Math.sqrt(Lt*Lt+qt))));for(var Dt=(It+Ot)*(It-Ot)+Ft,Vt=It*Tt,Xt=pt;Xt<Y-1;Xt++){var Ut=Z(Dt,Vt);0===Ut&&(Ut=Number.MIN_VALUE);var Gt=Dt/Ut,Ht=Vt/Ut;if(Xt!==pt&&(M[Xt-1]=Ut),Dt=Gt*w[Xt]+Ht*M[Xt],M[Xt]=Gt*M[Xt]-Ht*w[Xt],Vt=Ht*w[Xt+1],w[Xt+1]=Gt*w[Xt+1],p)for(var Yt=0;Yt<o;Yt++)Ut=Gt*x.get(Yt,Xt)+Ht*x.get(Yt,Xt+1),x.set(Yt,Xt+1,-Ht*x.get(Yt,Xt)+Gt*x.get(Yt,Xt+1)),x.set(Yt,Xt,Ut);if(0===(Ut=Z(Dt,Vt))&&(Ut=Number.MIN_VALUE),Gt=Dt/Ut,Ht=Vt/Ut,w[Xt]=Ut,Dt=Gt*M[Xt]+Ht*w[Xt+1],w[Xt+1]=-Ht*M[Xt]+Gt*w[Xt+1],Vt=Ht*M[Xt+1],M[Xt+1]=Gt*M[Xt+1],l&&Xt<i-1)for(var Bt=0;Bt<i;Bt++)Ut=Gt*b.get(Bt,Xt)+Ht*b.get(Bt,Xt+1),b.set(Bt,Xt+1,-Ht*b.get(Bt,Xt)+Gt*b.get(Bt,Xt+1)),b.set(Bt,Xt,Ut)}M[Y-2]=Dt,1;break;case 4:if(w[pt]<=0&&(w[pt]=w[pt]<0?-w[pt]:0,p))for(var $t=0;$t<=lt;$t++)x.set($t,pt,-x.get($t,pt));for(;pt<lt&&!(w[pt]>=w[pt+1]);){var Qt=w[pt];if(w[pt]=w[pt+1],w[pt+1]=Qt,p&&pt<o-1)for(var Kt=0;Kt<o;Kt++)Qt=x.get(Kt,pt+1),x.set(Kt,pt+1,x.get(Kt,pt)),x.set(Kt,pt,Qt);if(l&&pt<i-1)for(var Wt=0;Wt<i;Wt++)Qt=b.get(Wt,pt+1),b.set(Wt,pt+1,b.get(Wt,pt)),b.set(Wt,pt,Qt);pt++}0,Y--}}if(g){var Zt=x;x=b,b=Zt}this.m=i,this.n=o,this.s=w,this.U=b,this.V=x}return Object(p.a)(t,[{key:"solve",value:function(t){for(var r=t,n=this.threshold,e=this.s.length,i=Q.zeros(e,e),o=0;o<e;o++)Math.abs(this.s[o])<=n?i.set(o,o,0):i.set(o,o,1/this.s[o]);for(var a=this.U,s=this.rightSingularVectors,u=s.mmul(i),h=s.rows,c=a.rows,f=Q.zeros(h,c),l=0;l<h;l++)for(var v=0;v<c;v++){for(var p=0,g=0;g<e;g++)p+=u.get(l,g)*a.get(v,g);f.set(l,v,p)}return f.mmul(r)}},{key:"solveForDiagonal",value:function(t){return this.solve(Q.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,r=this.threshold,n=t.rows,e=t.columns,i=new Q(n,this.s.length),o=0;o<n;o++)for(var a=0;a<e;a++)Math.abs(this.s[a])>r&&i.set(o,a,t.get(o,a)/this.s[a]);for(var s=this.U,u=s.rows,h=s.columns,c=new Q(n,u),f=0;f<n;f++)for(var l=0;l<u;l++){for(var v=0,p=0;p<h;p++)v+=i.get(f,p)*s.get(l,p);c.set(f,l,v)}return c}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,n=this.s,e=0,i=n.length;e<i;e++)n[e]>t&&r++;return r}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Q.diag(this.s)}}]),t}();function rt(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=K.checkMatrix(t),r=K.checkMatrix(r),n?new tt(t).solve(r):t.isSquare()?new W(t).solve(r):new J(t).solve(r)}function nt(t,r,n,e,i){for(var o=n*e*e,a=Q.eye(r.length,r.length,o),s=i(r),u=new Float64Array(t.x.length),h=0;h<t.x.length;h++)u[h]=s(t.x[h]);var c=function(t,r,n,e,i){for(var o=n.length,a=t.x.length,s=new Array(o),u=0;u<o;u++){s[u]=new Array(a);var h=n.slice();h[u]+=e;for(var c=i(h),f=0;f<a;f++)s[u][f]=r[f]-c(t.x[f])}return new Q(s)}(t,u,r,e,i),f=function(t,r){for(var n=t.x.length,e=new Array(n),i=0;i<n;i++)e[i]=[t.y[i]-r[i]];return new Q(e)}(t,u),l=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=K.checkMatrix(t),r?new tt(t).inverse():rt(t,Q.eye(t.rows))}(a.add(c.mmul(c.transpose())));return(r=(r=new Q([r])).sub(l.mmul(c).mmul(f).mul(e).transpose())).to1DArray()}function et(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=n.maxIterations,a=void 0===e?100:e,s=n.gradientDifference,u=void 0===s?.1:s,h=n.damping,c=void 0===h?0:h,f=n.errorTolerance,l=void 0===f?.01:f,v=n.minValues,p=n.maxValues,g=n.initialValues;if(c<=0)throw new Error("The damping option must be a positive number");if(!t.x||!t.y)throw new Error("The data parameter must have x and y elements");if(!i(t.x)||t.x.length<2||!i(t.y)||t.y.length<2)throw new Error("The data parameter elements must be an array with more than 2 points");if(t.x.length!==t.y.length)throw new Error("The data parameter elements must have the same size");var m=g||new Array(r.length).fill(1),d=m.length;if(p=p||new Array(d).fill(Number.MAX_SAFE_INTEGER),v=v||new Array(d).fill(Number.MIN_SAFE_INTEGER),p.length!==v.length)throw new Error("minValues and maxValues must be the same size");if(!i(m))throw new Error("initialValues must be an array");var y,w=o(t,m,r),b=w<=l;for(y=0;y<a&&!b;y++){m=nt(t,m,c,u,r);for(var x=0;x<d;x++)m[x]=Math.min(Math.max(v[x],m[x]),p[x]);if(w=o(t,m,r),isNaN(w))break;b=w<=l}return{parameterValues:m,parameterError:w,iterations:y}}}]);
//# sourceMappingURL=umap.worker.worker.js.map