(this["webpackJsonpcorgie-ui"]=this["webpackJsonpcorgie-ui"]||[]).push([[0],{249:function(e,t,n){},298:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(33),i=(n(249),n(16)),o=n(21),c=n(31),l=n(27),d=n(14),h=n(6),u=n(162),j=n(9),p=n(61),b=n(28),g=n.n(b),m=n(62),x=(n(147),n(82)),f=n(47),O=n.n(f);function v(e){var t,n={},a=Object(h.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.hasOwnProperty(r.type)||(n[r.type]=0),n[r.type]++}}catch(s){a.e(s)}finally{a.f()}return Object.keys(n).map((function(e,t){return{id:t,name:e,count:n[e]}}))}function y(e,t){var n,a={},r=Object(h.a)(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;a[s.name]=s.id}}catch(l){r.e(l)}finally{r.f()}var i,o=Object(h.a)(e);try{for(o.s();!(i=o.n()).done;){var c=i.value;c.typeId=a[c.type]}}catch(l){o.e(l)}finally{o.f()}}function N(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e[0].length,r=new Array(a).fill(0),s={};function i(e,t){for(var i=0;i<a;i++)t[i]>0&&(r[i]+=t[i],n&&(s.hasOwnProperty(i)||(s[i]=[]),s[i].push(e)))}if(t){var o,c=Object(h.a)(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;i(l,e[l])}}catch(u){c.e(u)}finally{c.f()}}else for(var d=0;d<e.length;d++)i(d,e[d]);return{cnts:r,featToNid:s}}function w(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n?e.slice().sort((function(e,t){return t-e})):e,r=e.length,s=Math.ceil(r/t),i=[],o=0;o<r;o+=s){for(var c=0,l=0;l<s&&o+l<r;l++)c=Math.max(c,a[o+l]);i.push(c)}return i}function k(e,t,n,a){var r=e.umap,s=e.edgeBundlePoints,i=r.map((function(e){return e.x})),o=r.map((function(e){return e.y})),c=Object(j.c)(i),l=Object(j.c)(o),d=Object(j.i)().domain(c).range([a.left,t-a.left-a.right]),h=Object(j.i)().domain(l).range([a.top,n-a.top-a.bottom]);return{coords:r.map((function(e){return{x:d(e.x),y:h(e.y)}})),edgeBundlePoints:s.map((function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(d(e[n])),t.push(h(e[n+1]));return t}))}}function E(e,t,n){if("hamming"===n)return e.xor(t).cardinality();if("jaccard"===n){var a=e.and(t).cardinality(),r=e.or(t).cardinality();return 0===r?0:1-a/r}return 0}var C=Object(j.i)().domain([-1,1]).range([1,0]);function A(e,t){for(var n=0,a=0,r=0,s=0;s<e.length;s++)n+=e[s]*t[s],a+=Math.pow(e[s],2),r+=Math.pow(t[s],2);var i=Math.sqrt(a)*Math.sqrt(r);return C(n/i)}function S(e,t){for(var n=0,a=0;a<e.length;a++)n+=Math.pow(e[a]-t[a],2);return Math.sqrt(n)}var T=Object(j.i)().domain([0,1]).range([-160,160]);function M(e,t){var n=T(e),a=T(t);return Object(j.g)(60,n,a).formatHex()}function L(e,t){var n=e.x-t.x,a=e.y-t.y;return 0<=n&&n<=t.width&&0<=a&&a<=t.height}function I(e,t,n){if(e){var a,r={},s={},i=[],o=0,c=Object(h.a)(e);try{for(c.s();!(a=c.n()).done;){var l=a.value;o++;var d,u=Object(h.a)(l);try{for(u.s();!(d=u.n()).done;){var j=d.value;r[j]=o;for(var p=n-1;p>=0;p--){var b,g=t[p][j],m=Object(h.a)(g.toArray());try{for(m.s();!(b=m.n()).done;){var x=b.value;x!==j&&(s.hasOwnProperty(x)?s[x]=Math.min(s[x],p+1):s[x]=p+1)}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){u.e(v)}finally{u.f()}}}catch(v){c.e(v)}finally{c.f()}for(var f=0;f<n;f++)i.push([]);for(var O in s)s[O]&&!r[O]&&i[s[O]-1].push(parseInt(O));return{isNodeSelected:r,isNodeSelectedNeighbor:s,neighArr:i}}}function P(e,t,n){if("all"!==t&&e.typeId!==t)return!1;if("all"!==n){if("correct"===n&&e.isWrong)return!1;if("wrong"===n&&!e.isWrong)return!1;var a=parseInt(n.slice(5));if(-1!==n.indexOf("pred")&&e.pl!==a)return!1;if(-1!==n.indexOf("true")&&e.tl!==a)return!1}return!0}var D=n(73),F=n(93);function _(){return new Worker(n.p+"umap.worker.worker.js")}var R=x.a(new function(){return new Worker(n.p+"distance.worker.worker.js")}),H=new function(){return new Worker(n.p+"focalLayout.worker.worker.js")},G=x.a(H),B=new function(){return new Worker(n.p+"initialLayout.worker.worker.js")},W=x.a(B),z=Object(D.range)(4).map((function(){return x.a(new _)})),U={FETCH_DATA_PENDING:"FETCH_DATA_PENDING",FETCH_DATA_SUCCESS:"FETCH_DATA_SUCCESS",COMPUTE_INIT_LAYOUT_DONE:"COMPUTE_INIT_LAYOUT_DONE",FETCH_DATA_ERROR:"FETCH_DATA_ERROR",COMPUTE_DISTANCES_PENDING:"COMPUTE_DISTANCES_PENDING",COMPUTE_DISTANCES_DONE:"COMPUTE_DISTANCES_DONE",HIGHLIGHT_NODES:"HIGHLIGHT_NODES",HIGHLIGHT_NODE_PAIRS:"HIGHLIGHT_NODE_PAIRS",HOVER_NODE:"HOVER_NODE",CHANGE_SELECTED_NODE_TYPE:"CHANGE_SELECTED_NODE_TYPE",SELECT_NODES:"SELECT_NODES",SELECT_NODES_PENDING:"SELECT_NODES_PENDING",SELECT_NODES_DONE:"SELECT_NODES_DONE",SELECT_NODE_PAIR:"SELECT_NODE_PAIR",CHANGE_PARAM:"CHANGE_PARAM",CHANGE_FOCAL_PARAM_PENDING:"CHANGE_FOCAL_PARAM_PENDING",CHANGE_FOCAL_PARAM_DONE:"CHANGE_FOCAL_PARAM_DONE",CHANGE_HOPS:"CHANGE_HOPS",LAYOUT_TICK:"LAYOUT_TICK",CHANGE_EDGE_TYPE_STATE:"CHANGE_EDGE_TYPE_STATE",TOGGLE_HIGHLIGHT_NODES_ATTR:"TOGGLE_HIGHLIGHT_NODES_ATTR",SEARCH_NODES:"SEARCH_NODES",CHANGE_SCATTERPLOT_FORM:"CHANGE_SCATTERPLOT_FORM",ADD_DISTANCE_SCATTERPLOT:"ADD_DISTANCE_SCATTERPLOT"},V=U;function K(e){return function(){var t=Object(m.a)(g.a.mark((function t(n,a){var r,s,i,o,c,l,d,u,p,b,m,x,f,N;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat("http://3.144.104.69:8787","/data/").concat(e),console.log("fetching data from ",r),n({type:U.FETCH_DATA_PENDING}),t.prev=3,t.next=6,fetch("".concat(r,"/graph.json")).then((function(e){return e.json()}));case 6:return s=t.sent,t.next=9,fetch("".concat(r,"/node-embeddings.csv")).then((function(e){return e.text()})).then(j.b);case 9:return i=t.sent,t.next=12,fetch("".concat(r,"/umap.json")).then((function(e){return e.json()})).then((function(e){return{umap:e.umap.map((function(e){return{x:parseFloat(e.x),y:parseFloat(e.y)}})),edgeBundlePoints:e.edgeBundlePoints.map((function(e){return e.map((function(e){return parseFloat(e)}))})),neighborPos:e.neighborBinning}}));case 12:return o=t.sent,t.next=15,fetch("".concat(r,"/attr-meta.json")).then((function(e){return e.json()})).catch((function(){return[]}));case 15:return c=t.sent,t.next=18,fetch("".concat(r,"/prediction-results.json")).then((function(e){return e.json()})).catch((function(){return null}));case 18:return l=t.sent,t.next=21,fetch("".concat(r,"/initial-layout.json")).then((function(e){return e.json()})).then((function(e){return e.coords=e.coords.map((function(e){return{x:parseFloat(e.x),y:parseFloat(e.y)}})),e})).catch((function(){return null}));case 21:return d=t.sent,t.next=24,fetch("".concat(r,"/distances.json")).then((function(e){return e.json()})).catch((function(){return null}));case 24:u=t.sent,p=a(),b=p.param.neighborDistanceMetric,m=p.spec.scatterHist.numBins,x=Number(s.hops),s.nodeTypes=v(s.nodes),y(s.nodes,s.nodeTypes),s.neighborMasks=s.neighborMasks.map((function(e){return O.a.fromHexString(e)})),s.neighborMasksByHop=s.neighborMasksByHop.map((function(e){return e.map((function(e){return O.a.fromHexString(e)}))})),G.initializeState(s.nodes.length,s.edges,s.neighborMasks.map((function(e){return e.toString()})),s.neighborMasksByHop[0].map((function(e){return e.toString()})),x,b,p.spec.graph),f=Object(h.a)(z);try{for(f.s();!(N=f.n()).done;)N.value.initializeState(s.neighborMasks.map((function(e){return e.toString()})),s.neighborMasksByHop[0].map((function(e){return e.toString()})),b)}catch(w){f.e(w)}finally{f.f()}return n({type:U.FETCH_DATA_SUCCESS,data:{datasetId:e,graph:s,emb:i,emb2d:o,attrs:c,hops:x,predRes:l,initialLayout:d,distances:u}}),d?B.terminate():W.computeForceLayoutWithD3(s.nodes.length,s.edges,p.spec.graph.padding).then((function(e){n(Y(e)),B.terminate()})),t.next=40,R.initializeState(i,s.nodes.length,s.edges,s.neighborMasks.map((function(e){return e.toString()})),s.sparseFeatures||s.denseFeatures||null,u.featureDistMax,s.nodes.map((function(e){return e.typeId})),b,m);case 40:t.next=45;break;case 42:t.prev=42,t.t0=t.catch(3),n((g=t.t0,{type:U.FETCH_DATA_ERROR,error:g.toString()}));case 45:case"end":return t.stop()}var g}),t,null,[[3,42]])})));return function(e,n){return t.apply(this,arguments)}}()}function Y(e){return{type:U.COMPUTE_INIT_LAYOUT_DONE,layoutRes:e}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:U.COMPUTE_DISTANCES_DONE,distData:e,idx:t,isSpecial:n}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:U.HIGHLIGHT_NODES,nodeIndices:e,brushedArea:t,fromView:n,which:a}}function X(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{type:U.HIGHLIGHT_NODE_PAIRS,brushedArea:n,which:t,brushedPairs:a,showTopkUnseen:r,isTopoVsLatent:e}}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:U.HOVER_NODE,nodeIdx:e,fromFeature:t}}var Z=1;function $(e,t,n){return function(){var a=Object(m.a)(g.a.mark((function a(r,s){var i,o,c,l,d,u,j,b,m,x,f,O,v,y,N,w,k,E,C;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=s(),o=i.selectedNodes,c=i.isNodeSelected,d=o.slice(),a.t0=e,a.next="CREATE"===a.t0?6:"APPEND"===a.t0?9:"REMOVE FROM"===a.t0||"SINGLE OUT"===a.t0?12:"DELETE"===a.t0?19:"CLEAR"===a.t0?21:23;break;case 6:return(l=t.filter((function(e){return!c[e]}))).length&&(d=[].concat(Object(p.a)(o),[l])),a.abrupt("break",24);case 9:return l=t.filter((function(e){return!c[e]})),d[n]=d[n].concat(l),a.abrupt("break",24);case 12:u={},j=Object(h.a)(t);try{for(j.s();!(b=j.n()).done;)m=b.value,u[m]=!0}catch(g){j.e(g)}finally{j.f()}for(d=[],x=0;x<o.length;x++){f=[],O=Object(h.a)(o[x]);try{for(O.s();!(v=O.n()).done;)y=v.value,u.hasOwnProperty(y)||f.push(y)}catch(g){O.e(g)}finally{O.f()}f.length&&d.push(f)}return"SINGLE OUT"===e&&d.push(t),a.abrupt("break",24);case 19:return d.splice(n,1),a.abrupt("break",24);case 21:return d=[],a.abrupt("break",24);case 23:console.error("action selectNodes encountered the wrong mode: ",e);case 24:if(console.log("calling action.selectNodes() ",{mode:e,targetNodes:t,targetGroupIdx:n,newSel:d}),N=I(d,i.graph.neighborMasksByHop,i.param.hops),w=Z++,r(ae(d,N,w)),!d.length){a.next=60;break}k=2,E=0;case 31:if(!(E<d.length)){a.next=45;break}if(!(d[E].length>1)){a.next=42;break}return a.t1=r,a.t2=q,a.next=37,R.computeDistances("within",d[E]);case 37:a.t3=a.sent,a.t4=k,a.t5=(0,a.t2)(a.t3,a.t4),(0,a.t1)(a.t5),k++;case 42:E++,a.next=31;break;case 45:if(2!==d.length||!(d[0].length>1||d[1].length>1)){a.next=54;break}return a.t6=r,a.t7=q,a.next=50,R.computeDistances("between",d);case 50:a.t8=a.sent,a.t9=k,a.t10=(0,a.t7)(a.t8,a.t9),(0,a.t6)(a.t10);case 54:return a.next=56,te(i.graph,d,N,i.param);case 56:C=a.sent,r(re(C,w)),a.next=61;break;case 60:r(re({},null));case 61:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}function ee(e,t){return function(){var n=Object(m.a)(g.a.mark((function n(a,r){var s,i,o,c,l;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r(),o=I(i=[[e],[t]],s.graph.neighborMasksByHop,s.param.hops),c=Z++,a(ae(i,o,c)),n.next=7,te(s.graph,i,o,s.param);case 7:l=n.sent,a(re(l,c));case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function te(e,t,n,a){return ne.apply(this,arguments)}function ne(){return(ne=Object(m.a)(g.a.mark((function e(t,n,a,r){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=4;break}return e.abrupt("return",{});case 4:e.t0=r.focalGraph.layout,e.next="umap"===e.t0?7:"group-constraint-cola"===e.t0?10:"spiral"===e.t0?13:16;break;case 7:return e.next=9,je(n,a.neighArr,r.focalGraph.useGlobalMask,r.nodeSize,r.focalGraph.useEdgeBundling);case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,G.computeFocalLayoutWithCola(n,a.neighArr,r.focalGraph.useGlobalMask,r.nodeSize);case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,G.computeSpaceFillingCurveLayout(n,a.neighArr,r.focalGraph.useGlobalMask);case 15:return e.abrupt("return",e.sent);case 16:return e.next=18,G.computeFocalLayoutWithD3(n,a.neighArr,r.focalGraph.useGlobalMask);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t,n){return{type:U.SELECT_NODES_PENDING,newSel:e,neighRes:t,layoutId:n}}function re(e,t){return{type:U.SELECT_NODES_DONE,layoutRes:e,layoutId:t}}function se(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:U.CHANGE_PARAM,param:e,value:t,inverse:n,arrayIdx:a}}function ie(e,t){return function(){var n=Object(m.a)(g.a.mark((function n(a,r){var s,i,o,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=r(),i=s.focalLayout,a(se(e,t)),"focalGraph.useGlobalMask"!==e){n.next=11;break}return a(oe()),n.next=7,te(s.graph,s.selectedNodes,{neighArr:s.neighArr,isNodeSelected:s.isNodeSelected,isNodeSelectedNeighbor:s.isNodeSelectedNeighbor},s.param);case 7:o=n.sent,a(ce(i.layoutId,o)),n.next=18;break;case 11:if("focalGraph.useEdgeBundling"!==e){n.next=18;break}if(!t||i.edgeBundlePoints){n.next=18;break}return a(oe("Performing edge bundling...")),n.next=16,G.performEdgeBundling(i.remainingEdges,i.coords);case 16:c=n.sent,a(ce(i.layoutId,{edgeBundlePoints:c}));case 18:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:U.CHANGE_FOCAL_PARAM_PENDING,runningMsg:e}}function ce(e,t){return{type:U.CHANGE_FOCAL_PARAM_DONE,layoutId:e,layoutRes:t}}function le(e){return{type:U.CHANGE_HOPS,hops:e}}function de(e,t){return{type:U.SEARCH_NODES,label:e,nodeIdx:t}}function he(){return function(){var e=Object(m.a)(g.a.mark((function e(t,n){var a,r,s,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n(),r=a.scatterplotForm,s=a.distances.displaySpecial.length,t({type:U.COMPUTE_DISTANCES_PENDING}),e.next=6,R.computeDistances("special",null,null,r.nodePairs);case 6:i=e.sent,t(q(i,s,!0));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}function ue(e,t){return{type:U.CHANGE_SCATTERPLOT_FORM,field:e,value:t}}function je(e,t,n,a,r){return pe.apply(this,arguments)}function pe(){return(pe=Object(m.a)(g.a.mark((function e(t,n,a,r,s){var i,o,c,l,d,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=new Date,o=[].concat(Object(p.a)(t),Object(p.a)(n)),console.log({taskQ:o}),c=new Array(4).fill(0),l=[],d=0;d<o.length;d++)h=c.reduce((function(e,t,n,a){return t<a[e]?n:e}),0),c[h]+=o[d].length,l.push(z[h].runUMAP(o[d],a,r));return e.abrupt("return",Promise.all(l).then((function(e){for(var a=[[t.map((function(){return null}))],n.map((function(){return null}))],r=0;r<o.length;r++)r<t.length?a[0][r]=e[r]:a[r-t.length+1]=e[r];var s=new Date;return console.log("UMAP total time: ",(s.getTime()-i.getTime())/1e3,"s"),a})).then((function(e){return G.computeFocalLayoutWithUMAP(t,n,e,s)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var be=n(161),ge=n.n(be);function me(e,t,n,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s={};if(r){var i,o=Object(h.a)(a);try{for(o.s();!(i=o.n()).done;){var c=i.value;s[c]=!0}}catch(x){o.e(x)}finally{o.f()}}for(var l=0;l<t;l++){var d,u=Object(h.a)(a);try{for(u.s();!(d=u.n()).done;){var j,p=d.value,b=Object(h.a)(e[l][p].toArray());try{for(b.s();!(j=b.n()).done;){var g=j.value;s[g]=!0}}catch(x){b.e(x)}finally{b.f()}}}catch(x){u.e(x)}finally{u.f()}}var m=Object.keys(s).map((function(e){return parseInt(e)}));return{nodes:m,edges:xe(n,m,s)}}function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n;if(null===n){a={};var r,s=Object(h.a)(t);try{for(s.s();!(r=s.n()).done;){var i=r.value;a[i]=!0}}catch(g){s.e(g)}finally{s.f()}}var o,c=[],l=Object(h.a)(t);try{for(l.s();!(o=l.n()).done;){var d,u=o.value,j=Object(h.a)(e[u]);try{for(j.s();!(d=j.n()).done;){var p=d.value,b=p.nid;u<b&&a[b]&&c.push({source:u,target:b,eid:p.eid})}}catch(g){j.e(g)}finally{j.f()}}}catch(g){l.e(g)}finally{l.f()}return c}function fe(e,t,n){var a,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=t.map((function(e){return Object(d.a)({},e)})),o=Object(h.a)(i);try{for(o.s();!(a=o.n()).done;){var c=a.value;"scalar"===c.type?c.values=[]:"categorical"===c.type&&(c.values={})}}catch(y){o.e(y)}finally{o.f()}function l(e){var t,a=Object(h.a)(i);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[e.typeId].name===r.nodeType&&("scalar"===r.type?r.values.push(+e[r.name]):"categorical"===r.type&&(r.values.hasOwnProperty(e[r.name])||(r.values[e[r.name]]=0),r.values[e[r.name]]++))}}catch(y){a.e(y)}finally{a.f()}}if(null!==s){var u,p=Object(h.a)(s);try{for(p.s();!(u=p.n()).done;){var b=u.value;l(e[b])}}catch(y){p.e(y)}finally{p.f()}}else{var g,m=Object(h.a)(e);try{for(m.s();!(g=m.n()).done;){var x=g.value;l(x)}}catch(y){m.e(y)}finally{m.f()}}for(var f=10,O=function(e){var t=i[e];if("scalar"===t.type)if(r)t.bins=r[e].binGen(t.values);else{var n=Object(j.i)().domain(Object(j.c)(t.values)).nice(f);t.binGen=Object(j.a)().domain(n.domain()).thresholds(n.ticks(f)),t.bins=t.binGen(t.values)}else t.bins=r?r[e].bins.map((function(e){return{v:e.v,c:t.values[e.v]}})):Object.keys(t.values).sort((function(e,n){return t.values[e]-t.values[n]})).map((function(e){return{v:e,c:t.values[e]}}))},v=0;v<i.length;v++)O(v);return i}function Oe(e,t){var n,a=1e9,r=0,s=1e9,i=0,o=Object(h.a)(t);try{for(o.s();!(n=o.n()).done;){var c=e[n.value];a=Math.min(a,c.x),r=Math.max(r,c.x),s=Math.min(s,c.y),i=Math.max(i,c.y)}}catch(l){o.e(l)}finally{o.f()}return{x:a-5,y:s-5,width:r-a+10,height:i-s+10}}function ve(e,t){var n=null,a=[];switch(t){case"umap":e.nodeColors=e.latent.posColor;break;case"pred-labels":for(var r=0;r<e.numNodeClasses;r++)a.push(r);n=Object(j.k)(a,j.n),e.nodeColors=e.graph.nodes.map((function(e){return n(e.pl)}));break;case"true-labels":for(var s=0;s<e.numNodeClasses;s++)a.push(s);n=Object(j.k)(a,j.n),e.nodeColors=e.graph.nodes.map((function(e){return n(e.tl)}));break;case"correctness":n=function(e){return e?"red":"blue"},e.nodeColors=e.graph.nodes.map((function(e){return n(e.isWrong)}));break;case"node-type":n=function(t){return e.graph.nodeTypes[t].color},e.nodeColors=e.graph.nodes.map((function(e){return n(e.typeId)}));break;default:t=parseInt(t);var i=e.nodeAttrs.display[0].data[t],o=[i.bins[0].x0,i.bins[i.bins.length-1].x1],c=.2*(o[1]-o[0]);n=Object(j.l)(j.e).domain([o[0]>0?Math.max(0,o[0]-c):o[0],o[1]]),e.nodeColors=e.graph.nodes.map((function(e){return e.hasOwnProperty(i.name)?n(e[i.name]):"black"}))}e.param.colorBy=t,e.param.colorScale=n}function ye(e,t){var n=0;if(2===e.length){var a=t[e[0]],r=t[e[1]];if(a>0&&r>0&&a!==r)return Math.max(a,r)+1}else{var s,i=Object(h.a)(e);try{for(i.s();!(s=i.n()).done;){var o=s.value;if(t[o]){if(n>0&&t[o]!==n)return 0;n=t[o]}else if(n>0)return 0}}catch(c){i.e(c)}finally{i.f()}}return n}function Ne(e){e.param.nodeFilter={searchShown:!1},e.highlightedNodes=[],e.highlightedEdges=[],e.featureAgg.highlighted=null,e.nodeAttrs.highlighted=null}function we(e){for(var t=e.coords,n=e.width,a=e.height,r=new ge.a({x:0,y:0,width:n,height:a}),s=0;s<t.length;s++){var i=t[s];i&&r.insert({id:s,x:i.x-.5,y:i.y-.5,width:1,height:1})}return r}function ke(e){var t,n=[e.userInterests,e.connectivity,e.linkPrediction].filter((function(e){return"all"!==e}));return t=n.length?n.join(","):"all","Filter: ".concat(t)}var Ee=Object(u.a)((function(e,t){var n,a,r,s;switch(t.type){case V.FETCH_DATA_PENDING:return void(e.loaded=!1);case V.FETCH_DATA_ERROR:return e.loaded=!1,void(e.error=t.error);case V.FETCH_DATA_SUCCESS:e.loaded=!0;var i,o=t.data,c=o.graph,l=o.emb,u=o.emb2d,p=o.attrs,b=o.hops,g=o.predRes,m=o.initialLayout,x=o.distances,f=Object(h.a)(l);try{for(f.s();!(i=f.n()).done;)for(var O=i.value,v=0;v<O.length;v++)O[v]=parseFloat(O[v])}catch(je){f.e(je)}finally{f.f()}e.predRes=g,function(e,t,n){if(n){if(n.trueLabels&&n.predLabels)for(var a=0;a<e.length;a++){var r=e[a];r.pl=n.predLabels[a],r.tl=n.trueLabels[a],r.isWrong=r.pl!==r.tl}if(n.trueAllowEdges&&n.falseAllowEdges){for(var s=[],i=0;i<e.length;i++)s[i]={},e[i].isWrong=!1;var o,c=Object(h.a)(n.trueAllowEdges);try{for(c.s();!(o=c.n()).done;){var l=o.value;s[l[0]][l[1]]=!0,s[l[1]][l[0]]=!0}}catch(je){c.e(je)}finally{c.f()}var d,u=Object(h.a)(n.falseAllowEdges);try{for(u.s();!(d=u.n()).done;){var j=d.value;s[j[0]][j[1]]=!1,s[j[1]][j[0]]=!1}}catch(je){u.e(je)}finally{u.f()}var p,b=Object(h.a)(t);try{for(b.s();!(p=b.n()).done;){var g=p.value;s[g.source][g.target]?g.isWrong=!1:(e[g.source].isWrong=!0,e[g.target].isWrong=!0,g.isWrong=!0)}}catch(je){b.e(je)}finally{b.f()}}}}(c.nodes,c.edges,g),e.numNodeClasses=g?g.numNodeClasses:null,e.hasLinkPredictions=g&&g.isLinkPrediction,e.param.hops=b,e.datasetId=t.data.datasetId,e.datasetName=t.data.graph.name,e.graph=c,e.initialLayout.numNodes=c.nodes.length,e.initialLayout.numEdges=c.edges.length,t.data.initialLayout&&(Object.assign(e.initialLayout,m),e.initialLayout.running=!1,e.initialLayout.qt=we(m)),c.sparseFeatures&&(e.featureAgg.active=!0,e.featureAgg.numFeatures=c.sparseFeatures[0].length,e.featureAgg.stripMapping=function(e,t){var n=Math.ceil(e/t),a=Math.ceil(e/n);return new Array(a).fill(0).map((function(t,a){for(var r=[],s=a*n,i=0;i<n&&s+i<e;i++)r.push(s+i);return r}))}(c.sparseFeatures[0].length,e.spec.feature.maxNumStrips),a=N(c.sparseFeatures,null),(r={title:"All",cnts:a.cnts,featToNid:a.featToNid,maxCnts:Object(j.h)(a.cnts),compressedCnts:w(a.cnts,e.spec.feature.maxNumStrips)}).scale=Object(j.l)(j.f).domain([0,r.maxCnts]),e.featureAgg.display.push(r)),function(e){for(var t=0;t<e.length;t++)t>j.n.length-1?e[t].color="black":e[t].color=j.n[t]}(e.graph.nodeTypes),e.latent={emb:l,layoutMin:Object(d.a)(Object(d.a)({},k(u,e.spec.latent.width,e.spec.latent.height,e.spec.latent.paddings)),{},{width:e.spec.latent.width,height:e.spec.latent.height}),layoutMax:Object(d.a)(Object(d.a)({},k(u,e.spec.latent.widthMax,e.spec.latent.heightMax,e.spec.latent.paddingsMax)),{},{width:e.spec.latent.widthMax,height:e.spec.latent.heightMax}),neighborPos:u.neighborPos},e.latent.layoutMin.qt=we(e.latent.layoutMin),e.latent.layoutMax.qt=we(e.latent.layoutMax),e.latent.posColor=e.latent.layoutMin.coords.map((function(t){return M(t.x/e.spec.latent.width,t.y/e.spec.latent.height)})),e.attrMeta=p,e.nodeAttrs.active=p.length>0,e.nodeAttrs.active&&(e.nodeAttrs.numAttrs=p.length,e.nodeAttrs.display.push({title:"All",data:fe(c.nodes,p,e.graph.nodeTypes)})),ve(e,e.param.colorBy);var y=c.nodes.length*(c.nodes.length-1)/2;return e.distances.featureDistMax=x.featureDistMax,e.distances.display=[x.distSample,x.distEdge],e.distances.display[0].title=y>x.distSample.src.length?"random samples":"all",e.distances.display[1].title="edges",x.featureDistMax&&(e.distances.featureScale=Object(j.i)().domain([0,x.featureDistMax]).range([0,1])),void(e.isNodeSelected=new Array(c.nodes.length).fill(!1));case V.COMPUTE_INIT_LAYOUT_DONE:return Object.assign(e.initialLayout,t.layoutRes),e.initialLayout.qt=we(t.layoutRes),void(e.initialLayout.running=!1);case V.COMPUTE_DISTANCES_PENDING:return e.distances.displaySpecial[0]={title:ke(e.scatterplotForm),isComputing:!0},void(e.scatterplotForm.show=!1);case V.COMPUTE_DISTANCES_DONE:return void(t.isSpecial?(Object.assign(e.distances.displaySpecial[0],t.distData),e.distances.displaySpecial[0].isComputing=!1):t.idx<e.distances.display.length&&(Object.assign(e.distances.display[t.idx],t.distData),e.distances.display[t.idx].isComputing=!1));case V.HIGHLIGHT_NODES:if(Ne(e),"node-type"===t.fromView){var E,C=Object(h.a)(e.graph.nodes);try{for(C.s();!(E=C.n()).done;){var A=E.value;A.typeId===t.which&&e.highlightedNodes.push(A.id)}}catch(je){C.e(je)}finally{C.f()}e.highlightedEdges=xe(e.graph.edgeDict,e.highlightedNodes,null)}else if("node-label"===t.fromView){var S,T="pred-labels"===e.param.colorBy?"pl":"tl",L=Object(h.a)(e.graph.nodes);try{for(L.s();!(S=L.n()).done;){var I=S.value;I[T]===t.which&&e.highlightedNodes.push(I.id)}}catch(je){L.e(je)}finally{L.f()}e.highlightedEdges=xe(e.graph.edgeDict,e.highlightedNodes,null)}else{if("node-attr"===t.fromView&&(e.param.nodeFilter.whichAttr=t.which.attr,e.param.nodeFilter.whichRow=t.which.row,e.param.nodeFilter.brushedArea=t.brushedArea),"feature"===t.fromView){a=new Array(e.featureAgg.numFeatures).fill(0);var P,D=Object(h.a)(t.which.cellIds);try{for(D.s();!(P=D.n()).done;){var F=P.value;a[F]=1}}catch(je){D.e(je)}finally{D.f()}e.featureAgg.highlighted={displayId:t.which.displayId,cnts:a,compressedCnts:w(a,e.spec.feature.maxNumStrips)}}"node-attr"===t.fromView||"feature"===t.fromView||0===e.param.hopsHighlight?(e.highlightedNodes=t.nodeIndices,e.highlightedEdges=xe(e.graph.edgeDict,e.highlightedNodes,null)):(n=me(e.graph.neighborMasksByHop,e.param.hopsHighlight,e.graph.edgeDict,t.nodeIndices,!0),e.highlightedNodes=n.nodes,e.highlightedEdges=n.edges)}return void(e.highlightedNodes.length&&(e.featureAgg.active&&"feature"!==t.fromView?(a=N(e.graph.sparseFeatures,e.highlightedNodes,!1),e.featureAgg.highlighted={displayId:ye(e.highlightedNodes,e.isNodeSelected),cnts:a.cnts,compressedCnts:w(a.cnts,e.spec.feature.maxNumStrips)}):e.nodeAttrs.active&&"node-attr"!==t.fromView&&(e.nodeAttrs.highlighted={displayId:ye(e.highlightedNodes,e.isNodeSelected),data:fe(e.graph.nodes,e.attrMeta,e.graph.nodeTypes,e.nodeAttrs.display[0].data,e.highlightedNodes)})));case V.HIGHLIGHT_NODE_PAIRS:var _=t.brushedArea,R=t.which,H=t.brushedPairs,G=t.showTopkUnseen;if(e.param.nodePairFilter.isTopoVsLatent=t.isTopoVsLatent,e.param.nodePairFilter.brushedArea=_,e.param.nodePairFilter.which=R,e.highlightedNodePairs=null===R?[]:H,G){var B,W=e.predRes.trueUnseenEdgesSorted,z=Object(h.a)(e.highlightedNodes);try{for(z.s();!(B=z.n()).done;){var U=B.value;if(W.hasOwnProperty(U))for(var K=0;K<Math.min(W[U].length,e.param.unseenTopK);K++)e.highlightedNodePairs.push([U,W[U][K]])}}catch(je){z.e(je)}finally{z.f()}}return;case V.HOVER_NODE:if(null===t.nodeIdx?(e.hoveredNodes=[],e.hoveredNodesAndNeighbors=[],e.hoveredEdges=[],e.featureAgg.hovered=null,e.nodeAttrs.hovered=null):(e.hoveredNodes=Number.isInteger(t.nodeIdx)?[t.nodeIdx]:t.nodeIdx,0===e.param.hopsHover?(e.hoveredNodesAndNeighbors=e.hoveredNodes.slice(),e.hoveredEdges=xe(e.graph.edgeDict,e.hoveredNodes,null)):(n=me(e.graph.neighborMasksByHop,e.param.hopsHover,e.graph.edgeDict,e.hoveredNodes,!0),e.hoveredNodesAndNeighbors=n.nodes,e.hoveredEdges=n.edges)),e.hoveredNodesAndNeighbors.length){if(e.featureAgg.active)if(null===t.fromFeature)a=N(e.graph.sparseFeatures,e.hoveredNodesAndNeighbors,!1),e.featureAgg.hovered={displayId:ye(e.hoveredNodesAndNeighbors,e.isNodeSelected),cnts:a.cnts,compressedCnts:w(a.cnts,e.spec.feature.maxNumStrips)};else if(t.fromFeature.cellIds.length>0){s={};var Y,q=Object(h.a)(t.fromFeature.cellIds);try{for(q.s();!(Y=q.n()).done;){s[Y.value]=1}}catch(je){q.e(je)}finally{q.f()}e.featureAgg.hovered={displayId:t.fromFeature.displayId,cnts:s}}e.nodeAttrs.active&&(e.nodeAttrs.hovered={displayId:ye(e.hoveredNodesAndNeighbors,e.isNodeSelected),data:fe(e.graph.nodes,e.attrMeta,e.graph.nodeTypes,e.nodeAttrs.display[0].data,e.hoveredNodesAndNeighbors)})}return;case V.SELECT_NODES_PENDING:var J=t.newSel,X=t.neighRes;if(e.selectedNodes=J,e.distances.display.length=2,e.nodeAttrs.display.length=1,e.featureAgg.display.length=1,e.param.features.collapsed.length=1,0==J.length)e.neighArr=null,e.isNodeSelected={},e.isNodeSelectedNeighbor={},e.neighGrp=null,e.focalLayout={running:!1};else{if(e.isNodeSelected=X.isNodeSelected,e.isNodeSelectedNeighbor=X.isNodeSelectedNeighbor,e.neighArr=X.neighArr,e.nodeAttrs.active)for(var Q=0;Q<J.length;Q++)e.nodeAttrs.display.push({title:"foc-".concat(Q),data:fe(e.graph.nodes,e.attrMeta,e.graph.nodeTypes,e.nodeAttrs.display[0].data,J[Q])});if(e.focalLayout={running:!0,layoutId:t.layoutId},e.latent.layoutMin.focalBBox=J.map((function(t){return Oe(e.latent.layoutMin.coords,t)})),e.latent.layoutMax.focalBBox=J.map((function(t){return Oe(e.latent.layoutMax.coords,t)})),e.featureAgg.active&&(J.map((function(t,n){a=N(e.graph.sparseFeatures,t),(r={title:"foc-".concat(n),cnts:a.cnts,featToNid:a.featToNid,maxCnts:Object(j.h)(a.cnts),compressedCnts:w(a.cnts,e.spec.feature.maxNumStrips)}).scale=Object(j.l)(j.f).domain([0,r.maxCnts]),e.featureAgg.display.push(r),e.param.features.collapsed.push(!0)})),2===J.length)){for(var Z=e.featureAgg.display[1].cnts.map((function(t,n){return Math.abs(t-e.featureAgg.display[2].cnts[n])})),$=Object(j.h)(Z),ee=w(Z,e.spec.feature.maxNumStrips),te={},ne=0;ne<Z.length;ne++)if(0!==Z[ne]){var ae=e.featureAgg.display[1].featToNid[ne]||[],re=e.featureAgg.display[2].featToNid[ne]||[];te[ne]=ae.concat(re)}e.featureAgg.display.push({title:"diff",cnts:Z,compressedCnts:ee,featToNid:te,scale:Object(j.l)(j.f).domain([0,$])}),e.param.features.collapsed.push(!0)}for(var se=0;se<J.length;se++)J[se].length>1&&e.distances.display.push({isComputing:!0,title:"within foc-".concat(se)});2===J.length&&(J[0].length>1||J[1].length>1)&&e.distances.display.push({isComputing:!0,title:"between foc-0 and foc-1"}),e.param.nodeFilter={},e.highlightedNodes=[],e.featureAgg.highlighted=null,e.nodeAttrs.highlighted=null}return;case V.SELECT_NODES_DONE:return void(t.layoutId&&t.layoutId===e.focalLayout.layoutId&&(e.focalLayout=Object(d.a)(Object(d.a)({},t.layoutRes),{},{running:!1}),t.layoutRes.coords&&(e.focalLayout.qt=we(t.layoutRes))));case V.CHANGE_PARAM:for(var ie=t.param.split("."),oe=ie[ie.length-1],ce=e.param,le=0;le<ie.length-1;le++)ce=ce[ie[le]];return t.inverse?null!==t.arrayIdx?ce[oe][t.arrayIdx]=!ce[oe][t.arrayIdx]:ce[oe]=!ce[oe]:null!==t.arrayIdx?ce[oe][t.arrayIdx]=t.value:ce[oe]=t.value,-1!==["hopsHighlight","highlightNodeType","highlightNodeLabel"].indexOf(t.param)&&Ne(e),void("colorBy"===t.param&&ve(e,t.value));case V.CHANGE_FOCAL_PARAM_PENDING:return void(t.runningMsg?e.focalLayout.runningMsg=t.runningMsg:e.focalLayout.running=!0);case V.CHANGE_FOCAL_PARAM_DONE:return void(e.focalLayout.layoutId===t.layoutId&&(Object.assign(e.focalLayout,Object(d.a)(Object(d.a)({},t.layoutRes),{},{running:!1,runningMsg:null})),t.layoutRes.coords&&(e.focalLayout.qt=we(t.layoutRes))));case V.CHANGE_HOPS:return void(e.param.hops!==t.hops&&(e.param.hops=t.hops,e.selectedNodes=[],e.isNodeSelected={},e.isNodeSelectedNeighbor={},e.focalLayout={}));case V.LAYOUT_TICK:if(e.focalLayout&&e.focalLayout.simulation){var de=e.focalLayout.simulation.tick();e.focalLayout.coords=e.focalLayout.simulation.nodes().map((function(e){return{x:e.x,y:e.y,g:e.group}})),"group-constraint-cola"===e.param.focalGraph.layout?(e.focalLayout.groups=e.focalLayout.simulation._groups.map((function(e){return{id:e.id,bounds:e.bounds}})),(de||e.focalLayout.simulationTickNumber>20)&&(e.focalLayout.running=!1)):50===e.focalLayout.simulationTickNumber&&(e.focalLayout.running=!1),e.focalLayout.simulationTickNumber+=1}return;case V.SEARCH_NODES:if(e.param.nodeFilter={searchLabel:t.label,searchId:t.nodeIdx},t.label){var he=t.label.toLowerCase();e.highlightedNodes=e.graph.nodes.filter((function(e){return e.label&&e.label.toString().toLowerCase().includes(he)})).map((function(e){return e.id}))}else null!==t.nodeIdx&&0<=t.nodeIdx&&t.nodeIdx<e.graph.nodes.length?e.highlightedNodes=[t.nodeIdx]:e.highlightedNodes=[];return;case V.CHANGE_SCATTERPLOT_FORM:var ue=e.scatterplotForm;return ue[t.field]=t.value,"show"===t.field&&t.value&&(ue.userInterests="all"),void(ue.nodePairs=function(e,t){for(var n,a,r,s,i,o,c=t.userInterests,l=t.connectivity,d=t.linkPrediction,u=e.graph.nodes.length,j=e.highlightedNodes,p=e.selectedNodes,b=(e.predRes,{}),g={},m={},x=0;x<u;x++)b[x]={},g[x]={},m[x]={};var f=!1,O=!1,v=!1;if("edge"===l){var y,N=Object(h.a)(e.graph.edges);try{for(N.s();!(y=N.n()).done;){var w=y.value;i=Math.min(w.source,w.target),o=Math.max(w.source,w.target),b[i][o]=!0}}catch(je){N.e(je)}finally{N.f()}}else if("nonedge"===l){for(var k=0;k<u;k++)for(var E=k+1;E<u;E++)b[k][E]=!0;var C,A=Object(h.a)(e.graph.edges);try{for(A.s();!(C=A.n()).done;){var S=C.value;b[Math.min(S.source,S.target)][Math.max(S.source,S.target)]=!1}}catch(je){A.e(je)}finally{A.f()}}else f=!0;if("all"!==c)if(-1!==c.indexOf("*")){n=c.split("*"),a=parseInt(n[0].slice(4)),r=parseInt(n[1].slice(4)),console.assert(a!==r&&a<p.length&&r<p.length);var T,M=Object(h.a)(p[a]);try{for(M.s();!(T=M.n()).done;){var L,I=T.value,P=Object(h.a)(p[r]);try{for(P.s();!(L=P.n()).done;){var D=L.value;i=Math.min(I,D),o=Math.max(I,D),(f||b[i][o])&&(g[i][o]=!0)}}catch(je){P.e(je)}finally{P.f()}}}catch(je){M.e(je)}finally{M.f()}}else if(-1!==c.indexOf("-")){a=parseInt(c.slice(4)),console.assert(a!==r&&a<p.length),s=p[a];for(var F=0;F<s.length;F++)for(var _=F+1;_<s.length;_++)i=Math.min(s[F],s[_]),o=Math.max(s[F],s[_]),(f||b[i][o])&&(g[i][o]=!0)}else{s=j;for(var R=0;R<s.length;R++)for(var H=R+1;H<s.length;H++)i=Math.min(s[R],s[H]),o=Math.max(s[R],s[H]),(f||b[i][o])&&(g[i][o]=!0)}else O=!0;if("pred-true"===d){var G,B=e.predRes.trueAllowEdges,W=Object(h.a)(B);try{for(W.s();!(G=W.n()).done;){var z=G.value;i=Math.min(z[0],z[1]),o=Math.max(z[0],z[1]),(f||b[i][o])&&(O||g[i][o])&&(m[i][o]=!0)}}catch(je){W.e(je)}finally{W.f()}}else if("pred-false"===d){var U,V=e.predRes.falseAllowEdges,K=Object(h.a)(V);try{for(K.s();!(U=K.n()).done;){var Y=U.value;i=Math.min(Y[0],Y[1]),o=Math.max(Y[0],Y[1]),(f||b[i][o])&&(O||g[i][o])&&(m[i][o]=!0)}}catch(je){K.e(je)}finally{K.f()}}else v=!0;var q=[],J=null;if(f||(J=b),O||(J=g),v||(J=m),J)for(var X=0;X<u;X++)for(var Q in J[X])J[X].hasOwnProperty(Q)&&J[X][Q]&&q.push([X,Q]);else for(var Z=0;Z<u;Z++)for(var $=Z+1;$<u;$++)q.push([Z,$]);return q}(e,ue));default:return}}),{loaded:!1,datasetId:null,datasetName:null,numNodeClasses:!1,hasLinkPredictions:!1,centralNodeType:0,nodeColors:[],featureAgg:{active:!1,hovered:null,highlighted:null,display:[]},nodeAttrs:{active:!1,hovered:null,highlighted:null,display:[]},selectedNodes:[],isNodeSelected:{},isNodeSelectedNeighbor:{},highlightedNodes:[],highlightedNodePairs:[],highlightedEdges:[],hoveredNodes:[],hoveredNodesAndNeighbors:[],hoveredEdges:[],neighborIntersections:null,distances:{maxSample:1e6,featureScale:null,displaySpecial:[],display:[{isComputing:!0,title:"all (down-sampled)"},{isComputing:!0,title:"connected by edges"}]},initialLayout:{running:!0},focalLayout:{running:!1},scatterplotForm:{show:!1,connectivity:"edge",userInterests:"all",linkPrediction:"all",nodePairs:[]},param:{hops:2,hopsHover:1,hopsHighlight:0,colorBy:"umap",colorScale:null,neighborDistanceMetric:"jaccard",nodeSize:4,highlightNodeType:"all",highlightNodeLabel:"all",hideHighlightView:!1,graph:{layout:"force-directed-d3",bounded:!1},focalGraph:{layout:"umap",showSettings:!1,useEdgeBundling:!0,useGlobalMask:!0},embeddings:{maxWindow:!1,showEdges:!1},neighborLatentMap:{isOpen:!0,hop:1,useLinearScale:!1,showSettings:!1},features:{collapsed:[!1]},nodeFilter:{whichAttr:null,whichRow:null,brushedArea:null,searchLabel:null,searchId:null,searchShown:!1},nodePairFilter:{isTopoVsLatent:null,which:null,brushedArea:null,useLinearScale:!1},unseenTopK:5,activeDistanceTab:"topo-vs-latent"},spec:{graph:{paddingTop:18,paddingBottom:2,padding:10,gapBetweenHop:10,gapBetweenFocal:16,edgeType:"line",neighborMarkerMaxHeight:30,innerRingNodeGap:10,outerRingNodeGap:2,minRingGap:50},latent:{width:380,height:380,paddings:{top:18,bottom:4,left:6,right:6},widthMax:800,heightMax:800,paddingsMax:{top:20,bottom:10,left:10,right:10}},neighborLatentMap:{cellSize:6,gap:1},intersectionPlot:{margins:{top:10,bottom:10,left:10,right:10},topLabelHeight:30,dotSize:10,dotMargin:10,verticalMargin:5,cardScaleRange:50,plotHorizontalMargin:30},adjacencyMatrix:{margins:{top:10,bottom:10,left:10,right:80},rowHeight:14,colWidth:14,gap:6,histogramAreaHeight:120,histogramHeight:100,labelHeight:10,labelAreaSize:100,labelSize:10,countAreaSize:20,countBarHeight:100},histogram:{margins:{top:10,bottom:18,left:30,right:10},height:50,width:100},partialHistogram:{margins:{top:10,bottom:18,left:30,right:10},height:30,width:100},scatterHist:{margins:{top:15,bottom:12,left:18,right:20},histHeight:15,histWidth:20,scatterHeight:80,scatterWidth:80,tickLabelGap:15,dotSize:2,numBins:20,legendWidth:20,gridBinSize:.05},feature:{cellSize:6,cellGap:1,margins:{top:8,bottom:8,left:10,right:10},stripMaxWidth:1e3,stripWidth:2,maxNumStrips:500,stripHeight:15}}}),Ce=n(17),Ae=n(18),Se=n(58),Te=n(19),Me=n(20),Le=n(317),Ie=n(316),Pe=n(0);function De(e){var t=e.datasetName,n=e.stats;return Object(Pe.jsxs)(Le.a,{expand:"md",children:[Object(Pe.jsxs)(Le.a.Brand,{href:".",children:[Object(Pe.jsx)("img",{alt:"",src:"logo192.png",width:"25",height:"25",className:"d-inline-block align-top"})," ","CorGIE: ",Object(Pe.jsx)("span",{className:"text-underline",children:"Cor"}),"responding a"," ",Object(Pe.jsx)("span",{className:"text-underline",children:"G"}),"raph to ",Object(Pe.jsx)("span",{className:"text-underline",children:"I"}),"ts"," ",Object(Pe.jsx)("span",{className:"text-underline",children:"E"}),"mbedding"]}),Object(Pe.jsx)(Le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(Pe.jsxs)(Le.a.Collapse,{id:"responsive-navbar-nav",children:[Object(Pe.jsx)(Ie.a,{className:"mr-auto",children:Object(Pe.jsx)(Ie.a.Link,{href:"/upload",children:"Upload"})}),Object(Pe.jsx)(Le.a.Text,{className:"justify-content-end",children:t?"Dataset: ".concat(t," (V=").concat(n.numNodes,", E=").concat(n.numEdges,")"):""})]})]})}var Fe=n(305),_e=n(10),Re=n(56),He=n.n(Re);var Ge=function(e){var t=e.typeId,n=e.x,a=e.y,r=e.radius,s=e.style,i=e.events;return 0===t?Object(Pe.jsx)(_e.a,Object(d.a)(Object(d.a)({x:n,y:a,radius:r},s),i)):t<=2||0===(1&t)?Object(Pe.jsx)(_e.f,Object(d.a)(Object(d.a)({x:n,y:a,radius:r,sides:t+2},s),i)):Object(Pe.jsx)(_e.h,Object(d.a)(Object(d.a)({numPoints:t+2,innerRadius:r-1,outerRadius:r+2,x:n,y:a},s),i))},Be=(n(149),Object(a.memo)((function(e){var t=e.focalGroups,n=e.nodes,a=e.coords,r=e.focalBBox,s=e.nodeSize,i=e.useStroke;return Object(Pe.jsxs)(_e.c,{listening:!1,children:[Object(Pe.jsx)(_e.b,{children:!!r&&r.map((function(e,t){return Object(Pe.jsxs)(_e.b,{children:[Object(Pe.jsx)(_e.e,{x:e.x,y:e.y-14,width:37,height:14,strokeEnabled:!1,opacity:.8,fill:"rgb(231, 215, 164)"}),Object(Pe.jsx)(_e.i,{x:e.x+2,y:e.y-13,text:"foc-".concat(t),fontSize:14}),Object(Pe.jsx)(_e.e,Object(d.a)(Object(d.a)({},e),{},{stroke:"black",strokeWidth:1,fillEnabled:!1}))]},t)}))}),t.map((function(e,t){return Object(Pe.jsx)(_e.b,{children:e.map((function(e,t){return Object(Pe.jsx)(Ge,{x:a[e].x,y:a[e].y,radius:s,typeId:n[e].typeId,style:{fillEnabled:!1,stroke:i||"#000",strokeWidth:1,strokeEnabled:!!i}},t)}))},t)}))]})}))),We=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this.props,t=e.highlightedNodes,n=e.highlightedEdges,a=e.nodes,r=e.nodeColors,s=e.coords,i=e.nodeSize,o=e.edgeBundlePoints,c=e.showEdges,l=e.width,d=e.height;return Object(Pe.jsxs)(_e.c,{listening:!1,children:[Object(Pe.jsx)(_e.e,{x:0,y:0,width:l,height:d,fill:"white",opacity:.7,strokeEnabled:!1}),Object(Pe.jsx)(_e.b,{children:c&&!!n&&n.map((function(e,t){return s[e.source]&&s[e.target]&&Object(Pe.jsx)(_e.d,{points:o?o[e.eid]:[s[e.source].x,s[e.source].y,s[e.target].x,s[e.target].y],stroke:"black",strokeWidth:1,opacity:1,tension:o?.5:0},t)}))}),Object(Pe.jsx)(_e.b,{children:t.map((function(e,t){return s[e]&&Object(Pe.jsx)(Ge,{x:s[e].x,y:s[e].y,radius:i,typeId:a[e].typeId,style:{fill:r[e],strokeEnabled:!1}},t)}))})]})}}]),n}(a.PureComponent),ze=(Math.PI,function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this.props,t=e.hoveredNodes,n=e.hoveredEdges,a=e.nodes,r=e.coords,s=e.nodeColors,i=e.nodeSize,o=e.edgeBundlePoints,c=e.showEdges,l=e.width,d=e.height;return Object(Pe.jsxs)(_e.c,{listening:!1,children:[Object(Pe.jsx)(_e.e,{x:0,y:0,width:l,height:d,fill:"white",opacity:.7,strokeEnabled:!1}),Object(Pe.jsx)(_e.b,{children:c&&!!n&&n.map((function(e,t){return r[e.source]&&r[e.target]&&Object(Pe.jsx)(_e.d,{points:o?o[e.eid]:[r[e.source].x,r[e.source].y,r[e.target].x,r[e.target].y],stroke:"black",tension:o?.5:0,strokeWidth:1,opacity:1},t)}))}),Object(Pe.jsx)(_e.b,{children:t.map((function(e,t){return r[e]&&Object(Pe.jsx)(Ge,{x:r[e].x,y:r[e].y,radius:1.5*i,typeId:a[e].typeId,style:{fill:s[e],stroke:"black",strokeWidth:2}},t)}))})]})}}]),n}(a.PureComponent)),Ue={mouseDown:!1,startPoint:null,endPoint:null,brushedArea:null},Ve=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).stageRef=r.a.createRef(),a.state=Ue,a}return Object(Ae.a)(n,[{key:"callHighlightNodes",value:function(e){var t,n=this.props,a=n.nodes,r=n.highlightNodeType,s=n.highlightNodeLabel,i=this.props.layoutData.qt.retrieve(e),o=[],c=Object(h.a)(i);try{for(c.s();!(t=c.n()).done;){var l=t.value;P(a[l.id],r,s)&&L({x:l.x+.5,y:l.y+.5},e)&&o.push(l.id)}}catch(d){c.e(d)}finally{c.f()}console.log({candidates:i,targetNodes:o,brushedArea:e}),this.props.highlightNodes(o,e,this.props.fromView,null)}},{key:"_onMouseDown",value:function(){var e=this,t=this.stageRef.current.getPointerPosition(),n={mouseDown:!0,startPoint:t,endPoint:t,brushedArea:{x:t.x,y:t.y,width:0,height:0}};this.setState(n),this.stageRef.current.on("mousemove",(function(){var t=e.stageRef.current.getPointerPosition();e.setState({endPoint:t,brushedArea:e._getBrushedArea(t)})})),this.stageRef.current.on("mouseup",(function(){e.stageRef.current.off("mousemove"),e.stageRef.current.off("mouseup");var t=Object(d.a)({},e.state.brushedArea);e.setState(Ue),e.callHighlightNodes(t)}))}},{key:"_getBrushedArea",value:function(e){var t=this.state.startPoint,n=e,a=Math.min(t.x,n.x),r=Math.min(t.y,n.y);return{x:a,y:r,width:Math.max(t.x,n.x)-a,height:Math.max(t.y,n.y)-r}}},{key:"render",value:function(){var e=this,t=this.props,n=t.layoutData,a=t.nodes,r=t.nodeColors,s=t.selectedNodes,o=t.highlightedNodes,c=t.highlightedEdges,l=t.hoveredNodesAndNeighbors,h=t.hoveredEdges,u=t.fromView,j=t.colorBy,p=t.showEdges,b=t.useEdgeBundling,g=n.width,m=n.height,x=n.coords,f=n.groups,O=n.qt,v=n.focalBBox,y=g+2,N=m+2,w="bundled"===p&&b?n.edgeBundlePoints:null,k="emb"===u&&"umap"===j?"black":r,E=this.props.nodeSize;return"emb"===u&&E--,Object(Pe.jsx)(i.b.Consumer,{children:function(t){var n=t.store;return Object(Pe.jsx)(_e.g,{width:y,height:N,ref:e.stageRef,onMouseDown:O?e._onMouseDown.bind(e):function(){},children:Object(Pe.jsxs)(i.a,{store:n,children:["emb"===u&&"umap"===j&&Object(Pe.jsx)(Je,{w:g}),Object(Pe.jsx)(qe,{coords:x,groups:f,nodeSize:E,edgeBundlePoints:w,nodeColors:k,fromView:u,showEdges:p}),s.length>0&&Object(Pe.jsx)(Be,{focalGroups:s,focalBBox:v,coords:x,nodes:a,nodeColors:k,nodeSize:E,useStroke:!!e.props.useStrokeForFocal&&("emb"===u?"#aaa":"#000"),showEdges:p}),o.length>0&&Object(Pe.jsx)(We,{highlightedNodes:o,highlightedEdges:c,coords:x,edgeBundlePoints:w,nodes:a,nodeColors:r,nodeSize:E,width:y,height:N,showEdges:p}),l.length>0&&Object(Pe.jsx)(ze,{hoveredNodes:l,hoveredEdges:h,coords:x,nodes:a,edgeBundlePoints:w,nodeColors:r,nodeSize:E,width:y,height:N,showEdges:p}),e.state.brushedArea&&Object(Pe.jsx)(_e.c,{children:Object(Pe.jsx)(_e.e,Object(d.a)(Object(d.a)({},e.state.brushedArea),{},{fill:"blue",opacity:.3,stroke:"grey",strokeWidth:1}))})]})})}})}}]),n}(a.Component),Ke=function(e){return Object(o.b)({highlightNodes:J,hoverNode:Q,selectNodePair:ee},e)},Ye=Object(i.c)((function(e){return{nodes:e.graph.nodes,edges:e.graph.edges,nodeSize:e.param.nodeSize,useEdgeBundling:e.param.focalGraph.useEdgeBundling,nodeColors:e.nodeColors,colorBy:e.param.colorBy,selectedNodes:e.selectedNodes,highlightedNodes:e.highlightedNodes,highlightedEdges:e.highlightedEdges,hoveredNodesAndNeighbors:e.hoveredNodesAndNeighbors,hoveredEdges:e.hoveredEdges,highlightNodeType:e.param.highlightNodeType,highlightNodeLabel:e.param.highlightNodeLabel}}),Ke)(Ve);var qe=Object(i.c)((function(e){return{nodes:e.graph.nodes,edges:e.graph.edges}}),Ke)((function(e){var t=e.nodes,n=e.edges,r=e.coords,s=e.edgeBundlePoints,i=e.showEdges,o=e.nodeColors,c=e.groups,l=e.hoverNode,d=e.highlightNodes,h=e.nodeSize,u=e.fromView;console.log("BaseLayer render()",u);var j=Object(a.useCallback)(He()((function(e){return l(e)}),300));return Object(Pe.jsxs)(_e.c,{children:[i&&Object(Pe.jsx)(_e.b,{children:n.map((function(e,t){return r[e.source]&&r[e.target]&&Object(Pe.jsx)(_e.d,{points:s?s[t]:[r[e.source].x,r[e.source].y,r[e.target].x,r[e.target].y],stroke:"#aaa",strokeWidth:1,hitStrokeWidth:2,opacity:.3,tension:s?.5:0,onMouseOver:j.bind(null,[e.source,e.target]),onMouseOut:j.bind(null,null),onClick:d.bind(null,[e.source,e.target],null,"graph-edge",null)},t)}))}),Object(Pe.jsx)(_e.b,{children:r.map((function(e,n){return e&&Object(Pe.jsx)(Ge,{x:e.x,y:e.y,radius:h,typeId:t[n].typeId,style:{fill:Array.isArray(o)?o[n]:o,opacity:1,strokeEnabled:!1},events:{onMouseOver:j.bind(null,n),onMouseOut:j.bind(null,null),onClick:d.bind(null,[n],null,u,null)}},n)}))}),c&&Object(Pe.jsx)(_e.b,{children:c.map((function(e,t){return Object(Pe.jsxs)(_e.b,{children:[Object(Pe.jsx)(_e.e,{x:e.bounds.x,y:e.bounds.y-16,width:70+6*Math.floor(Math.log10(e.num)),height:16,opacity:.8,fill:"rgb(231, 215, 164)",stroke:"rgb(231, 215, 164)",strokeWidth:1}),Object(Pe.jsx)(_e.e,{x:e.bounds.x,y:e.bounds.y,width:e.bounds.width,height:e.bounds.height,stroke:"rgb(231, 215, 164)",strokeWidth:2,fillEnabled:!1}),Object(Pe.jsx)(_e.i,{text:"".concat(e.name," (#=").concat(e.num,")"),x:e.bounds.x+4,y:e.bounds.y-14,fontSize:12})]},t)}))})]})})),Je=Object(a.memo)((function(e){var t=e.w,n=t/5,a=new Array(n).fill(0);return Object(Pe.jsx)(_e.c,{listening:!1,children:a.map((function(e,t){return Object(Pe.jsx)(_e.b,{children:a.map((function(e,a){return Object(Pe.jsx)(_e.e,{x:5*t,y:5*a,width:5,height:5,fill:M(t/n,a/n),strokeEnabled:!1},a)}))},t)}))})})),Xe=function(){return Object(Pe.jsxs)("div",{style:{margin:"10px"},children:[Object(Pe.jsx)(Fe.a,{animation:"border",role:"status",size:"sm"}),Object(Pe.jsx)("span",{style:{marginLeft:"10px"},children:"Computing..."})]})};var Qe=Object(i.c)((function(e){return{initialLayout:e.initialLayout}}),(function(e){return Object(o.b)({changeFocalParam:ie},e)}))((function(e){var t=e.initialLayout;return Object(Pe.jsxs)("div",{className:"view",id:"initial-graph-view",children:[Object(Pe.jsx)("h5",{className:"view-title text-center",children:"Global Topology"}),Object(Pe.jsx)("div",{className:"view-body",children:t.running?Object(Pe.jsx)(Xe,{}):Object(Pe.jsx)(Ye,{layoutData:t,useStrokeForFocal:!0,fromView:"graph-layout",showEdges:!0})}),Object(Pe.jsxs)("div",{className:"view-footer",children:["#nodes: ",t.numNodes,", #edges: ",t.numEdges,", Layout algorithm:"," ",t.name]})]})})),Ze=n(313),$e=n(314),et=n(318),tt=n(306),nt=n(23),at=n(24),rt=n(57),st=function(e){var t=e.params,n=e.changeFocalParam,a=e.hops;return Object(Pe.jsxs)(Ze.a,{show:t.showSettings,centered:!0,id:"focal-layout-settings-modal",onHide:n.bind(null,"focalGraph.showSettings",!1),children:[Object(Pe.jsx)(Ze.a.Header,{closeButton:!0,children:Object(Pe.jsx)(Ze.a.Title,{children:"Settings for focal graph layout"})}),Object(Pe.jsx)(Ze.a.Body,{children:Object(Pe.jsxs)($e.a,{children:[Object(Pe.jsxs)($e.a.Group,{children:[Object(Pe.jsx)($e.a.Check,{custom:!0,type:"radio",id:"use-edge-bundling-1",checked:t.useEdgeBundling,onChange:n.bind(null,"focalGraph.useEdgeBundling",!0),label:"edge bundling (curved edges)"}),Object(Pe.jsx)($e.a.Check,{custom:!0,type:"radio",id:"use-edge-bundling-2",checked:!t.useEdgeBundling,onChange:n.bind(null,"focalGraph.useEdgeBundling",!1),label:"straight edges"})]}),a>1&&Object(Pe.jsxs)($e.a.Group,{children:[Object(Pe.jsx)($e.a.Check,{custom:!0,type:"radio",id:"use-global-mask-1",checked:t.useGlobalMask,onChange:n.bind(null,"focalGraph.useGlobalMask",!0),label:"use ".concat(a," hops to compute distance (as in GNN trainning)")}),Object(Pe.jsx)($e.a.Check,{custom:!0,type:"radio",id:"use-global-mask-2",checked:!t.useGlobalMask,onChange:n.bind(null,"focalGraph.useGlobalMask",!1),label:"use 1 hop only"})]})]})})]})};var it=Object(i.c)((function(e){return{hasFocalNodes:e.selectedNodes.length>0,hops:e.param.hops,focalAlg:e.param.focalGraph.layout,params:e.param.focalGraph,focalLayout:e.focalLayout}}),(function(e){return Object(o.b)({changeFocalParam:ie},e)}))((function(e){var t=e.focalLayout,n=e.hasFocalNodes,a=e.hops,r=e.params,s=e.changeFocalParam;return e.focalAlg,Object(Pe.jsxs)("div",{className:"view ".concat(n?"":"no-layout"),id:"focal-graph-view",children:[Object(Pe.jsxs)("h5",{className:"view-title text-center",children:["K-hop Topology",Object(Pe.jsx)("span",{style:{marginLeft:"5px",cursor:"pointer"},children:Object(Pe.jsx)(et.a,{placement:"right",overlay:Object(Pe.jsxs)(tt.a,{id:"distance-view-tooltip",children:["Nodes of each group are layout using UMAP independently with the topological distance metric (Jaccard Index). Nodes outside ",a," hops are not shown."]}),children:Object(Pe.jsx)(nt.a,{icon:rt.a})})}),Object(Pe.jsx)("span",{className:"right-btn",onClick:s.bind(null,"focalGraph.showSettings",!0),children:Object(Pe.jsx)(nt.a,{icon:at.i})})]}),Object(Pe.jsxs)("div",{className:"view-body",children:[!n&&Object(Pe.jsx)("div",{children:"No focal groups yet. Try highlight nodes (by brushing / clicking) and then create focal groups."}),n&&Object(Pe.jsxs)("div",{children:[t.running?Object(Pe.jsx)(Xe,{}):Object(Pe.jsx)(Ye,{layoutData:t,useStrokeForFocal:!1,fromView:"graph-layout",showEdges:!r.useEdgeBundling||"bundled"}),!!t.runningMsg&&Object(Pe.jsxs)("div",{style:{margin:"10px"},children:[Object(Pe.jsx)(Fe.a,{animation:"border",role:"status",size:"sm"}),Object(Pe.jsx)("span",{style:{marginLeft:"10px"},children:t.runningMsg})]})]})]}),n&&Object(Pe.jsxs)("div",{className:"view-footer",children:["#nodes: ",t.numNodes,", #edges: ",t.numEdges]}),Object(Pe.jsx)(st,{params:r,changeFocalParam:s,hops:a})]})})),ot=n(315),ct=n(307),lt=n(165);function dt(e){var t=e.cn,n=e.scale,a=e.domain,r=e.numFormat,s=a||n.domain(),i=n(s[0]),o=n((s[0]+s[1])/2),c=n(s[1]);return Object(Pe.jsxs)("div",{className:t,children:[Object(Pe.jsx)("span",{style:{marginRight:"3px"},children:r?r(s[0]):s[0]}),Object(Pe.jsx)("div",{style:{display:"inline-block",height:"10px",width:"100px",background:"linear-gradient(90deg, ".concat(i," 0%, ").concat(o," 50%, ").concat(c," 100%)")}}),Object(Pe.jsx)("span",{style:{marginLeft:"3px"},children:r?r(s[1]):s[1]})]})}var ht=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){var e;Object(Ce.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).colorByNaming={umap:"UMAP position","pred-labels":"predicted labels","true-labels":"true labels",correctness:"label correctness","node-type":"node type"},e.nodeLabelNaming={all:"all",correct:"correct prediction",wrong:"wrong prediction"},e}return Object(Ae.a)(n,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.attrMeta,n=e.numNodeClasses,a=0;a<t.length;a++){var r=t[a];this.colorByNaming[a]="".concat(r.nodeType,": ").concat(r.name)}if(n)for(var s=0;s<n;s++)this.nodeLabelNaming["pred-".concat(s)]="predicted: ".concat(s),this.nodeLabelNaming["true-".concat(s)]="true: ".concat(s)}},{key:"hoverNodeType",value:function(e){var t=this.props.graph.nodes.filter((function(t){return t.typeId===e})).map((function(e){return e.id}));this.props.hoverNode(t)}},{key:"hoverNodeLabel",value:function(e){var t=this.props.graph.nodes,n="pred-labels"===this.props.param.colorBy?"pl":"tl",a=t.filter((function(t){return t[n]===e})).map((function(e){return e.id}));this.props.hoverNode(a)}},{key:"callSearch",value:function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()),a=n.searchLabel,r=n.searchId;if(a)this.props.searchNodes(a,null);else{var s=parseInt(r);isNaN(s)||this.props.searchNodes(null,s)}}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.graph,r=n.param,s=n.attrMeta,i=n.changeParam,o=n.hoverNode,c=n.highlightNodes,l=this.props,d=l.numNodeClasses,h=l.hasLinkPredictions,u=this.colorByNaming,p=this.nodeLabelNaming,b=a.nodeTypes,g=r.colorBy,m=r.colorScale,x=r.nodeSize,f=r.hops,O=r.hopsHover,v=r.hopsHighlight,y=r.nodeFilter.searchShown,N=r.highlightNodeType,w=r.highlightNodeLabel,k=Number.isInteger(g);return k&&(e=m.domain()[0]<1?Object(j.d)("~g"):Object(j.d)("~s")),Object(Pe.jsxs)("div",{id:"settings-view",className:"view",children:[Object(Pe.jsx)("h5",{className:"view-title text-center",children:"Settings"}),Object(Pe.jsxs)("div",{className:"view-body",children:[Object(Pe.jsxs)("div",{style:{marginRight:"5px"},children:[b.length>1&&Object(Pe.jsx)("div",{className:"setting-item",children:Object(Pe.jsx)("div",{className:"node-rep-legends node-shape",children:b.map((function(e,n){return Object(Pe.jsxs)("div",{className:"legend-item",onMouseOver:t.hoverNodeType.bind(t,n),onMouseOut:o.bind(null,null),onClick:c.bind(null,null,null,"node-type",n),children:[Object(Pe.jsx)("div",{className:"visual-block",children:Object(Pe.jsx)(_e.g,{width:14,height:14,children:Object(Pe.jsx)(_e.c,{children:Object(Pe.jsx)(Ge,{x:7,y:7,radius:5,typeId:n,style:{fill:"node-type"===g?e.color:"grey",strokeEnabled:!1}})})})}),Object(Pe.jsx)("div",{className:"legend-label",children:"".concat(e.name," (").concat(e.count,")")})]},n)}))})}),Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsx)("div",{className:"setting-label",children:"Color:"}),Object(Pe.jsx)("div",{style:{display:"inline-block"},children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){i("colorBy",e,!1)},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"color-by-toggle-btn",size:"xxs",variant:"primary",children:u[g]}),Object(Pe.jsxs)(ot.a.Menu,{children:[Object(Pe.jsx)(ot.a.Item,{eventKey:"umap",active:"umap"===g,children:u.umap}),d&&Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(ot.a.Divider,{}),["pred-labels","true-labels","correctness"].map((function(e){return Object(Pe.jsx)(ot.a.Item,{eventKey:e,active:g===e,children:u[e]},e)}))]}),h&&Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(ot.a.Divider,{}),Object(Pe.jsx)(ot.a.Item,{eventKey:"correctness",active:"correctness"===g,children:u.correctness})]}),s.length>0&&Object(Pe.jsx)(ot.a.Divider,{}),s.map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:t,active:g===t,children:"".concat(e.nodeType,": ").concat(e.name)},t)})),b.length>1&&Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(ot.a.Divider,{}),Object(Pe.jsx)(ot.a.Item,{eventKey:"node-type",children:u["node-type"]})]})]})]})}),k&&Object(Pe.jsx)(dt,{cn:"node-rep-legends node-color",scale:m,numFormat:e}),"correctness"===g&&Object(Pe.jsxs)("div",{className:"node-rep-legends node-color",children:[Object(Pe.jsxs)("div",{className:"legend-item",children:[Object(Pe.jsx)("div",{className:"visual-block",style:{backgroundColor:m(!1)}}),Object(Pe.jsx)("div",{className:"legend-label",children:"correct"})]}),Object(Pe.jsxs)("div",{className:"legend-item",children:[Object(Pe.jsx)("div",{className:"visual-block",style:{backgroundColor:m(!0)}}),Object(Pe.jsx)("div",{className:"legend-label",children:"wrong"})]})]}),("pred-labels"===g||"true-labels"===g)&&Object(Pe.jsx)("div",{className:"node-rep-legends node-color",children:Object(D.range)(d).map((function(e){return Object(Pe.jsxs)("div",{className:"legend-item",onMouseOver:t.hoverNodeLabel.bind(t,e),onMouseOut:o.bind(null,null),onClick:c.bind(null,null,null,"node-label",e),children:[Object(Pe.jsx)("div",{className:"visual-block",style:{backgroundColor:m(e)}}),Object(Pe.jsx)("div",{className:"legend-label",children:e})]},e)}))})]}),Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsx)("div",{className:"setting-label",children:"Size:"}),Object(Pe.jsxs)(ct.a,{size:"xxs",children:[Object(Pe.jsx)(lt.a,{variant:"outline-secondary",onClick:i.bind(null,"nodeSize",x+1,!1,null),children:"+"}),Object(Pe.jsx)(lt.a,{variant:"outline-secondary",onClick:function(){x>1&&i("nodeSize",x-1)},children:"-"})]})]})]}),Object(Pe.jsxs)("div",{style:{marginTop:"10px"},children:[(b.length>1||d)&&Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsx)("div",{style:{marginRight:"5px"},children:"brushable targets: "}),b.length>1&&Object(Pe.jsx)("div",{style:{marginRight:"15px"},children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){i("highlightNodeType","all"===e?e:parseInt(e))},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"highlight-node-type-dropdown",size:"xxs",variant:"primary",children:"all"===N?"all":b[N].name}),Object(Pe.jsxs)(ot.a.Menu,{children:[Object(Pe.jsx)(ot.a.Item,{eventKey:"all",active:"all"===N,children:"all"}),Object(Pe.jsx)(ot.a.Divider,{}),b.map((function(e,t){return Object(Pe.jsxs)(ot.a.Item,{eventKey:t,active:N===t,children:["node type: ",e.name]},t)}))]})]})}),d&&Object(Pe.jsx)("div",{children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){i("highlightNodeLabel",e)},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"highlight-node-type-dropdown",size:"xxs",variant:"primary",children:p[w]}),Object(Pe.jsxs)(ot.a.Menu,{children:[Object(Pe.jsx)(ot.a.Item,{eventKey:"all",active:"all"===w,children:p.all}),Object(Pe.jsx)(ot.a.Divider,{}),Object(Pe.jsx)(ot.a.Item,{eventKey:"correct",active:"correct"===w,children:p.correct}),Object(Pe.jsx)(ot.a.Item,{eventKey:"wrong",active:"wrong"===w,children:p.wrong}),Object(Pe.jsx)(ot.a.Divider,{}),Object(D.range)(d).map((function(e){return"pred-".concat(e)})).map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:e,active:w===e,children:"predicted: ".concat(t)},e)})),Object(Pe.jsx)(ot.a.Divider,{}),Object(D.range)(d).map((function(e){return"true-".concat(e)})).map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:e,active:w===e,children:"truth: ".concat(t)},e)}))]})]})})]}),Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsx)("span",{style:{marginRight:"5px"},children:"hops for hover:"}),Object(Pe.jsx)("div",{style:{display:"inline-block"},children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){i("hopsHover",parseInt(e),!1)},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"hops-hover",size:"xxs",variant:"primary",children:O}),Object(Pe.jsx)(ot.a.Menu,{children:new Array(f+1).fill(0).map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:t,active:O===t,children:t},t)}))})]})})]}),Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsx)("span",{style:{marginRight:"5px"},children:"hops for highlight:"}),Object(Pe.jsx)("div",{style:{display:"inline-block"},children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){i("hopsHighlight",parseInt(e),!1)},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"hops-highlight",size:"xxs",variant:"primary",children:v}),Object(Pe.jsx)(ot.a.Menu,{children:new Array(f+1).fill(0).map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:t,active:v===t,children:t},t)}))})]})})]}),Object(Pe.jsxs)("div",{className:"setting-item",children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("span",{style:{cursor:"pointer"},onClick:i.bind(null,"nodeFilter.searchShown",null,!0,null),children:Object(Pe.jsx)(nt.a,{icon:y?at.b:at.c})}),Object(Pe.jsx)("span",{style:{marginLeft:"5px"},children:"Search nodes by"})]}),y&&Object(Pe.jsxs)($e.a,{inline:!0,onSubmit:this.callSearch.bind(this),style:{marginLeft:"9px"},children:[Object(Pe.jsx)($e.a.Control,{className:"search-text-box",id:"search-node-label",placeholder:"label",name:"searchLabel",size:"sm"}),Object(Pe.jsx)("span",{style:{margin:"0 5px"},children:"or"}),Object(Pe.jsx)($e.a.Control,{className:"search-text-box",id:"search-node-id",placeholder:"id",name:"searchId",size:"sm"}),Object(Pe.jsx)(lt.a,{variant:"outline-secondary",size:"xs",style:{marginLeft:"5px"},type:"submit",children:"search"})]})]})]})]}),"correctness"===g&&h&&Object(Pe.jsx)("div",{className:"view-footer",children:"Note: nodes with a wrong predicted link are deemed wrong."})]})}}]),n}(a.Component),ut=Object(i.c)((function(e){return{graph:e.graph,param:e.param,attrMeta:e.attrMeta,numNodeClasses:e.numNodeClasses,hasLinkPredictions:e.hasLinkPredictions}}),(function(e){return Object(o.b)({highlightNodes:J,hoverNode:Q,changeHops:le,changeParam:se,searchNodes:de},e)}))(ht),jt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"renderForm",value:function(){var e=this.props,t=e.showEdges,n=e.changeParam;return Object(Pe.jsx)($e.a,{inline:!0,children:Object(Pe.jsxs)($e.a.Group,{children:[Object(Pe.jsx)($e.a.Label,{children:"Show graph edges: "}),Object(Pe.jsx)($e.a.Check,{style:{marginLeft:"5px"},type:"radio",id:"emb-show-edge-none",checked:!t,onChange:n.bind(null,"embeddings.showEdges",!1,null,null),label:"None"}),Object(Pe.jsx)($e.a.Check,{style:{marginLeft:"5px"},type:"radio",id:"emb-show-edge-bundle",checked:"bundled"===t,onChange:n.bind(null,"embeddings.showEdges","bundled",null,null),label:"bundled"}),Object(Pe.jsx)($e.a.Check,{style:{marginLeft:"5px"},type:"radio",id:"emb-show-edge-straight",checked:"straight"===t,onChange:n.bind(null,"embeddings.showEdges","straight",null,null),label:"straight"})]})})}},{key:"render",value:function(){var e=this.props,t=e.numDim,n=e.layouts,a=e.showEdges,r=e.maxWindow,s=e.changeParam;return r?Object(Pe.jsxs)(Ze.a,{show:!0,centered:!0,id:"embeddings-view",onHide:s.bind(null,"embeddings.maxWindow",!1,null,null),children:[Object(Pe.jsx)(Ze.a.Header,{closeButton:!0,children:Object(Pe.jsxs)(Ze.a.Title,{children:["Latent space ",Object(Pe.jsxs)("small",{children:["(UMAP, #dim=",t,")"]})]})}),Object(Pe.jsxs)(Ze.a.Body,{children:[Object(Pe.jsx)(Ye,{layoutData:n.layoutMax,useStrokeForFocal:!0,fromView:"emb",showEdges:a}),this.renderForm(),Object(Pe.jsx)(ut,{})]})]}):Object(Pe.jsxs)("div",{id:"embeddings-view",className:"view",children:[Object(Pe.jsxs)("h5",{className:"view-title text-center",children:[Object(Pe.jsx)("span",{className:"left-btn",onClick:s.bind(null,"embeddings.maxWindow",!0,null,null),children:Object(Pe.jsx)(nt.a,{icon:at.g})}),"Latent Space ",Object(Pe.jsxs)("small",{children:["(UMAP, #dim=",t,")"]})]}),Object(Pe.jsxs)("div",{className:"view-body",children:[Object(Pe.jsx)(Ye,{layoutData:r?n.layoutMax:n.layoutMin,useStrokeForFocal:!0,fromView:"emb",showEdges:a}),this.renderForm()]})]})}}]),n}(a.Component),pt=Object(i.c)((function(e){var t=e.latent.emb,n=e.param.embeddings.maxWindow;return{numDim:t?t[0].length:null,showEdges:e.param.embeddings.showEdges,maxWindow:n,layouts:e.latent}}),(function(e){return Object(o.b)({changeParam:se},e)}))(jt),bt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nodeTypes,n=e.hoverNode;if(!n)return Object(Pe.jsx)("div",{});var a=!n.label;return Object(Pe.jsxs)("div",{id:"node-label-tooltip",children:[t.length>1&&Object(Pe.jsxs)("div",{children:["Type: ",t[n.typeId].name]}),Object(Pe.jsx)("div",{children:a?"ID: ".concat(n.id):"Label: ".concat(n.label)})]})}}]),n}(a.Component),gt=Object(i.c)((function(e){return{nodeTypes:e.graph.nodeTypes,hoverNode:1===e.hoveredNodes.length?e.graph.nodes[e.hoveredNodes[0]]:null}}))(bt),mt=n(5),xt=n.n(mt),ft={mouseDown:!1,startPoint:null,endPoint:null,brushedArea:null},Ot=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).boxRef=r.a.createRef(),a.state=ft,a}return Object(Ae.a)(n,[{key:"_onMouseDown",value:function(e){var t={mouseDown:!0,startPoint:{x:e.pageX,y:e.pageY},mouseMoveFunc:this._onMouseMove.bind(this),mouseUpFunc:this._onMouseUp.bind(this)};t.brushedArea=this._calcBrushedArea(t.startPoint,t.startPoint),this.setState(t),window.document.addEventListener("mousemove",t.mouseMoveFunc),window.document.addEventListener("mouseup",t.mouseUpFunc)}},{key:"_onMouseUp",value:function(e){window.document.removeEventListener("mousemove",this.state.mouseMoveFunc),window.document.removeEventListener("mouseup",this.state.mouseUpFunc);var t=Object(d.a)({},this.state.brushedArea);this.setState(ft),this.props.isRange?this.props.brushedFunc(t.x,t.x+t.width):this.props.brushedFunc(t)}},{key:"_onMouseMove",value:function(e){if(e.preventDefault(),this.state.mouseDown){var t={x:e.pageX,y:e.pageY};this.setState({endPoint:t,brushedArea:this._calcBrushedArea(this.state.startPoint,t)})}}},{key:"_calcBrushedArea",value:function(e,t){if(null==e||null==t)return null;var n=this.boxRef.current.getBoundingClientRect();return{x:Math.min(e.x,t.x)-(n.left+window.scrollX),y:Math.min(e.y,t.y)-(n.top+window.scrollY),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}}},{key:"render",value:function(){var e=this.state.brushedArea,t=this.props.isRange;return Object(Pe.jsxs)("g",{children:[null!=e&&Object(Pe.jsx)("rect",{className:"brushed-area",x:e.x,y:t?0:e.y,width:e.width,height:t?this.props.height:e.height}),null==e&&null!==this.props.brushedArea&&Object(Pe.jsx)("rect",Object(d.a)({className:"brushed-area"},this.props.brushedArea)),Object(Pe.jsx)("rect",{className:"brushable-area",x:0,y:0,width:this.props.width,height:this.props.height,ref:this.boxRef,onMouseDown:this._onMouseDown.bind(this),style:{cursor:"crosshair"}})]})}}]),n}(a.Component);function vt(e){var t=e.bins,n=e.spec,a=e.xDomain,r=e.xLabel,s=e.yLabel,i=e.hVal,o=e.brushedFunc,c=e.brushedRange,l=e.hovered,d=e.highlighted,h=n.margins,u=n.width,p=n.height,b=Object(j.h)(t.map((function(e){return e.length}))),g=Object(j.i)().domain([0,b]).range([0,p]).nice(),m=Object(j.i)().domain(a||[t[0].x0,t[t.length-1].x1]).range([0,u]).nice(),x=m.ticks(3),f=m.tickFormat(3,".2~s"),O=Math.max(1,Math.floor(p/20)),v=g.ticks(O),y=g.tickFormat(O,".2~s"),N=h.top+(s?10:0),w=h.left+h.right+u,k=N+h.bottom+p+(r?15:0);return Object(Pe.jsx)("svg",{width:w,height:k,onClick:function(){console.log("click histo")},children:Object(Pe.jsxs)("g",{transform:"translate(".concat(h.left,",").concat(N,")"),className:"histogram",children:[t.map((function(e,t){return Object(Pe.jsx)("rect",{className:"bar",x:m(e.x0),y:p-g(e.length),width:m(e.x1)-m(e.x0)-1,height:g(e.length),children:Object(Pe.jsxs)("title",{children:["[",e.x0,"-",e.x1,"] count: ",e.length]})},t)})),Object(Pe.jsxs)("g",{className:"axis",transform:"translate(0,".concat(p,")"),children:[Object(Pe.jsx)("line",{x1:-3,y1:0,x2:u+5,y2:0,markerEnd:"url(#axis-arrow-head)"}),x.map((function(e,t){return Object(Pe.jsxs)("g",{transform:"translate(".concat(m(e),",0)"),children:[Object(Pe.jsx)("line",{x1:0,y1:0,x2:0,y2:4}),Object(Pe.jsx)("text",{x:0,y:14,textAnchor:"middle",children:f(e)})]},t)})),r&&Object(Pe.jsx)("text",{x:u,y:20,textAnchor:"end",children:r})]}),Object(Pe.jsxs)("g",{className:"axis",children:[Object(Pe.jsx)("line",{x1:-2,y1:p,x2:-2,y2:-5,markerEnd:"url(#axis-arrow-head)"}),v.map((function(e,t){return Object(Pe.jsxs)("g",{transform:"translate(0,".concat(p-g(e),")"),children:[Object(Pe.jsx)("line",{x1:-2,y1:0,x2:-6,y2:0}),Object(Pe.jsx)("text",{x:-10,y:3,textAnchor:"end",children:y(e)})]},t)})),s&&Object(Pe.jsx)("text",{x:5,y:-5,children:s})]}),o&&Object(Pe.jsx)(Ot,{width:u,height:p,isRange:!0,brushedFunc:function(e,t){var n=m.invert(e),a=m.invert(t);o(n,a)},brushedArea:c?{x:m(c[0]),y:0,width:m(c[1])-m(c[0]),height:p}:null}),(l||d)&&Object(Pe.jsx)("rect",{x:0,y:0,width:u,height:p,style:{stroke:"none",fill:"white",fillOpacity:".7"}}),d&&d.bins.map((function(e,t){return Object(Pe.jsx)("rect",{className:"bar highlighted",x:m(e.x0),y:p-g(e.length),width:m(e.x1)-m(e.x0)-1,height:g(e.length),children:Object(Pe.jsxs)("title",{children:["[",e.x0,"-",e.x1,"] count: ",e.length]})},t)})),l&&l.bins.map((function(e,t){return Object(Pe.jsx)("rect",{className:"bar hovered",x:m(e.x0),y:p-g(e.length),width:m(e.x1)-m(e.x0)-1,height:g(e.length),children:Object(Pe.jsxs)("title",{children:["[",e.x0,"-",e.x1,"] count: ",e.length]})},t)})),i&&Object(Pe.jsxs)("g",{className:"value-marker",transform:"translate(".concat(m(i),",0)"),children:[Object(Pe.jsx)("line",{x1:0,y1:0,x2:0,y2:p}),Object(Pe.jsx)("rect",{x:-25,y:-10,width:50,height:18}),Object(Pe.jsx)("text",{x:0,y:3,textAnchor:"middle",children:f(i)})]})]})})}var yt=Object(a.memo)(vt);function Nt(e){var t=e.values,n=e.hovered,a=e.highlighted,r=e.scale,s=e.spec,i=e.hoverFunc,o=e.highlightFunc,c=s.margins,l=s.cellSize,d=s.cellGap,h=s.stripMaxWidth,u=t.length,j=l+d,p=Math.floor(h/j),b=Math.ceil(u/p),g=j*p+c.left+c.right,m=j*b+c.top+c.bottom;return Object(Pe.jsx)("svg",{width:g,height:m,className:"feature-matrix",children:Object(Pe.jsx)("g",{transform:"translate(".concat(c.left,",").concat(c.top,")"),children:t.map((function(e,t){return Object(Pe.jsx)("rect",{className:xt()("cell",{hovered:n&&n.hasOwnProperty(t)&&0!==n[t],highlighted:a&&a.hasOwnProperty(t)&&0!==a[t]}),x:t%p*j,y:Math.floor(t/p)*j,width:l,height:l,fill:r(e),onMouseEnter:i.bind(null,[t]),onMouseLeave:i.bind(null,null),onClick:o.bind(null,[t]),children:Object(Pe.jsxs)("title",{children:["feature index: ",t," count: ",e]})},t)}))})})}function wt(e){var t=e.compressedCnts,n=e.hovered,a=e.highlighted,r=e.colorScale,s=e.spec,i=e.stripMapping,o=e.hoverFunc,c=e.highlightFunc,l=s.stripHeight,d=s.margins,h=s.stripWidth,u=t.length*h+d.left+d.right,j=l+d.top+d.bottom;return Object(Pe.jsx)("svg",{width:u,height:j,className:"feature-strips",children:Object(Pe.jsxs)("g",{transform:"translate(".concat(d.left,",").concat(d.top,")"),children:[Object(Pe.jsx)("g",{children:t.map((function(e,t){return Object(Pe.jsx)("line",{className:xt()("strip",{hovered:n&&n.hasOwnProperty(t)&&0!==n[t],highlighted:a&&a.hasOwnProperty(t)&&0!==a[t]}),x1:t*h,y1:0,x2:t*h,y2:l,stroke:r(e),style:{strokeWidth:"".concat(h,"px")},onMouseEnter:o.bind(null,i[t]),onMouseLeave:o.bind(null,null),onClick:c.bind(null,i[t]),children:Object(Pe.jsxs)("title",{children:["feature index: [",i[t].toString(),"], sum of counts: ",e]})},t)}))}),Object(Pe.jsx)("rect",{x:-2,y:0,width:t.length*h+2,height:l,style:{strokeWidth:"1px",stroke:"grey",strokeDasharray:"5,5",fill:"None"}})]})})}var kt=Object(i.c)(null,(function(e){return Object(o.b)({hoverNode:Q,highlightNodes:J},e)}))((function(e){var t=e.displayId,n=e.data,r=e.stripMapping,s=e.hovered,i=e.highlighted,o=e.collapsed,c=e.toggleFunc,l=e.spec,d=e.legendText,u=e.hoverNode,j=e.highlightNodes,p=n.cnts,b=n.compressedCnts,g=n.scale,m=n.mode,x=g.domain(),f=g(x[0]),O=g((x[0]+x[1])/2),v=g(x[1]),y=Object(a.useCallback)(He()((function(e){if(e&&e.length){var a,r=[],s=Object(h.a)(e);try{for(s.s();!(a=s.n()).done;){var i=a.value;n.featToNid.hasOwnProperty(i)&&(r=r.concat(n.featToNid[i]))}}catch(o){s.e(o)}finally{s.f()}u(r,{cellIds:e,displayId:t})}else u(null)}),300)),N=function(e){var a,r=[],s=Object(h.a)(e);try{for(s.s();!(a=s.n()).done;){var i=a.value;n.featToNid.hasOwnProperty(i)&&(r=r.concat(n.featToNid[i]))}}catch(o){s.e(o)}finally{s.f()}j(r,null,"feature",{displayId:t,cellIds:e})};return Object(Pe.jsxs)("div",{className:"feature-combo",children:[Object(Pe.jsx)("div",{children:Object(Pe.jsx)(wt,{compressedCnts:b,stripMapping:r,hovered:s&&s.displayId===t?s.compressedCnts:null,highlighted:i&&i.displayId===t?i.compressedCnts:null,colorScale:g,spec:l,hoverFunc:y,highlightFunc:N})}),!o&&Object(Pe.jsx)("div",{children:Object(Pe.jsx)(Nt,{values:p,hovered:s&&s.displayId===t?s.cnts:null,highlighted:i&&i.displayId===t?i.cnts:null,mode:m,scale:g,spec:l,hoverFunc:y,highlightFunc:N})}),Object(Pe.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(Pe.jsx)("span",{children:Object(Pe.jsxs)(lt.a,{variant:"outline-secondary",size:"xxs",onClick:c,children:[o?"Show":"Hide"," feature matrix"]})}),Object(Pe.jsx)("span",{style:{marginLeft:"15px",marginRight:"10px"},children:"strip / cell color: "}),Object(Pe.jsx)("span",{style:{marginRight:"3px"},children:x[0]}),Object(Pe.jsx)("div",{style:{display:"inline-block",height:"10px",width:"100px",background:"linear-gradient(90deg, ".concat(f," 0%, ").concat(O," 50%, ").concat(v," 100%)")}}),Object(Pe.jsx)("span",{style:{marginLeft:"3px"},children:x[1]}),Object(Pe.jsx)("span",{style:{marginLeft:"10px"},children:d})]})]})})),Et=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"findBrushedNodesAndDispatch",value:function(e,t,n,a,r){var s,i=this.props,o=i.nodes,c=i.selectedNodes;s=0===t?o.filter((function(t){return e===t.type&&a<=t[n]&&t[n]<=r})).map((function(e){return e.id})):c[t-1].filter((function(t){return e===o[t].type&&a<=o[t][n]&&o[t][n]<=r})),this.props.highlightNodes(s,[a,r],"node-attr",{attr:n,row:t})}},{key:"render",value:function(){var e,t,n,a=this,r=this.props,s=r.param,i=r.nodeAttrs,o=r.featureAgg,c=r.hoveredNodes,l=r.changeParam,d=this.props.spec.histogram,h=this.props.spec.partialHistogram,u=s.nodeFilter;return c&&1===c.length&&(e=this.props.nodes[c[0]]),o.active&&(t=o.display.map((function(e,t){return Object(Pe.jsxs)("div",{className:"stuff-container-hori",children:[Object(Pe.jsx)("div",{className:"container-title",children:e.title}),Object(Pe.jsx)("div",{className:"container-body",children:Object(Pe.jsx)(kt,{displayId:t,data:e,stripMapping:o.stripMapping,spec:a.props.spec.feature,collapsed:s.features.collapsed[t],hovered:o.hovered,highlighted:o.highlighted,toggleFunc:l.bind(a,"features.collapsed",null,!0,t),legendText:"diff"===e.title?"|counts of foc-0 - counts of foc-1|":"#nodes"})})]},t)}))),i.active&&(n=i.display.map((function(t,n){return Object(Pe.jsxs)("div",{className:"stuff-container-hori",children:[Object(Pe.jsx)("div",{className:"container-title",children:t.title}),Object(Pe.jsx)("div",{className:"container-body",children:t.data.map((function(t,r){return Object(Pe.jsxs)("div",{className:"histogram-block",children:[0===n&&Object(Pe.jsx)("div",{className:"histogram-title",children:t.name}),0===t.values.length?Object(Pe.jsx)("div",{className:"text-center",style:{width:d.width+d.margins.left+d.margins.right},children:Object(Pe.jsx)(nt.a,{icon:at.a})}):Object(Pe.jsx)(yt,{bins:t.bins,spec:n?h:d,hVal:i.hovered&&i.hovered.displayId===n&&e&&e.type===t.nodeType?e[t.name]:null,hovered:i.hovered&&i.hovered.displayId===n?i.hovered.data[r]:null,highlighted:i.highlighted&&!i.hovered&&i.highlighted.displayId===n?i.highlighted.data[r]:null,brushedFunc:a.findBrushedNodesAndDispatch.bind(a,t.nodeType,n,t.name),brushedRange:u.whichRow===n&&u.whichAttr===t.name?u.brushedArea:null})]},r)}))})]},n)}))),Object(Pe.jsxs)("div",{id:"node-attr-view",className:"view",children:[Object(Pe.jsxs)("h5",{className:"view-title text-center",children:["Node Features (#=",o.active?o.numFeatures:i.numAttrs,")",Object(Pe.jsx)("span",{style:{marginLeft:"5px",cursor:"pointer"},children:Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsxs)(tt.a,{id:"neighbor-latent-map-tooltip",children:[Object(Pe.jsx)("span",{children:"Each row shows feature distribution of all / a focal group of nodes."}),o.active&&Object(Pe.jsx)("span",{style:{marginLeft:"5px"},children:"More saturated color indicates a bigger count of nodes for row foc-i, or a bigger difference for row diff."}),this.props.selectedNodes.length>2&&Object(Pe.jsx)("div",{style:{fontWeight:"bold"},children:"Note: the diff will only show up when there are exactly 2 focal groups."})]}),children:Object(Pe.jsx)(nt.a,{icon:rt.a})})})]}),Object(Pe.jsxs)("div",{className:"view-body",children:[t,n]})]})}}]),n}(a.Component),Ct=Object(i.c)((function(e){return{nodes:e.graph.nodes,param:e.param,nodeAttrs:e.nodeAttrs,featureAgg:e.featureAgg,hoveredNodes:e.hoveredNodes,selectedNodes:e.selectedNodes,spec:e.spec}}),(function(e){return Object(o.b)({changeParam:se,highlightNodes:J},e)}))(Et),At=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selectedNodes,n=e.highlightedNodes,a=e.numHighlightsAndFocus,r=e.hideHighlightView,s=this.props,i=s.unseenTopK,o=s.hasLinkPredictions,c=this.props,l=c.selectNodes,d=c.selectNodePair,h=c.highlightNodes,u=c.highlightNodePairs,j=c.changeParam,p=n.length&&a===n.length,b=[];if(b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsxs)(tt.a,{id:"action-tooltip-create",children:[p?"single out ":"create ","a new focal group"]}),children:Object(Pe.jsx)("div",{className:"circle action",onClick:l.bind(null,p?"SINGLE OUT":"CREATE",n,null),children:"create"})})),b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsx)(tt.a,{id:"action-tooltip-clear",children:"Clear highlights"}),children:Object(Pe.jsx)("div",{className:"circle action",onClick:h.bind(null,[],null,null,null),children:"clear"})})),2===n.length&&b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsx)(tt.a,{id:"action-tooltip-compare",children:"Remove all and compare the two nodes"}),children:Object(Pe.jsx)("div",{className:"circle action",onClick:d.bind(null,n[0],n[1]),children:"compare"})})),t.length>0&&!p)for(var g=0;g<t.length;g++)b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsx)(tt.a,{id:"action-tooltip-add-to",children:"Add the highlighted nodes to an existing focal group"}),children:Object(Pe.jsxs)("div",{className:"circle action",onClick:l.bind(null,"APPEND",n,g),children:["add to ",Object(Pe.jsx)("br",{})," foc-",g]})}));p&&b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsx)(tt.a,{id:"action-tooltip-remove-from",children:"Remove highlighted nodes from focus group"}),children:Object(Pe.jsx)("div",{className:"circle action",onClick:l.bind(null,"REMOVE FROM",n,null),children:"purge"})})),o&&b.push(Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsxs)(tt.a,{id:"action-tooltip-recomm",children:["List top ",i," predicted unseen edges"]}),children:Object(Pe.jsx)("div",{className:"circle action",onClick:u.bind(null,null,null,null,null,!0),children:"predict"})}));var m=b.length,x=Math.PI/(m+1),f=m<5?110:120;return Object(Pe.jsxs)("div",{className:"view ".concat(n.length&&!r?"":"hide"),id:"highlight-view",children:[Object(Pe.jsx)("div",{className:"paw"}),Object(Pe.jsxs)("h5",{className:"view-title center-pad",children:[n.length," nodes ",Object(Pe.jsx)("br",{}),"highlighted"]}),Object(Pe.jsx)("div",{style:{position:"absolute",top:r&&n.length?"170px":"-5px",right:r?"65px":"-50px",color:"black",cursor:"pointer",zIndex:250},onClick:j.bind(null,"hideHighlightView",null,!0,null),children:Object(Pe.jsx)(et.a,{placement:"bottom",overlay:Object(Pe.jsxs)(tt.a,{id:"action-tooltip-remove-from",children:[r?"Show":"Hide"," menu"]}),children:Object(Pe.jsx)(nt.a,{icon:r?at.b:at.d})})}),b.map((function(e,t){return Object(Pe.jsx)("div",{className:"action-wrapper",style:{top:f*Math.sin(x*(t+1))+30,left:-f*Math.cos(x*(t+1))+12},children:e},t)}))]})}}]),n}(a.Component),St=Object(i.c)((function(e){return{hideHighlightView:e.param.hideHighlightView,selectedNodes:e.selectedNodes,highlightedNodes:e.highlightedNodes,unseenTopK:e.param.unseenTopK,hasLinkPredictions:e.hasLinkPredictions,numHighlightsAndFocus:e.highlightedNodes.reduce((function(t,n){return t+(e.isNodeSelected[n]?1:0)}),0)}}),(function(e){return Object(o.b)({selectNodes:$,highlightNodes:J,selectNodePair:ee,changeParam:se,highlightNodePairs:X},e)}))(At),Tt=n(308),Mt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this,t=this.props.selectedNodes;return Object(Pe.jsxs)("div",{className:"view",id:"focus-control",children:[Object(Pe.jsxs)("h5",{className:"view-title text-center",children:["Focus",t.length>0&&Object(Pe.jsx)(lt.a,{variant:"primary",size:"xxs",style:{marginLeft:"10px"},onClick:this.props.selectNodes.bind(null,"CLEAR",null,null),children:"clear"})]}),Object(Pe.jsxs)("div",{className:"view-body",children:[0===t.length&&Object(Pe.jsx)("div",{children:"No focal groups yet."}),t.map((function(t,n){return Object(Pe.jsxs)("div",{className:"focal-group",children:[Object(Pe.jsx)("span",{className:"del-btn",style:{marginRight:"5px"},onClick:e.props.selectNodes.bind(null,"DELETE",null,n),children:Object(Pe.jsx)(nt.a,{icon:at.h})}),Object(Pe.jsxs)("span",{children:["foc-",n,": ",Object(Pe.jsx)(Tt.a,{variant:"dark",children:t.length})," nodes"]})]},n)}))]})]})}}]),n}(a.Component),Lt=Object(i.c)((function(e){return{selectedNodes:e.selectedNodes}}),(function(e){return Object(o.b)({selectNodes:$},e)}))(Mt),It=n(164);function Pt(e){var t,n=e.hasHist,a=e.data,r=e.isTopoVsLatent,s=e.spec,i=e.xLabel,o=e.yLabel,c=e.hVals,l=e.brushedFunc,d=e.brushedArea,h=e.useLinearScale,u=s.margins,p=s.histWidth,b=s.scatterWidth,g=s.legendWidth,m=s.histHeight,x=s.scatterHeight,f=s.tickLabelGap,O=s.gridBinSize,v=s.numBins,y=a.binsLatent,N=a.binsTopo,w=a.binsFeature,k=a.gridsTopo,E=a.gridsFeature,C=a.src,A=a.tgt,S=r?k.bins:E.bins,T=r?k.maxCnt:E.maxCnt,M=r?N:w;c&&(t=r?c[1]:c[2]);var L,I,P,D,F=u.left+u.right+(n?p:0)+b+f+g,_=u.top+u.bottom+(n?m:0)+x+f,R=O*b,H=O*x,G=Object(j.l)(j.f).domain([0,T]);if(h)L=G;else{L=function(e){var t=Object(j.m)(j.f).domain([1,e+1]);return function(e){return t(e+1)}}(T)}if(n)if(P=Object(j.h)(y.map((function(e){return e.length}))),D=Object(j.h)(M.map((function(e){return e.length}))),h)I={latent:Object(j.i)().domain([0,P]).range([0,m]),y:Object(j.i)().domain([0,D]).range([0,p])};else{var B=function(e,t){var n=Object(j.j)().domain([1,e+1]).range([0,t]);return function(e){return n(e+1)}};I={latent:B(P,m),y:B(D,p)}}var W=Object(j.d)(".2f"),z=Object(j.d)(".2~s");return Object(Pe.jsx)("svg",{width:F,height:_,className:"histogram scatterplot",children:Object(Pe.jsxs)("g",{transform:"translate(".concat(u.left,",").concat(u.top,")"),children:[Object(Pe.jsxs)("g",{className:"legend",transform:"translate(".concat((n?p:0)+f+b+10,", 0)"),children:[Object(Pe.jsx)("text",{x:R/2,y:10,textAnchor:"middle",children:"0"}),Object(Pe.jsxs)("g",{transform:"translate(0, 12)",children:[Object(Pe.jsx)("rect",{x:0,y:0,width:H,height:5*R,style:{stroke:"black",fill:"none"}}),new Array(5).fill(0).map((function(e,t){return Object(Pe.jsx)("rect",{x:0,y:H*t,height:R,width:H,fill:G(t*T/5)},t)}))]}),Object(Pe.jsx)("text",{x:9,y:12+3*H,textAnchor:"start",children:z(h?T/2:Math.pow(10,Math.log10(T+1)/2))}),Object(Pe.jsx)("text",{x:R/2,y:24+5*H,textAnchor:"middle",children:z(T)})]}),Object(Pe.jsxs)("g",{transform:"translate(".concat(n?p+f:f,",0)"),children:[Object(Pe.jsx)("g",{children:S.map((function(e,t){return Object(Pe.jsx)("g",{children:e.map((function(e,n){return Object(Pe.jsx)("rect",{x:t*R,y:x-(n+1)*H,width:R,height:H,fill:L(e.length),stroke:"none",children:Object(Pe.jsxs)("title",{children:[i,": ",W(t*O)," - ",W((t+1)*O),", ",o,":"," ",W(n*O)," -",W((n+1)*O),". Count: ",e.length,"."]})},n)}))},t)}))}),Object(Pe.jsxs)("g",{className:"axis",transform:"translate(0,".concat(x,")"),children:[Object(Pe.jsx)("line",{x1:-3,y1:2,x2:b+8,y2:2,markerEnd:"url(#axis-arrow-head)"}),[".5","1"].map((function(e,t){return Object(Pe.jsx)("text",{x:b*e,y:11,textAnchor:"middle",children:e},t)})),Object(Pe.jsx)("text",{x:-10,y:11,children:"0"}),i&&Object(Pe.jsx)("text",{x:b+8,y:-5,textAnchor:"end",children:i})]}),Object(Pe.jsxs)("g",{className:"axis",children:[Object(Pe.jsx)("line",{x1:-2,y1:x+2,x2:-2,y2:-8,markerEnd:"url(#axis-arrow-head)"}),[".5","1"].map((function(e,t){return Object(Pe.jsx)("text",{x:-4,y:x*(1-e)+3,textAnchor:"end",children:e},t)})),o&&Object(Pe.jsx)("text",{x:5,y:-5,children:o})]}),l&&Object(Pe.jsx)(Ot,{width:b,height:x,brushedFunc:function(e){function t(e){return Math.max(0,Math.min(e,v-1))}for(var n=t(Math.round(e.x/R)),a=t(Math.round((x-e.y)/H)),r=t(Math.round((e.x+e.width)/R)),s=t(Math.round((x-e.y-e.height)/H)),i=[],o=n;o<=r;o++)for(var c=s;c<=a;c++)i=i.concat(S[o][c]);var d=i.map((function(e){return[C[e],A[e]]}));l({x:n*R,y:x-(a+1)*H,width:(r-n+1)*R,height:(a-s+1)*H},d)},brushedArea:d}),c&&Object(Pe.jsxs)("g",{className:"value-marker",children:[t&&Object(Pe.jsxs)("g",{transform:"translate(0,".concat((1-t)*x-1,")"),children:[Object(Pe.jsx)("line",{x1:0,y1:0,x2:b,y2:0}),Object(Pe.jsx)("rect",{x:b,y:-8,width:34,height:16}),Object(Pe.jsx)("text",{x:x+2,y:4,children:W(t)})]}),Object(Pe.jsxs)("g",{transform:"translate(".concat(c[0]*b,",0)"),children:[Object(Pe.jsx)("line",{x1:0,y1:0,x2:0,y2:x}),Object(Pe.jsx)("rect",{x:-20,y:-12,width:40,height:16}),Object(Pe.jsx)("text",{x:0,y:1,textAnchor:"middle",children:W(c[0])})]})]})]}),n&&Object(Pe.jsxs)("g",{children:[Object(Pe.jsxs)("g",{transform:"translate(".concat(p+f,",").concat(x+f,")"),children:[Object(Pe.jsxs)("g",{className:"axis",children:[Object(Pe.jsx)("line",{x1:-3,y1:0,x2:b+8,y2:0,markerEnd:"url(#axis-arrow-head)"}),Object(Pe.jsx)("line",{x1:-2,y1:0,x2:-2,y2:m+8,markerEnd:"url(#axis-arrow-head)"}),new Array(3).fill(0).map((function(e,t){return Object(Pe.jsx)("line",{x1:-2,y1:I.latent(P/3*(t+1)),x2:-6,y2:I.latent(P/3*(t+1))},t)})),Object(Pe.jsx)("text",{x:-7,y:m+3,textAnchor:"end",children:z(P)})]}),Object(Pe.jsx)("g",{children:y.map((function(e,t){return Object(Pe.jsx)("rect",{className:"bar",x:e.x0*b,y:0,width:R-1,height:I.latent(e.length),children:Object(Pe.jsxs)("title",{children:[i,": ",W(e.x0),"-",W(e.x1)," count: ",e.length]})},t)}))})]}),Object(Pe.jsxs)("g",{transform:"translate(".concat(p,", ").concat(x,")"),children:[Object(Pe.jsxs)("g",{className:"axis",children:[Object(Pe.jsx)("line",{x1:1,y1:2,x2:-p-8,y2:2,markerEnd:"url(#axis-arrow-head)"}),Object(Pe.jsx)("line",{x1:0,y1:3,x2:0,y2:-x-8,markerEnd:"url(#axis-arrow-head)"}),new Array(3).fill(0).map((function(e,t){return Object(Pe.jsx)("line",{x1:-I.y(D/3*(t+1)),y1:2,x2:-I.y(D/3*(t+1)),y2:6},t)})),Object(Pe.jsx)("text",{x:-p,y:17,textAnchor:"middle",children:z(D)})]}),Object(Pe.jsx)("g",{children:M.map((function(e,t){return Object(Pe.jsx)("rect",{className:"bar",x:-I.y(e.length),y:-e.x1*x,width:I.y(e.length),height:H-1,children:Object(Pe.jsxs)("title",{children:[o,": ",W(e.x0),"-",W(e.x1)," count: ",e.length]})},t)}))})]})]})]})})}var Dt=Object(a.memo)(Pt),Ft=n(168),_t=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.nodes,r=t.highlightedNodePairs,s=t.selectedPairIdx,i=this.props,o=i.selectNodePair,c=i.highlightNodePairs,l=n&&n[0].label?"label":"id",d=Object(a.memo)((function(t){var i=t.index,c=t.style,d=r[i],h=Object(a.useCallback)(He()((function(t){return e.props.hoverNode(t)}),200));return Object(Pe.jsxs)("div",{className:xt()("list-group-item",{selected:i===s}),onMouseEnter:h.bind(e,[d[0],d[1]]),onMouseLeave:h.bind(e,null),onClick:o.bind(null,d[0],d[1]),style:c,children:[n[d[0]][l]," - ",n[d[1]][l]]})}));return Object(Pe.jsxs)("div",{style:{minWidth:"120px"},children:[Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(Tt.a,{variant:"primary",children:r.length})," pairs highlighted."]}),r.length>0&&Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("div",{className:"node-pair-list",children:Object(Pe.jsx)(Ft.a,{className:"list-group",height:r.length>8?200:25*r.length,width:"100%",itemSize:25,itemCount:r.length,children:d})}),Object(Pe.jsx)("div",{children:Object(Pe.jsx)(lt.a,{variant:"primary",size:"xs",onClick:c.bind(null,null,null,null),children:"clear"})})]})]})}}]),n}(a.Component),Rt=function(e,t){if(2!==t.length||1!==t[0].length||1!==t[1].length)return-1;for(var n=t[0][0],a=t[1][0],r=0;r<e.length;r++){var s=e[r];if(s[0]===n&&s[1]===a||s[0]===a&&s[1]===n)return r}return-1},Ht=Object(i.c)((function(e){return{nodes:e.graph.nodes,highlightedNodePairs:e.highlightedNodePairs,selectedPairIdx:Rt(e.highlightedNodePairs,e.selectedNodes)}}),(function(e){return Object(o.b)({selectNodePair:ee,highlightNodePairs:X,hoverNode:Q},e)}))(_t),Gt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"renderCreateModal",value:function(){for(var e=this.props,t=e.highlightedNodes,n=e.hasLinkPredictions,a=e.selectedNodes,r=e.formData,s=this.props.nodePairFilter.useLinearScale,i=r.show,o=r.connectivity,c=r.userInterests,l=r.linkPrediction,d=r.nodePairs,h=this.props,u=h.changeScatterplotForm,j=h.changeParam,p=a.length,b=[],g=0;g<p;g++)for(var m=g+1;m<p;m++)b.push([g,m]);return Object(Pe.jsxs)(Ze.a,{show:i,size:"lg",centered:!0,id:"create-scatterplot-modal",onHide:this.props.changeScatterplotForm.bind(null,"show",!1),children:[Object(Pe.jsx)(Ze.a.Header,{closeButton:!0,children:Object(Pe.jsx)(Ze.a.Title,{children:"Customization"})}),Object(Pe.jsxs)(Ze.a.Body,{children:[Object(Pe.jsx)("h6",{children:"Settings"}),Object(Pe.jsxs)($e.a,{inline:!0,children:[Object(Pe.jsx)($e.a.Label,{style:{marginRight:"5px"},children:"Choose scale type:"}),Object(Pe.jsx)($e.a.Check,{inline:!0,label:"linear",type:"radio",id:"scale-linear-ctrl",checked:s,onChange:function(){j("nodePairFilter.useLinearScale",null,!0)}}),Object(Pe.jsx)($e.a.Check,{inline:!0,label:"log10",type:"radio",id:"scale-log-ctrl",checked:!s,onChange:function(){j("nodePairFilter.useLinearScale",null,!0)}})]}),Object(Pe.jsx)("h6",{style:{marginTop:"30px"},children:"Create customized node-pair scatterplot"}),Object(Pe.jsxs)($e.a,{children:[Object(Pe.jsxs)($e.a.Row,{children:[Object(Pe.jsx)($e.a.Label,{column:!0,sm:2,children:"Connectivity"}),Object(Pe.jsxs)(It.a,{children:[Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"all",checked:"all"===o,onChange:u.bind(null,"connectivity","all")}),Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"connected by an edge",checked:"edge"===o,onChange:u.bind(null,"connectivity","edge")}),Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"not connected",checked:"nonedge"===o,onChange:u.bind(null,"connectivity","nonedge")})]})]}),Object(Pe.jsx)("div",{style:{marginBottom:"20px"}}),Object(Pe.jsxs)($e.a.Row,{children:[Object(Pe.jsx)($e.a.Label,{column:!0,sm:2,children:"User interests"}),Object(Pe.jsxs)(It.a,{children:[(t.length>1||a.length>0)&&Object(Pe.jsx)($e.a.Row,{children:Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)($e.a.Check,{type:"radio",label:"all",checked:"all"===c,onChange:u.bind(null,"userInterests","all")})})}),t.length>1&&Object(Pe.jsx)($e.a.Row,{children:Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)($e.a.Check,{type:"radio",label:"within highlighted nodes",checked:"highlight"===c,onChange:u.bind(null,"userInterests","highlight")})})}),a.length>0&&Object(Pe.jsx)($e.a.Row,{children:a.map((function(e,t){return Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)($e.a.Check,{type:"radio",label:"within foc-".concat(t),checked:c==="foc-".concat(t),onChange:u.bind(null,"userInterests","foc-".concat(t))})},t)}))}),b.length>0&&Object(Pe.jsx)($e.a.Row,{children:b.map((function(e,t){return Object(Pe.jsx)(It.a,{md:4,children:Object(Pe.jsx)($e.a.Check,{type:"radio",label:"between foc-".concat(e[0]," & foc-").concat(e[1]),checked:c==="foc-".concat(e[0],"*foc-").concat(e[1]),onChange:u.bind(null,"userInterests","foc-".concat(e[0],"*foc-").concat(e[1]))})},t)}))}),t.length<2&&!a.length&&Object(Pe.jsx)($e.a.Text,{children:"Not applicable. Please specify interests by highlighting or focusing nodes."})]})]}),Object(Pe.jsx)("div",{style:{marginBottom:"20px"}}),Object(Pe.jsxs)($e.a.Row,{children:[Object(Pe.jsx)($e.a.Label,{column:!0,sm:2,children:"Link prediction"}),n?Object(Pe.jsxs)(It.a,{children:[Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"all",checked:"all"===l,onChange:u.bind(null,"linkPrediction","all")}),Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"predicted true",checked:"pred-true"===l,onChange:u.bind(null,"linkPrediction","pred-true")}),Object(Pe.jsx)($e.a.Check,{inline:!0,type:"radio",label:"predicted false",checked:"pred-false"===l,onChange:u.bind(null,"linkPrediction","pred-false")}),Object(Pe.jsx)($e.a.Text,{children:"Note that prediction only applies to node pairs with specific node types in k-partitie graph."})]}):Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)($e.a.Text,{children:"Not applicable. No link prediction results loaded."})})]}),Object(Pe.jsx)("div",{style:{marginBottom:"20px"}}),Object(Pe.jsxs)("div",{style:{marginBottom:"10px"},children:["Number of filtered node pairs: ",d.length]}),Object(Pe.jsx)(lt.a,{onClick:this.props.addDistanceScatterplot,disabled:!d.length,children:"Create"})]})]})]})}},{key:"render",value:function(){var e,t=this.props,n=t.hops,a=t.distances,r=t.nodePairFilter,s=t.spec,i=t.highlightDistVals,o=t.hasFeatures,c=t.activeTab,l=this.props.highlightedNodePairs,d=this.props,h=d.highlightNodePairs,u=d.changeParam,p=a.display,b=a.displaySpecial,g=r.useLinearScale,m=Object(j.d)(".2~s");return Object(Pe.jsxs)("div",{className:"view",id:"distance-view",style:{width:b.length+p.length>2||l.length>0?580:420},children:[Object(Pe.jsxs)("h5",{className:"view-title text-center",children:["Distance Comparison",Object(Pe.jsx)("span",{style:{marginLeft:"5px",cursor:"pointer"},children:Object(Pe.jsx)(et.a,{placement:"right",overlay:Object(Pe.jsxs)(tt.a,{id:"distance-view-tooltip",children:["Topological distance of node pair = 1.0 - Jaccard Index of ",n,"-hop neighbor sets of two nodes. ",Object(Pe.jsx)("br",{}),"Latent distance of node pair = cosine distance of node embeddings. ",Object(Pe.jsx)("br",{}),o&&Object(Pe.jsx)("div",{children:"Feature distance = euclidean distance (scaled to [0,1]) of (normalized) node feature vectors"}),"Luminance ~ #node pairs with specific distance values."]}),children:Object(Pe.jsx)(nt.a,{icon:rt.a})})}),Object(Pe.jsx)("span",{className:"right-btn",onClick:this.props.changeScatterplotForm.bind(null,"show",!0),children:Object(Pe.jsx)(nt.a,{icon:at.i})})]}),Object(Pe.jsx)("div",{className:"view-body",children:Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:[Object(Pe.jsxs)("div",{children:[o&&Object(Pe.jsxs)(Ie.a,{variant:"pills",activeKey:c,onSelect:function(e){u("activeDistanceTab",e)},children:[Object(Pe.jsx)(Ie.a.Item,{children:Object(Pe.jsx)(Ie.a.Link,{eventKey:"topo-vs-latent",children:"Topo vs. latent"})}),Object(Pe.jsx)(Ie.a.Item,{children:Object(Pe.jsx)(Ie.a.Link,{eventKey:"feature-vs-latent",children:"Feature vs. latent"})})]}),(e="topo-vs-latent"===c,Object(Pe.jsx)("div",{className:"scatter-hist-list",children:b.concat(p).map((function(t,n){return Object(Pe.jsxs)("div",{className:"stuff-container",children:[Object(Pe.jsxs)("div",{className:"container-title",children:[t.title," (#=",t.src?m(t.src.length):"",")"]}),Object(Pe.jsx)("div",{className:"container-body",children:t.isComputing?Object(Pe.jsx)(Xe,{}):Object(Pe.jsx)(Dt,{data:t,isTopoVsLatent:e,hasHist:!0,useLinearScale:g,spec:s,xLabel:"latent",yLabel:e?"topo":"feature",hVals:i,brushedFunc:h.bind(null,e,n),brushedArea:e===r.isTopoVsLatent&&r.which===n?r.brushedArea:null})})]},n)}))}))]}),l.length>0&&Object(Pe.jsx)(Ht,{})]})}),this.renderCreateModal()]})}}]),n}(a.Component),Bt=Object(i.c)((function(e){var t,n=e.latent.emb,a=e.graph,r=a.neighborMasks,s=a.sparseFeatures,i=a.denseFeatures,o=a.nodes,c=e.hoveredNodes,l=e.selectedNodes,d=s||i||null,h=null,u=null;return e.distances.display[0].isComputing||(c&&2===c.length?(u=c[0],t=c[1]):2===l.length&&1===l[0].length&&1===l[1].length&&(u=l[0][0],t=l[1][0]),null!==u&&(h=[A(n[u],n[t]),E(r[u],r[t],e.param.neighborDistanceMetric),d&&o[u].typeId===o[t].typeId?e.distances.featureScale(S(d[u],d[t])):null])),{nodeTypes:e.graph.nodeTypes,selectedNodes:l,highlightedNodePairs:e.highlightedNodePairs,highlightedNodes:e.highlightedNodes,hasLinkPredictions:e.hasLinkPredictions,highlightDistVals:h,distances:e.distances,spec:e.spec.scatterHist,nodePairFilter:e.param.nodePairFilter,hops:e.param.hops,activeTab:e.param.activeDistanceTab,formData:e.scatterplotForm,hasFeatures:!!d}}),(function(e){return Object(o.b)({highlightNodePairs:X,hoverNode:Q,changeParam:se,changeScatterplotForm:ue,addDistanceScatterplot:he},e)}))(Gt),Wt=function(e){var t=e.params,n=e.changeParam;return Object(Pe.jsxs)(Ze.a,{show:t.showSettings,centered:!0,id:"latent-neighbor-blocks-settings-modal",onHide:n.bind(null,"neighborLatentMap.showSettings",!1,null,null),children:[Object(Pe.jsx)(Ze.a.Header,{closeButton:!0,children:Object(Pe.jsx)(Ze.a.Title,{children:"Settings for latent neighbor blocks"})}),Object(Pe.jsx)(Ze.a.Body,{children:Object(Pe.jsxs)($e.a,{inline:!0,children:[Object(Pe.jsx)($e.a.Label,{style:{marginRight:"5px"},children:"Choose scale type:"}),Object(Pe.jsx)($e.a.Check,{inline:!0,label:"linear",type:"radio",id:"scale-linear-nei",checked:t.useLinearScale,onChange:n.bind(null,"neighborLatentMap.useLinearScale",null,!0,null)}),Object(Pe.jsx)($e.a.Check,{inline:!0,label:"log10",type:"radio",id:"scale-log-nei",checked:!t.useLinearScale,onChange:n.bind(null,"neighborLatentMap.useLinearScale",null,!0,null)})]})})]})},zt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.changeParam,r=t.hoverNode,s=t.highlightNodes,i=t.param,o=i.isOpen,c=i.useLinearScale,l=i.hop,d=this.props.data,h=d.binsByHop,u=d.maxBinVals,p=d.granu,b=d.mapping,g=this.props.spec,m=g.gap,x=g.cellSize,f=h[l-1],O=x*p,v=(O+m)*p+m;if(c)e=Object(j.l)(j.f).domain([0,u[l-1]]);else{e=function(e){var t=Object(j.m)(j.f).domain([1,e+1]);return function(e){return t(e+1)}}(u[l-1])}var y=Object(a.memo)((function(t){var n=t.block,i=t.x,o=t.y,c=Object(a.useCallback)(He()((function(e){return r(e)}),300));return Object(Pe.jsx)(_e.b,{onClick:s.bind(null,b[i][o],null,"neighbor-latent-map",null),onMouseOver:c.bind(null,b[i][o]),onMouseOut:c.bind(null,null),children:n.map((function(t,n){return Object(Pe.jsx)(_e.b,{x:x*n,y:0,children:t.map((function(t,a){return Object(Pe.jsx)(_e.e,{x:0,y:x*a,width:x,height:x,strokeEnabled:n===i&&a===o,stroke:"red",strokeWidth:1,fill:e(t)},a)}))},n)}))})}));return Object(Pe.jsxs)("div",{className:"view",id:"neighbor-latent-map",style:{width:v+30},children:[Object(Pe.jsxs)("h5",{className:"view-title",children:[Object(Pe.jsx)("span",{className:"left-btn",onClick:n.bind(null,"neighborLatentMap.isOpen",null,!0,null),children:Object(Pe.jsx)(nt.a,{icon:o?at.f:at.g})}),"Latent Neighbor Blocks",Object(Pe.jsx)("span",{style:{marginLeft:"5px",cursor:"pointer"},children:Object(Pe.jsx)(et.a,{placement:"right",overlay:Object(Pe.jsxs)(tt.a,{id:"neighbor-latent-map-tooltip",children:["A block = the neighbor distribution of nodes located in an area of 2D latent space. ",Object(Pe.jsx)("br",{})," Luminance of a cell in a block = # their neighbors located in that area of 2D latent space."]}),children:Object(Pe.jsx)(nt.a,{icon:rt.a})})}),Object(Pe.jsx)("span",{className:"right-btn",onClick:n.bind(null,"neighborLatentMap.showSettings",!0,null,null),children:Object(Pe.jsx)(nt.a,{icon:at.i})})]}),Object(Pe.jsxs)("div",{className:"view-body",style:{display:o?"block":"none"},children:[Object(Pe.jsx)(_e.g,{width:v,height:v,children:Object(Pe.jsx)(_e.c,{x:m,y:m,children:f.map((function(e,t){return Object(Pe.jsx)(_e.b,{x:(O+m)*t,y:0,children:e.map((function(e,n){return b[t][n].length>0?Object(Pe.jsxs)(_e.b,{x:0,y:(O+m)*n,children:[Object(Pe.jsx)(_e.e,{x:0,y:0,width:O,height:O,fillEnabled:!1,stroke:"grey",strokeWidth:.5}),Object(Pe.jsx)(y,{block:e,x:t,y:n})]},n):Object(Pe.jsx)(_e.b,{},n)}))},t)}))})}),Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"5px"},children:[Object(Pe.jsxs)("div",{style:{marginRight:"5px"},children:[Object(Pe.jsx)("span",{style:{marginRight:"5px"},children:"#neighbors within "}),Object(Pe.jsx)("div",{style:{display:"inline-block"},children:Object(Pe.jsxs)(ot.a,{onSelect:function(e){n("neighborLatentMap.hop",parseInt(e),!1)},children:[Object(Pe.jsx)(ot.a.Toggle,{id:"hops-to-show-nei",size:"xxs",variant:"outline-secondary",children:l}),Object(Pe.jsx)(ot.a.Menu,{children:new Array(this.props.hops).fill(0).map((function(e,t){return Object(Pe.jsx)(ot.a.Item,{eventKey:t+1,active:l===t+1,children:t+1},t)}))})]})}),Object(Pe.jsx)("span",{style:{marginLeft:"5px"},children:"hops: "})]}),Object(Pe.jsx)(dt,{scale:e,domain:[0,u[l-1]]})]})]}),Object(Pe.jsx)(Wt,{params:i,changeParam:n})]})}}]),n}(a.Component),Ut=Object(i.c)((function(e){return{data:e.latent.neighborPos,spec:e.spec.neighborLatentMap,param:e.param.neighborLatentMap,hops:e.param.hops}}),(function(e){return Object(o.b)({changeParam:se,hoverNode:Q,highlightNodes:J},e)}))(zt);function Vt(){return Object(Pe.jsx)("svg",{children:Object(Pe.jsx)("defs",{children:Object(Pe.jsx)("marker",{id:"axis-arrow-head",orient:"auto",markerWidth:"4",markerHeight:"8",refX:"0.1",refY:"4",children:Object(Pe.jsx)("path",{d:"M0,0 V8 L4,4 Z",fill:"black"})})})})}n(298);var Kt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).appRef=r.a.createRef(),a.leftColRef=r.a.createRef(),a.state={rightWidth:null},a.bindedUpdate=a.updateDimensions.bind(Object(Se.a)(a)),a}return Object(Ae.a)(n,[{key:"updateDimensions",value:function(){if(this.props.loaded){var e=this.appRef.current.getBoundingClientRect(),t=this.leftColRef.current.getBoundingClientRect();this.setState({rightWidth:e.width-t.width-10})}}},{key:"componentDidMount",value:function(){var e=this.props.match.params.datasetId;window.addEventListener("resize",this.bindedUpdate),this.props.fetchGraphData(e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.bindedUpdate)}},{key:"componentDidUpdate",value:function(){this.props.loaded&&!this.state.rightWidth&&this.updateDimensions()}},{key:"render",value:function(){if(!this.props.loaded)return Object(Pe.jsxs)("div",{className:"App",children:[Object(Pe.jsx)("h3",{children:"Loading data..."}),this.props.error&&Object(Pe.jsx)("p",{children:this.props.error})]});var e=this.props,t=e.numNodes,n=e.numEdges,a=e.datasetId,r=e.datasetName,s=e.hasNodeFeatures,i=e.neighborMapOpen,o=this.state.rightWidth,c=Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(ut,{}),Object(Pe.jsx)(Lt,{})]});return Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(De,{datasetName:r||a,stats:{numNodes:t,numEdges:n}}),Object(Pe.jsx)(St,{}),Object(Pe.jsxs)("div",{className:"App",ref:this.appRef,children:[Object(Pe.jsxs)("div",{ref:this.leftColRef,style:{flexShrink:1},children:[i?Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"stretch"},children:[Object(Pe.jsx)(pt,{}),Object(Pe.jsx)(Ut,{})]}):Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},children:[c,Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(pt,{}),Object(Pe.jsx)(Ut,{})]})]}),Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"flex-start"},children:[i&&c,Object(Pe.jsx)(Bt,{})]})]}),Object(Pe.jsxs)("div",{style:{maxWidth:o?o+"px":"auto",flexGrow:2},children:[s&&Object(Pe.jsx)(Ct,{}),Object(Pe.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-start",flexWrap:"wrap"},children:[Object(Pe.jsx)(it,{}),Object(Pe.jsx)(Qe,{})]})]})]}),Object(Pe.jsx)(Vt,{}),Object(Pe.jsx)(gt,{})]})}}]),n}(a.Component),Yt=Object(l.f)(Object(i.c)((function(e){return{datasetId:e.datasetId,datasetName:e.datasetName,loaded:e.loaded,numNodes:e.loaded?e.graph.nodes.length:0,numEdges:e.loaded?e.graph.edges.length:0,hasNodeFeatures:e.loaded&&(e.nodeAttrs.active||e.featureAgg.active),neighborMapOpen:e.param.neighborLatentMap.isOpen,error:e.error}}),(function(e){return Object(o.b)({fetchGraphData:K},e)}))(Kt)),qt=n(309),Jt=n(310),Xt=n(311),Qt=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(){return Object(Ce.a)(this,n),t.apply(this,arguments)}return Object(Ae.a)(n,[{key:"render",value:function(){return Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(De,{}),Object(Pe.jsxs)(qt.a,{children:[Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsxs)("h3",{style:{marginTop:"10px"},children:["A visualization tool for graph neural networks. See"," ",Object(Pe.jsx)("a",{href:"http://www.cs.ubc.ca/labs/imager/tr/2021/corgie/",children:" HERE "})," for the paper."]})}),Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsx)("div",{style:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"45.23%"},children:Object(Pe.jsx)("iframe",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,bottom:0,right:0},src:"https://www.youtube.com/embed/sQMF50aNtKI",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0})})}),Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsxs)("div",{style:{fontSize:"large",margin:"20px 0"},children:["You can try CorGIE on the following datasets now. ",Object(Pe.jsx)("br",{})," We will provide the code and detailed instructions about how to install it locally and how to preprocess your own dataset."]})}),Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsxs)(Xt.a,{striped:!0,hover:!0,bordered:!0,children:[Object(Pe.jsx)("thead",{children:Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("th",{children:" # "}),Object(Pe.jsx)("th",{children:" Name "}),Object(Pe.jsx)("th",{children:" Source "}),Object(Pe.jsx)("th",{children:" #Nodes "}),Object(Pe.jsx)("th",{children:" #Edges "}),Object(Pe.jsx)("th",{children:" #Node types "}),Object(Pe.jsx)("th",{children:" Node features "}),Object(Pe.jsx)("th",{children:" #Hops "}),Object(Pe.jsx)("th",{children:" Notes "})]})}),Object(Pe.jsx)("tbody",{children:F.map((function(e,t){return Object(Pe.jsxs)("tr",{children:[Object(Pe.jsxs)("td",{children:[" ",t+1," "]}),Object(Pe.jsx)("td",{children:Object(Pe.jsxs)(c.b,{to:"/".concat(e.id),children:[" ",e.name," "]})}),Object(Pe.jsxs)("td",{children:[" ",e.source," "]}),Object(Pe.jsxs)("td",{className:"cell-num",children:[" ",e.numNodes," "]}),Object(Pe.jsxs)("td",{className:"cell-num",children:[" ",e.numEdges," "]}),Object(Pe.jsxs)("td",{className:"cell-num",children:[" ",e.numTypes," "]}),Object(Pe.jsxs)("td",{children:[" ",e.nodeFeatures," "]}),Object(Pe.jsxs)("td",{className:"cell-num",children:[" ",e.hops," "]}),Object(Pe.jsxs)("td",{children:[" ",e.desc," "]})]},t)}))})]})})]})]})}}]),n}(a.Component),Zt=n(36),$t=n(312);function en(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB","GB","TB"][t]}var tn={name:"dataset name",hops:"#hops",graph:"input graph file",embedding:"node embedding file"};function nn(e){var t=e.datasetId,n=e.done;return Object(Pe.jsxs)(Ze.a,{show:!0,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(Pe.jsx)(Ze.a.Header,{closeButton:!0,children:Object(Pe.jsx)(Ze.a.Title,{id:"contained-modal-title-vcenter",children:n?"Success":"In progress"})}),Object(Pe.jsx)(Ze.a.Body,{children:Object(Pe.jsxs)("div",{children:[Object(Pe.jsxs)("p",{children:["Dataset ID: ",t,"."]}),Object(Pe.jsxs)("p",{children:["Dataset URL: ","http://localhost:3000/"+t]}),Object(Pe.jsx)("p",{children:"This ID (or URL) is the only access to your dataset. Please save it."}),n&&Object(Pe.jsx)(lt.a,{variant:"primary",children:Object(Pe.jsx)(c.b,{to:"/".concat(t),children:"Go"})})]})})]})}var an=function(e){Object(Te.a)(n,e);var t=Object(Me.a)(n);function n(e){var a;return Object(Ce.a)(this,n),(a=t.call(this,e)).state={datasetId:null,uploading:!1,status:null,missingRequired:null,form:{name:null,hops:null,graph:null,features:null,featureMeta:null,embedding:null,umap:null,predRes:null}},a.handleSubmit=a.handleSubmit.bind(Object(Se.a)(a)),a.handleChange=a.handleChange.bind(Object(Se.a)(a)),a.handleFileChange=a.handleFileChange.bind(Object(Se.a)(a)),a}return Object(Ae.a)(n,[{key:"handleChange",value:function(e){this.setState((function(t){return{form:Object(d.a)(Object(d.a)({},t.form),{},Object(Zt.a)({},e.target.name,e.target.value))}}))}},{key:"handleFileChange",value:function(e){this.setState((function(t){return{form:Object(d.a)(Object(d.a)({},t.form),{},Object(Zt.a)({},e.target.name,e.target.files[0]))}}))}},{key:"missingRequired",value:function(){for(var e in tn)if(tn.hasOwnProperty(e)&&(!this.state.form.hasOwnProperty(e)||null===this.state.form[e]))return tn[e];return!1}},{key:"handleSubmit",value:function(e){var t=this;console.log("submit"),console.log(this.state);var n=this.missingRequired();if(n)this.setState({missingRequired:n});else{this.setState({uploading:!0,missingRequired:null,status:0});var a=this.state.form,r=new FormData;for(var s in a)a.hasOwnProperty(s)&&null!==a[s]&&r.append(s,a[s]);fetch("http://localhost:8787/upload",{method:"POST",mode:"cors",body:r}).then((function(e){return e.text()})).then((function(e){console.log("File transfer succeeded.  Dastaset ID: ",e),t.setState({datasetId:e});var n=t,a=setInterval((function(){fetch("http://localhost:8787/status?"+new URLSearchParams({id:e})).then((function(e){return e.text()})).then((function(e){"1"===e&&(clearInterval(a),n.setState({status:1}))})).catch((function(){console.error("Check status error!")}))}),500)})).catch((function(){console.error("Post data error!")}))}e.preventDefault()}},{key:"fileInputComp",value:function(e){return Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)("input",{type:"file",name:e,onChange:this.handleFileChange}),this.state.form[e]&&Object(Pe.jsx)("div",{children:en(this.state.form[e].size)})]})}},{key:"render",value:function(){return Object(Pe.jsxs)("div",{children:[Object(Pe.jsx)(De,{}),Object(Pe.jsxs)(qt.a,{children:[Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsxs)(It.a,{children:[Object(Pe.jsx)("h3",{style:{marginTop:"10px"},children:"Upload your own datasets"}),Object(Pe.jsxs)("div",{children:["You can upload the input and output of a GNN training session to CorGIE. Once the preprocessing is finished, you will be provided with a"," ",Object(Pe.jsx)("strong",{children:"dataset ID"}),", which is the ",Object(Pe.jsx)("strong",{children:"only access token "}),"for this dataset."]}),Object(Pe.jsx)("div",{children:"Note: your datasets are stored on our server unless you remove them."})]})}),Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)("h5",{style:{marginTop:"10px"},children:"Dataset files"})})}),Object(Pe.jsx)(Jt.a,{children:Object(Pe.jsx)(It.a,{children:Object(Pe.jsx)("div",{children:"You can download two sample datasets for reference on the right column below."})})}),Object(Pe.jsx)("div",{style:{marginTop:"10px"}}),Object(Pe.jsxs)(Jt.a,{children:[Object(Pe.jsx)(It.a,{md:2,children:Object(Pe.jsx)(lt.a,{variant:"primary",onClick:this.handleSubmit,children:"Submit"})}),this.state.missingRequired&&Object(Pe.jsx)(It.a,{children:Object(Pe.jsxs)($t.a,{variant:"danger",children:["Missing ",this.state.missingRequired,". Please fill it in and re-submit."]})})]}),Object(Pe.jsx)("div",{style:{marginTop:"10px"}}),Object(Pe.jsxs)(Xt.a,{bordered:!0,hover:!0,children:[Object(Pe.jsx)("thead",{children:Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("th",{children:"Type"}),Object(Pe.jsx)("th",{children:"Required"}),Object(Pe.jsx)("th",{style:{minWidth:"300px"},children:"File description"}),Object(Pe.jsx)("th",{children:"Input"}),Object(Pe.jsx)("th",{children:"Sample: movie"}),Object(Pe.jsx)("th",{children:"Sample: Cora"})]})}),Object(Pe.jsxs)("tbody",{children:[Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(nt.a,{icon:at.e})}),Object(Pe.jsx)("td",{children:"Dataset name"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)("input",{type:"text",name:"name",onChange:this.handleChange})}),Object(Pe.jsx)("td",{children:"bipartite-user-movie-medium-1"}),Object(Pe.jsx)("td",{children:"cora-gat"})]}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{rowSpan:3,children:"GNN input"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(nt.a,{icon:at.e})}),Object(Pe.jsxs)("td",{children:["Input graph: a"," ",Object(Pe.jsxs)("strong",{children:[Object(Pe.jsx)("a",{href:"https://networkx.org/",children:"NetworkX"})," json"," "]})," ","file describing the nodes, link, and optionally, dense node features in the input graph. See"," ",Object(Pe.jsx)("a",{href:"https://networkx.org/documentation/stable/reference/convert.html",children:"here"})," ","for format conversion."]}),Object(Pe.jsx)("td",{children:this.fileInputComp("graph")}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/bipartite-user-movie-medium-1/graph.json",target:"_blank",download:!0,children:"graph.json"})}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/cora-gat/graph.json",target:"_blank",download:!0,children:"graph.json"})})]}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{}),Object(Pe.jsxs)("td",{children:["Meta data for dense node features: description of each dense node feature (e.g. budget of a movie) in ",Object(Pe.jsx)("strong",{children:"json"})," format."]}),Object(Pe.jsx)("td",{children:this.fileInputComp("featureMeta")}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/bipartite-user-movie-medium-1/attr-meta.json",target:"_blank",download:!0,children:"feature-meta.json"})}),Object(Pe.jsx)("td",{children:"NA"})]}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{}),Object(Pe.jsxs)("td",{children:["Sparse node features: node feature vectors (e.g. word frequencies in Cora) in ",Object(Pe.jsx)("strong",{children:"csv"})," format."]}),Object(Pe.jsx)("td",{children:this.fileInputComp("features")}),Object(Pe.jsx)("td",{children:"NA"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/cora-gat/features.csv",target:"_blank",download:!0,children:"features.csv"})})]}),Object(Pe.jsx)("tr",{children:Object(Pe.jsx)("td",{colSpan:6})}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{children:"GNN model"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(nt.a,{icon:at.e})}),Object(Pe.jsx)("td",{children:"# Hops: the number of aggregation layer in your GNN"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)("input",{type:"text",name:"hops",onChange:this.handleChange})}),Object(Pe.jsx)("td",{children:"2"}),Object(Pe.jsx)("td",{children:"2"})]}),Object(Pe.jsx)("tr",{children:Object(Pe.jsx)("td",{colSpan:6})}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{rowSpan:3,children:"GNN output"}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(nt.a,{icon:at.e})}),Object(Pe.jsxs)("td",{children:["Node embedding: embedding vectors in ",Object(Pe.jsx)("strong",{children:"csv"})," format"]}),Object(Pe.jsx)("td",{children:this.fileInputComp("embedding")}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/bipartite-user-movie-medium-1/node-embeddings.csv",target:"_blank",download:!0,children:"embedding.csv"})}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/cora-gat/node-embeddings.csv",target:"_blank",download:!0,children:"embedding.csv"})})]}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{}),Object(Pe.jsxs)("td",{children:["Node embedding in 2D: dimensionally reduced (e.g. UMAP, t-SNE) embedding vector in vector in ",Object(Pe.jsx)("strong",{children:"csv"})," format. We compute it in the pre-processor if not provided."]}),Object(Pe.jsx)("td",{children:this.fileInputComp("umap")}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/bipartite-user-movie-medium-1/umap.csv",target:"_blank",download:!0,children:"emb2d.csv"})}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/cora-gat/umap.csv",target:"_blank",download:!0,children:"emb2d.csv"})})]}),Object(Pe.jsxs)("tr",{children:[Object(Pe.jsx)("td",{}),Object(Pe.jsxs)("td",{children:["Prediction results in ",Object(Pe.jsx)("strong",{children:"json"})," format.",Object(Pe.jsxs)("div",{children:["For node classification task: predicted and true class of each node.",Object(Pe.jsx)("div",{children:Object(Pe.jsx)("small",{children:"{ predLabels: [], trueLabels: [], numClasses: x }"})})]}),Object(Pe.jsxs)("div",{children:["For link prediction task: presented edges that are predicted as true by the model (true allow edges), presented edges that are presented as false by the model (false allow edges), and recommended edges that are not presented in the input graph (true unseen edges), sorted by a recommendation score.",Object(Pe.jsx)("div",{children:Object(Pe.jsx)("small",{children:"{ isLinkPrediction: true, trueAllowEdges: [node pair array], falseAllowEdges: [node pair array] trueUnseenEdgesSorted: { node id x: [node list sorted by their similarty score with x] } }"})})]})]}),Object(Pe.jsx)("td",{children:this.fileInputComp("predRes")}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/bipartite-user-movie-medium-1/prediction-results.json",target:"_blank",download:!0,children:"pred-res.json"})}),Object(Pe.jsx)("td",{children:Object(Pe.jsx)(c.b,{to:"/data/cora-gat/prediction-results.json",target:"_blank",download:!0,children:"pred-res.json"})})]})]})]})]}),this.state.uploading&&this.state.datasetId&&Object(Pe.jsx)(nn,{datasetId:this.state.datasetId,done:1===this.state.status})]})}}]),n}(a.Component),rn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function sn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var on=n(166),cn=n(167),ln=n.n(cn);console.log("Starting application...");var dn=Object(o.c)(Ee,Object(o.a)(on.a,ln.a));Object(s.render)(Object(Pe.jsx)(i.a,{store:dn,children:Object(Pe.jsx)(c.a,{children:Object(Pe.jsxs)(l.c,{children:[Object(Pe.jsx)(l.a,{path:"/upload",children:Object(Pe.jsx)(an,{})}),Object(Pe.jsx)(l.a,{path:"/:datasetId",children:Object(Pe.jsx)(Yt,{})}),Object(Pe.jsx)(l.a,{path:"/",children:Object(Pe.jsx)(Qt,{})})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");rn?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):sn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):sn(t,e)}))}}()},93:function(e){e.exports=JSON.parse('[{"id":"bipartite-user-movie-medium-3","name":"bipartite network (user-movie) medium 3","source":"IMDB Movie","numNodes":1088,"numEdges":5000,"numTypes":2,"nodeFeatures":"yes","hops":2,"desc":"Demo dataset used in paper"},{"id":"cora-gat","name":"cora-GAT","source":"paper citation network","numNodes":2708,"numEdges":10556,"numTypes":1,"nodeFeatures":"One-hot word vector (binary). Dictionary length: 1433.","hops":2,"desc":"Demo dataset used in paper"},{"id":"bipartite-user-movie-medium-1","name":"bipartite network (user-movie) medium 1","source":"IMDB Movie","numNodes":259,"numEdges":800,"numTypes":2,"nodeFeatures":"yes","hops":2,"desc":"Dataset for development and debugging"},{"id":"bipartite-user-movie-medium-2","name":"bipartite network (user-movie) medium 2","source":"IMDB Movie","numNodes":780,"numEdges":3200,"numTypes":2,"nodeFeatures":"yes","hops":2,"desc":""},{"id":"tripartite-user-movie-genre-medium-1","name":"tripartite network (user-movie) medium 1","source":"IMDB Movie","numNodes":269,"numEdges":861,"numTypes":3,"nodeFeatures":"none","hops":2,"desc":""},{"id":"large-100-movies-with-ratings","name":"large-100-w-ratings","source":"IMDB Movie","numNodes":1815,"numEdges":2797,"numTypes":5,"nodeFeatures":"none","hops":2,"desc":""},{"id":"large-500-movies-with-ratings","name":"large-500-w-ratings","source":"IMDB Movie","numNodes":11415,"numEdges":22453,"nodeFeatures":"none","numTypes":5,"hops":2,"desc":""},{"id":"toronto-rest-20-user-50","name":"bipartite network (user-restaurant) medium 1","source":"Yelp","numNodes":637,"numEdges":680,"numTypes":2,"nodeFeatures":"2 for restaurants, 6 for users","hops":2,"desc":"Sampled 20 restaurants in Toronto and sampled 50 users each"},{"id":"toronto-rest-50-user-50","name":"bipartite network (user-restaurant) medium 2","source":"Yelp","numNodes":1225,"numEdges":1401,"numTypes":2,"nodeFeatures":"no","hops":2,"desc":"Sampled 50 restaurants in Toronto and sampled 50 users each."},{"id":"citeseer-gat","name":"citeseer-GAT","source":"paper citation network","numNodes":3327,"numEdges":4552,"numTypes":1,"nodeFeatures":"One-hot word vector (binary).  Dictionary length: 3703.","hops":2,"desc":"Applying GAT on CiteSeer dataset"},{"id":"pubmed-gat","name":"pubmed-GAT","source":"paper citation network","numNodes":19717,"numEdges":44324,"numTypes":1,"nodeFeatures":"TF/IDF weighted word vector. Dictionary length 500.","hops":2,"desc":"Applying GAT on Pubmed dataset"},{"id":"power-gcn","name":"power-gcn","source":"Power dataset from P2 in paper","numNodes":4941,"numEdges":6594,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"usair-gcn","name":"USAir-gcn","source":"USAir dataset from P2 in paper","numNodes":332,"numEdges":2126,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"power-graphsage","name":"power-graphsage","source":"Power dataset from P2 in paper","numNodes":4941,"numEdges":6594,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"usair-graphsage","name":"USAir-graphsage","source":"USAir dataset from P2 in paper","numNodes":332,"numEdges":2126,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-sample-100","name":"Coauthor network sample 100","source":"DBLP coauthor network","numNodes":100,"numEdges":348,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-sample-500","name":"Coauthor network sample 500","source":"DBLP coauthor network","numNodes":500,"numEdges":2343,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-sample-1000","name":"Coauthor network sample 1000","source":"DBLP coauthor network","numNodes":1000,"numEdges":5494,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-sample-5000","name":"Coauthor network sample 5000","source":"DBLP coauthor network","numNodes":5000,"numEdges":27109,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-sample-10000","name":"Coauthor network sample 10000","source":"DBLP coauthor network","numNodes":10000,"numEdges":54348,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":""},{"id":"coauthor-full","name":"Coauthor network full","source":"DBLP coauthor network","numNodes":69109,"numEdges":249613,"numTypes":1,"nodeFeatures":"none","hops":2,"desc":"trained by LINE (Tang et al. 2015). Not available due to large size of processed file."}]')}},[[300,1,2]]]);
//# sourceMappingURL=main.ef8229b5.chunk.js.map